{"version":3,"file":"home.js","sources":["../../../../src/lib/local-storage/localStorage.ts","../../../../src/custom-hook/useAuth/authProvider.tsx","../../../../src/custom-hook/useAuth/useAuth.ts","../../../../src/component/image-component/imageLoader.tsx","../../../../src/component/image-component/image.tsx","../../../../src/custom-hook/use-have-permission/useHavePermission.ts","../../../../src/component/loader/post-container-loader/postContainerLoader.tsx","../../../../src/page/home/loader.tsx","../../../../src/component/error/error.tsx","../../../../src/component/post-container/component/postHeader.tsx","../../../../src/component/post-container/component/postWrapper.tsx","../../../../src/component/post-container/component/postTags.tsx","../../../../src/component/post-container/postContainer.tsx","../../../../src/component/button/button.tsx","../../../../src/component/pagination-list/component/paginationListLoader.tsx","../../../../src/page/home/component/statisticPreviewLoader.tsx","../../../../src/page/home/component/statisticPreview.tsx","../../../../src/page/home/page.tsx"],"sourcesContent":["export default {\r\n  get: <T>(key: string, or: string) => {\r\n    return JSON.parse(localStorage.getItem(key) || or) as T\r\n  },\r\n  set: (key: string, value: any) => {\r\n    localStorage.setItem(key, JSON.stringify(value))\r\n  },\r\n  remove: (key: string) => {\r\n    localStorage.removeItem(key)\r\n  }\r\n}","import { type PropsWithChildren, createContext, useEffect, useState } from \"react\";\r\n\r\nimport type { TAuthContext, UserState } from \"./useAuth.type\";\r\n\r\nimport fetcher from \"@/lib/fetcher/fetcher\";\r\nimport coockie from \"@/lib/coockie/coockie\";\r\n\r\nexport const AuthContext = createContext<TAuthContext | undefined>(undefined)\r\n\r\nexport default function AuthProvider({ children }: PropsWithChildren) {\r\n  const [userState, updateUserState] = useState<UserState>({ isAuthPending: false, isLoading: false })\r\n\r\n  useEffect(() => {\r\n    async function isAuth() {\r\n      try {\r\n        const user = userState.user\r\n\r\n        if(!user) {\r\n          updateUserState({ isAuthPending: true, isLoading: false })\r\n            \r\n          const response = await fetcher.get<any>('/authenticate', { 'Authorization': `Bearer ${coockie.getOne('PR_TOKEN')}` })\r\n          const isSuccess = Object.hasOwn(response, 'token')\r\n            \r\n          updateUserState({ isAuthPending: false, isLoading: false, error: undefined, user: isSuccess ? response : undefined })\r\n        }\r\n      } catch(error) {\r\n        updateUserState({ isAuthPending: false, isLoading: false, error: undefined, user: undefined })\r\n      }\r\n    }\r\n\r\n    isAuth()\r\n  }, [])\r\n\r\n  return <AuthContext.Provider value={{ updateUserState, userState }}>{children}</AuthContext.Provider>\r\n}","import { useContext, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"./authProvider\";\r\n\r\nimport fetcher from \"@/lib/fetcher/fetcher\";\r\nimport coockie from \"@/lib/coockie/coockie\";\r\n\r\nimport type { CreateParams, UserSessionData } from \"./useAuth.type\";\r\n\r\nimport useSearchParams from \"../use-search-params/useSearchParams\";\r\n\r\nexport default function useAuth() {\r\n  const redirect = useNavigate()\r\n  const userContext = useContext(AuthContext)\r\n  const searchParams = useSearchParams()\r\n\r\n  const isLogOpen: string | null = searchParams.get('login-modal')\r\n  const isRegOpen: string | null = searchParams.get('registration-modal')\r\n\r\n  return {\r\n    ...userContext?.userState,\r\n    create: async function(params: CreateParams): Promise<void> {\r\n      try {\r\n        if(params.setSession) return userContext?.updateUserState({ user: params.setSession, isAuthPending: false, isLoading: false })\r\n          \r\n        userContext?.updateUserState({ isAuthPending: false, isLoading: true })\r\n        \r\n        const response = await fetcher.post<UserSessionData>(params.apiURL!, params.body)\r\n        \r\n        userContext?.updateUserState({ isAuthPending: false, isLoading: false, error: undefined, user: response })\r\n\r\n        if(params?.setToken) coockie.set('PR_TOKEN', response.token)\r\n        if(params?.redirectURL) redirect(params.redirectURL)\r\n      } catch(error) {\r\n        userContext!.updateUserState!(prev => ({...prev, isAuthPending: false, isLoading: false, error: error instanceof Error ? { code: 503, message: 'Service Unavailable!' } : JSON.parse(error as string) }))\r\n      }\r\n    },\r\n    out: function(): void {\r\n      userContext?.updateUserState({ isAuthPending: false, isLoading: false })\r\n    },\r\n    clearError: function(): void {\r\n      useEffect(() => {\r\n        userContext?.updateUserState(prev => ({...prev, error: undefined }))\r\n      }, [isLogOpen, isRegOpen])\r\n    }\r\n  }\r\n}","import scss from './image.module.scss'\r\n\r\nimport type { ImageLoaderProps } from './image.type'\r\n\r\nexport default function ImageLoader({ className, style }: ImageLoaderProps) {\r\n  return <div style={style} className={`${scss.default_image_loader} ${className}`}></div>\r\n}","import scss from './image.module.scss'\r\n\r\nimport type { ImageComponentProps } from './image.type'\r\n\r\nimport { CircleUserRound } from 'lucide-react'\r\nimport { Fragment, useEffect, useRef, useState } from 'react'\r\n\r\nimport ImageLoader from './imageLoader'\r\n\r\nexport default function ImageComponent({ alt, classNames, src, styles }: ImageComponentProps) {\r\n  const [isLoaded, setIsLoaded] = useState<boolean>(false)\r\n\r\n  const imgSourceRef = useRef<string | undefined>('default')\r\n  const imgRef = useRef<HTMLImageElement>(null)\r\n\r\n  const isHTTPProtocol: boolean = (imgSourceRef.current?.search(/\\http(s)/) || -1) > -1\r\n  \r\n  useEffect(() => {\r\n    if(!imgRef.current) return\r\n      \r\n    imgRef.current.addEventListener('loadstart', () => {\r\n      setIsLoaded(false)\r\n    })\r\n\r\n    imgRef.current.addEventListener('load', (event) => {\r\n      const image = event.target as HTMLImageElement\r\n      imgSourceRef.current = src\r\n      setIsLoaded(image.complete)\r\n    }, { once: true })\r\n\r\n    imgRef.current.addEventListener('error', () => {\r\n      imgSourceRef.current = undefined\r\n      setIsLoaded(false)\r\n    }, { once: true })\r\n  }, [imgRef.current])\r\n\r\n  console.log(isHTTPProtocol, isLoaded, imgSourceRef)\r\n\r\n  return (\r\n    <Fragment>\r\n      {!isHTTPProtocol && !isLoaded ? <CircleUserRound className={`${classNames?.img} ${scss.default_image}`} size={40}/> : (!isLoaded && isHTTPProtocol) && <ImageLoader className={classNames?.loader} style={styles?.loader}/> }\r\n      <img ref={imgRef} src={src} alt={alt} className={classNames?.img} style={{...styles?.img, display: (isHTTPProtocol ? imgSourceRef.current : undefined || isLoaded) ? 'block' : 'none' }}/>\r\n    </Fragment>\r\n  )\r\n}","import { AuthContext } from \"@/custom-hook/useAuth/authProvider\";\r\nimport { useContext } from \"react\";\r\n\r\nimport type { UserRoles } from \"@/global.type\";\r\n\r\nexport default function useHavePermission() {\r\n  const auth = useContext(AuthContext)\r\n\r\n  let checkArray: number[] = []\r\n\r\n  return {\r\n    isHaveRole: function(mustHaveRoles: UserRoles[]) {\r\n      if(mustHaveRoles.includes(auth?.userState.user?.role || 'User')) return this\r\n      checkArray.push(1)\r\n      return this\r\n    },\r\n    isIDEqual: function(id?: string) {\r\n      if(auth?.userState.user?._id === id) return this\r\n      checkArray.push(1)\r\n      return this\r\n    },\r\n    isHaveRoleAndIsIDEqual: function(mustHaveRoles: UserRoles[], id?: string) {\r\n      if(auth?.userState.user?._id === id && mustHaveRoles.includes(auth?.userState.user?.role || 'User')) return this\r\n      checkArray.push(1)\r\n      return this\r\n    },\r\n    isHaveRoleOrIsIDEqual: function(mustHaveRoles: UserRoles[], id?: string) {\r\n      if(auth?.userState.user?._id === id || mustHaveRoles.includes(auth?.userState.user?.role || 'User')) return this\r\n      checkArray.push(1)\r\n      return this\r\n    },\r\n    result: function() {\r\n      const havePermission = checkArray.length <= 0\r\n      checkArray = []\r\n      return havePermission\r\n    }\r\n  }\r\n}","import scss from './postContainerLoader.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nexport default function PostContainerLoader() {\r\n  return(\r\n    <div className={`${scss.post_loader_container} main-content-container flex-column-normal-normal-medium`}>\r\n      <div className='flex-row-normal-normal-medium'>\r\n        <div className={scss.post_loader_avatar}></div>\r\n        <div className='flex-column-normal-normal-medium'>\r\n          <div style={{ width: '4rem' }} className={scss.post_loader_text}></div>\r\n          <div style={{ width: '7rem' }} className={scss.post_loader_text}></div>\r\n        </div>\r\n      </div>\r\n      <div style={{ width: '11rem' }} className={scss.post_loader_text}></div>\r\n      <div className='flex-column-normal-normal-medium'>\r\n        <div style={{ width: '50%' }} className={scss.post_loader_text}></div>\r\n        <div style={{ width: '20%' }} className={scss.post_loader_text}></div>\r\n      </div>\r\n      <div  className='flex-row-normal-space-between-none'>\r\n        <div className='flex-row-normal-normal-medium'>\r\n          <div className={scss.post_loader_tag}></div>\r\n          <div className={scss.post_loader_tag}></div>\r\n          <div className={scss.post_loader_tag}></div>\r\n        </div>\r\n        <div className='flex-row-normal-normal-medium'>\r\n          <div className={scss.post_loader_tag}></div>\r\n          <div className={scss.post_loader_tag}></div>\r\n          <div className={scss.post_loader_tag}></div>          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import '@/scss/global.scss'\r\n\r\nimport PostContainerLoader from \"@/component/loader/post-container-loader/postContainerLoader\";\r\n\r\nimport type { LoaderProps } from './page.type';\r\n\r\nexport default function Loader({ containersCount }: LoaderProps) {\r\n  return <div className='flex-column-normal-normal-small'>{[...Array(containersCount || 3)].map((_, index) => <PostContainerLoader key={index}/>)}</div>\r\n}","import scss from './error.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport type { ErrorProps } from './error.type'\r\n\r\nexport default function Error({ code, message, underText }: ErrorProps) {\r\n  return(\r\n    <div className={`${scss.error_container} flex-row-center-center-none`}>\r\n      <div className={scss.error_body}>\r\n        <div className={`${scss.error_error} flex-column-normal-normal-none`}>\r\n          <p>Error - {code}!</p>\r\n          <p>{message}</p>\r\n        </div>\r\n        {underText ? <p>{underText}</p> : null}\r\n      </div>\r\n    </div>\r\n  )\r\n}","import scss from '../scss/postHeader.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport { PostHeaderProps } from '../postContainer.type'\r\n\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom'\r\nimport { Eye, EyeOff, Pencil, Trash2, UserX } from 'lucide-react'\r\n\r\nimport useHavePermission from '@/custom-hook/use-have-permission/useHavePermission'\r\nimport useRequest from '@/custom-hook/_use-request/_useRequest'\r\nimport useSearchParams from '@/custom-hook/use-search-params/useSearchParams'\r\n\r\nimport DateParser from '@/lib/date-parser/dateParser'\r\nimport fetcher from '@/lib/fetcher/fetcher'\r\nimport coockie from '@/lib/coockie/coockie'\r\n\r\nimport type { Content } from '@/global.type'\r\nimport type { PostCommentsData } from '@/page/post/page.type'\r\n\r\nimport firstLetterToUpperCase from '@/lib/first-letter-to-upper/firstLetterToUpper'\r\nimport localStorage from '@/lib/local-storage/localStorage'\r\n\r\nimport ImageComponent from '@/component/image-component/image'\r\n\r\nexport default function PostHeader({ user, createdAt, type, contentID, postID, content, tags, title, isHidden }: PostHeaderProps) {\r\n  const permission = useHavePermission()\r\n  const { mutate, changeError } = useRequest({ deps: [] })\r\n  const searchParams = useSearchParams()\r\n  const redirect = useNavigate()\r\n  const { pathname } = useLocation()\r\n  \r\n  const isAdminOrCreator: boolean = permission.isHaveRoleOrIsIDEqual(['Admin', 'Creator'], user?._id)?.result()\r\n  const isPostPage: boolean = pathname.search('/post/') > -1\r\n  const isHomePage: boolean = pathname.search('/') > -1\r\n  const isSearchPage: boolean = pathname.search('/search') > -1\r\n\r\n  const typeForAPI = type === 'preview' ? 'post' : type\r\n  const page: number = parseInt(searchParams.get('page') || '0')\r\n\r\n  const contentAction = (action: 'hidde' | 'show' | 'remove' | 'edit'): void => {\r\n    const key: string[] = \r\n      isPostPage && type === 'comment' ? \r\n        [`post-${postID}-comments-${searchParams.get('page') || 0}`] :\r\n      isHomePage ? ['all-posts'] :\r\n        []\r\n\r\n    //User have no permmissin\r\n    if(!permission.isHaveRole(['Creator', 'Admin']).result()) {\r\n      return changeError(key, { code: 403, message: 'You have no edit and remove permission!' })\r\n    }\r\n\r\n    if(action === 'edit') {\r\n      if(permission.isHaveRole(['Creator']).result()) {\r\n        localStorage.set(contentID, { content, tags, title, contentType: typeForAPI, onPage: page, onPost: postID })\r\n        return redirect(`/write-post?is-edit=true&content-id=${contentID}`)\r\n      } \r\n\r\n      if(permission.isHaveRole(['Admin']).result()) {\r\n        return redirect(`/admin/${typeForAPI}?id=${contentID}&${typeForAPI}-edit-modal=true`)\r\n      }\r\n    }\r\n\r\n    mutate<Content[] | PostCommentsData>({\r\n      key,\r\n      request: async (option) => {\r\n        //Remove item handlers\r\n        if(action === 'remove') {\r\n          const removedItem = await fetcher.get<Content>(`/admin/remove/${firstLetterToUpperCase(typeForAPI)}/${contentID}`, { 'Authorization': `Bearer ${coockie.getOne('PR_TOKEN')}` })\r\n          \r\n          //Remove some comment from post page\r\n          if(isPostPage && type === 'comment') {\r\n            const state = option.state as PostCommentsData || { comments: [], pagesCount: 0 }\r\n\r\n            if(state.comments.length === 1 && state.pagesCount >= 1) {\r\n              for(let index: number = state.pagesCount - 1; index >= 0; index--) if(index !== page) option.removeCache(`post-${postID}-comments-${index}`)\r\n              redirect(`/post/${postID}?page=${+page - 1}`)\r\n              return { pagesCount: 0, comments: [] }            \r\n            }\r\n            return {...state, comments: state.comments!.filter(content => content._id !== removedItem._id) }\r\n          } \r\n          \r\n          //Remove some post from home page\r\n          if(isHomePage) {\r\n            const state = option.state as Content[] || []\r\n            return state.filter(content => content._id !== removedItem._id)\r\n          }\r\n        }\r\n\r\n        //Hidde item handlers\r\n        const hiddenItem = await fetcher.post<Content>(`/admin/${typeForAPI}/update`, { id: contentID, isHidden: action === 'hidde' }, { 'Authorization': `Bearer ${coockie.getOne('PR_TOKEN')}` })\r\n        \r\n        //Hidde some comment from post page\r\n        if(isPostPage) {\r\n          const state = option.state as PostCommentsData || { pagesCount: 0, comments: [] }\r\n          return {...state, comments: state.comments!.map(content => content._id === hiddenItem._id ? {...content, ...hiddenItem } : content) }\r\n        }\r\n\r\n        //Hidde post from home page\r\n        const state = option.state as Content[] || []\r\n        return state.map(content => content._id === hiddenItem._id ? hiddenItem : content)\r\n      }\r\n    })\r\n  }\r\n\r\n  return(\r\n    <div className={`${scss.post_header} flex-row-center-space-between-none`}>\r\n      {user ? \r\n      <div className='flex-row-normal-normal-medium'>\r\n         <ImageComponent src={user?.avatar} alt={user?.name || 'User avatar'}/>\r\n         <div className={scss.post_author}>\r\n           <Link to={`/user/${user?._id}`}>{user?.name}</Link>\r\n           <p className={scss.post_create_date}>{DateParser.getDifference(createdAt)}</p>  \r\n        </div>\r\n      </div> :\r\n      <div className={`${scss.post_header_author_not_defined} flex-row-center-normal-medium`}>\r\n        <UserX/>\r\n        <p>Author is possibly deleted!</p>\r\n      </div>}\r\n      {(isAdminOrCreator && !isSearchPage) ?\r\n      <button className={scss.post_action_button}>\r\n        <svg viewBox=\"0 0 128 512\"><path d=\"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z\"/></svg>\r\n        <ul className={`${scss.post_action_container} flex-column-normal-normal-none`}>\r\n          <li onClick={() => contentAction('remove')} className='flex-row-center-normal-medium'><Trash2 /><p>Remove</p></li>\r\n          <li onClick={() => contentAction('edit')} className='flex-row-center-normal-medium'><Pencil /><p>Edit</p></li>\r\n          <li onClick={() => contentAction(isHidden ? 'show' : 'hidde')} className='flex-row-center-normal-medium'>{isHidden ? <Eye /> : <EyeOff />}<p>{isHidden ? 'Show' : 'Hidden'}</p></li>\r\n        </ul>\r\n      </button> : null}\r\n    </div>\r\n  )\r\n}","import scss from '../scss/postWrapper.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport type { PropsWithChildren } from \"react\"\r\nimport type { PostWrapperProps } from '../postContainer.type'\r\n\r\nimport { EyeOff } from 'lucide-react'\r\n\r\nexport default function PostWrapper({ children, className }: PropsWithChildren<PostWrapperProps>) {\r\n  return (\r\n    <section className={`${scss.post_wrapper_container} ${className} main-content-container`}>\r\n      {className ? \r\n       <div className={`${scss.post_is_hidden} flex-row-center-center-medium`}>\r\n         <EyeOff/>\r\n         <p>Hidden</p>\r\n       </div> : null}\r\n      <div style={{ padding: '1rem' }}>{children}</div>\r\n    </section>\r\n  )\r\n}","import scss from '../scss/postTags.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport type { PostTagsProps } from '../postContainer.type'\r\n\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function PostTags({ tags }: PostTagsProps) {\r\n  return <div className={`${scss.post_tags} flex-row-normal-normal-medium`}>{tags.map(tag => tag.trim() ? <Link to={`/search?tag=${tag}`} key={tag}>{tag}</Link> : null)}</div>\r\n}","import scss from './postContainer.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport PostHeader from \"./component/postHeader\";\r\nimport PostWrapper from \"./component/postWrapper\";\r\nimport PostTags from './component/postTags';\r\nimport ContentViewer from '../content-viewer/contentViewer';\r\n\r\nimport type { Content } from '@/global.type';\r\nimport type { PostCommentsData } from '@/page/post/page.type';\r\nimport type { PostContainerProps } from \"./postContainer.type\";\r\n\r\nimport { Link, useLocation, useNavigate, useParams } from \"react-router-dom\";\r\nimport { Fragment } from 'react/jsx-runtime';\r\nimport { Eye, Heart, MessageCircle } from 'lucide-react';\r\n\r\nimport DateParser from '@/lib/date-parser/dateParser';\r\n\r\nimport useAuth from '@/custom-hook/useAuth/useAuth';\r\nimport useRequest from '@/custom-hook/_use-request/_useRequest';\r\nimport useSearchParams from '@/custom-hook/use-search-params/useSearchParams';\r\nimport useHavePermission from '@/custom-hook/use-have-permission/useHavePermission';\r\n\r\nimport fetcher from '@/lib/fetcher/fetcher';\r\nimport coockie from '@/lib/coockie/coockie';\r\n\r\nexport default function PostContainer({ post, type }: PostContainerProps) {\r\n  const { id } = useParams()\r\n  const { pathname } = useLocation()\r\n  const auth = useAuth()\r\n  const searchParams = useSearchParams()\r\n  const permission = useHavePermission()\r\n  const redirect = useNavigate()\r\n\r\n  const { mutate } = useRequest({ deps: [] })\r\n\r\n  const isPostPage: boolean = pathname.search('/post') > -1\r\n  const isHomePage: boolean = pathname === '/'\r\n  const isLiked: boolean = post.likedBy.includes(auth.user?._id || '')\r\n  \r\n  const isContentCreator: boolean = permission.isHaveRoleAndIsIDEqual(['Creator'], post?.author?._id).result()\r\n  const isAdmin: boolean = permission.isHaveRole(['Admin']).result()\r\n  const isHidden: boolean = post.isHidden\r\n  \r\n  const postID: string = (type === 'preview' || type === 'post') ? post._id : id!\r\n  const currPage: number = (type === 'comment') ? parseInt(searchParams.get('page') || '0') : 0\r\n  const hiddenClass: string = ((isHidden && isAdmin) || (isContentCreator && isHidden)) ? scss.post_hidden : ''\r\n\r\n  if(isHidden && isPostPage && !isAdmin && !isContentCreator && type === 'post') redirect('/')\r\n\r\n  const showSomeData = (showThe: string): void => {\r\n    searchParams.set({ 'type': showThe, 'post-id': post._id, 'list-page': 0 })\r\n  }\r\n\r\n  const likeThisPost = async (): Promise<void> => {\r\n    if(post.isHidden && !auth.user) return\r\n\r\n    const key: string[] = type === 'post' ? [`post-${post._id}`] : [`post-${postID}-comments-${currPage}`]\r\n\r\n    mutate<Content | PostCommentsData>({\r\n      key,\r\n      request: async (option) => {\r\n        const likedContent = await fetcher.get<Content>(`/${type}/${post._id}/like`, { 'Authorization': `Bearer ${coockie.getOne('PR_TOKEN')}` })\r\n\r\n        //Update post\r\n        if(type === 'post') return likedContent\r\n\r\n        //Update comment\r\n        const state = option.state as PostCommentsData\r\n        const comments = state.comments || []\r\n\r\n        return {...state, comments: comments.map(comment => comment._id === likedContent._id ? likedContent : comment) }\r\n      }\r\n    })\r\n  }\r\n\r\n  return(\r\n    <Fragment>\r\n      {isHomePage && !isContentCreator && !isAdmin && isHidden ? null :\r\n        <PostWrapper className={hiddenClass}>\r\n          {(type === 'comment' || type === 'preview') ? <PostHeader tags={post.tags || []} title={post.title || ''} content={post.content} isHidden={post.isHidden} postID={postID} contentID={post._id} type={type} createdAt={post.createdAt} user={post?.author}/> : null}\r\n          {type === 'post' ? \r\n            <div className={scss.post_content_container}>\r\n              <h4>{post.title}</h4>\r\n              <p className={scss.post_content_date}>{DateParser.getDifference(post.createdAt)}</p>\r\n              <ContentViewer className={scss.post_short_view} content={post.content}/>\r\n            </div> : null}\r\n          {type === 'preview' ? \r\n            <div className={scss.post_content_container}>\r\n              <Link to={`/post/${post._id}`}>{post.title}</Link>\r\n              <ContentViewer className={scss.post_short_view} content={post.content}/>\r\n            </div> : null}\r\n          {type === 'comment' ? <div className={scss.post_data}><ContentViewer content={post.content}/></div> : null}\r\n            <div className='flex-row-center-space-between-none'>\r\n              {((type === 'post' || type === 'preview') && post.tags) ? <PostTags tags={post.tags}/> : null}\r\n                <div className='flex-row-center-normal-big'>\r\n              {type === 'preview' ? \r\n                <Fragment>\r\n                  <p className={`${scss.post_statistic_data} flex-row-center-normal-small`} onClick={isHomePage ? () => showSomeData('views') : undefined} ><Eye />{post.viewedBy?.length}</p>\r\n                  <p className={`${scss.post_statistic_data} flex-row-center-normal-small`} onClick={isHomePage ? () => showSomeData('comments') : undefined}><MessageCircle />{post.comments?.length}</p>\r\n                  <p className={`${scss.post_statistic_data} flex-row-center-normal-small`} onClick={isHomePage ? () => showSomeData('likes') : undefined}><Heart />{post.likedBy?.length}</p>\r\n                </Fragment> : null}\r\n              {(type === 'comment' || type === 'post') && auth.user ? <button onClick={likeThisPost} className={`${isLiked ? scss.post_liked : ''} ${scss.post_statistic_data} flex-row-center-normal-small`}><Heart/>{post.likedBy.length}</button> : null}\r\n            </div>\r\n          </div>\r\n        </PostWrapper>}\r\n    </Fragment>\r\n  )\r\n}","import scss from './button.module.scss'\r\n\r\nimport type { ButtonProps } from \"./button.type\";\r\n\r\nexport default function Button({ label, className, onClick, type, isDisable }: ButtonProps) {\r\n  return(\r\n    <button type={type || 'button'} style={{ width: `${label.length * 13}px` }} disabled={isDisable} className={`${scss.button} ${className}`} onClick={onClick}>\r\n      <section className={scss.button_label}>{label}</section>\r\n    </button>\r\n  )\r\n}","import scss from '../scss/paginationListLoader.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nexport default function PaginationListLoader() {\r\n  return(\r\n    <div className='flex-row-normal-space-between-medium'>\r\n      <div className={scss.pagintion_list_button}></div>\r\n      <div className='flex-row-normal-normal-small'>\r\n        <div className={scss.pagintion_list_button}></div>\r\n        <div className={scss.pagintion_list_button}></div>\r\n        <div className={scss.pagintion_list_button}></div>\r\n      </div>\r\n      <div className={scss.pagintion_list_button}></div>\r\n    </div>\r\n  )\r\n}","import scss from '../scss/statisticPreviewLoader.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nexport default function StatisticPreviewLoader() {\r\n  return(\r\n    <div style={{ paddingTop: '1rem' }} className='flex-column-normal-normal-medium'>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n    </div>\r\n  )\r\n}","import scss from '../scss/statisticPreview.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport Empty from '@/component/empty/empty'\r\nimport PaginationList from \"@/component/pagination-list/paginationList\"\r\nimport PaginationListLoader from '@/component/pagination-list/component/paginationListLoader'\r\nimport StatisticPreviewLoader from './statisticPreviewLoader'\r\nimport ImageComponent from '@/component/image-component/image'\r\n\r\nimport { Link } from \"react-router-dom\"\r\nimport { X } from 'lucide-react'\r\n\r\nimport type { User } from \"@/global.type\"\r\nimport type { StatisticPreviewProps } from '../page.type'\r\n\r\nimport fetcher from \"@/lib/fetcher/fetcher\"\r\nimport firstLetterToUpperCase from \"@/lib/first-letter-to-upper/firstLetterToUpper\"\r\n\r\nimport useRequest from '@/custom-hook/_use-request/_useRequest'\r\nimport useSearchParams from '@/custom-hook/use-search-params/useSearchParams'\r\n\r\nexport default function StatisticPreview({ type }: StatisticPreviewProps) {\r\n  const searchParams = useSearchParams()\r\n\r\n  const postID: string = searchParams.get('post-id')!\r\n  const currPage: number = parseInt(searchParams.get('list-page') || '0')\r\n\r\n  const { data, prev, isPending } = useRequest<{ pagesCount: number, items: ({ count: number } & User)[] }>({ \r\n    deps: [`preview-${type}-${postID}-${currPage}`], \r\n    prev: [`preview-${type}-${postID}-${currPage - 1 < 0 ? 0 : currPage - 1}`], \r\n    request: async () => fetcher.get(`/post/preview/${type}/${postID}/${currPage}`),\r\n  })\r\n\r\n  const paginationLength: number = (prev?.pagesCount || data?.pagesCount) || 0\r\n\r\n  const closePreviewStatistic = (): void => {\r\n    searchParams.remove(['type', 'post-id', 'list-page'])\r\n  }\r\n\r\n  return(\r\n    <section className={`${scss.preview_container} main-content-container`}>\r\n      <div className={`${scss.preview_header} flex-row-center-space-between-none`}>\r\n        <h4 className={scss.preview_type}>{firstLetterToUpperCase(type || '')}</h4>\r\n        <X onClick={closePreviewStatistic}/>\r\n      </div>\r\n      {isPending ? <PaginationListLoader/> : paginationLength > 1 ? <PaginationList pagesCount={paginationLength}/> : null}\r\n      {isPending ? <StatisticPreviewLoader/> :\r\n      <div style={{ paddingTop: paginationLength > 1 ? '0.5rem' : '0rem' }} className={scss.preview_item_count_list}>\r\n        {data?.items?.length === 0 ? <Empty label='Nothing found!'/> :\r\n        data?.items?.map(item => (\r\n          <Link to={`/user/${item._id}`} className='flex-row-center-space-between-none' key={Math.random() * 200}>\r\n            <div className='flex-row-center-normal-medium'>\r\n              <ImageComponent src={item.avatar} alt={item.name}/>\r\n              <p>{item.name}</p>\r\n            </div>\r\n            <p className={scss.preview_item_count}>{item.count}</p>\r\n          </Link>\r\n        ))}\r\n      </div>}\r\n    </section>\r\n  )\r\n}","import '@/scss/global.scss'\r\n\r\nimport PostContainer from \"@/component/post-container/postContainer\"\r\nimport Error from \"@/component/error/error\"\r\nimport Empty from \"@/component/empty/empty\"\r\nimport Button from '@/component/button/button'\r\nimport StatisticPreview from './component/statisticPreview'\r\nimport MutatingLoader from '@/component/loader/mutatig-loader/mutatingLoader'\r\nimport Loader from './loader'\r\n\r\nimport fetcher from \"@/lib/fetcher/fetcher\"\r\nimport coockie from '@/lib/coockie/coockie'\r\n\r\nimport type { Content } from \"@/global.type\"\r\n\r\nimport { Fragment } from 'react'\r\n\r\nimport useSearchParams from '@/custom-hook/use-search-params/useSearchParams'\r\nimport useRequest from '@/custom-hook/_use-request/_useRequest'\r\n\r\nexport default function Page() {\r\n  const searchParams = useSearchParams()\r\n  const { isFetching, isMutating, data, error, mutate } = useRequest({ \r\n    deps: ['all-posts'], \r\n    request: async () => await fetcher.get<Content[]>(`/home/${postsCount}`, { 'Authorization': `Bearer ${coockie.getOne('PR_TOKEN')}` }) \r\n  })\r\n\r\n  const contentPerLoad: number = 10\r\n  const postsCount: number = parseInt(searchParams.get('posts-count') || String(contentPerLoad))\r\n  const postStatisticPreviewType = searchParams.get('type')!\r\n\r\n  const loadMorePosts = async (): Promise<void> => {\r\n    searchParams.set({ 'posts-count': postsCount + contentPerLoad })\r\n    await mutate({ key: ['all-posts'], request: async () => await fetcher.get<Content[]>(`/home/${postsCount + contentPerLoad}`) })\r\n    if(!isFetching && !isMutating) setTimeout(() => window.scrollTo({ behavior: 'smooth', top: document.body.scrollHeight }), 100)\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {isMutating ? <MutatingLoader/> : null}\r\n      <div style={{ height: '100%', marginRight: postStatisticPreviewType ? '17rem' : '0rem' }} className='flex-row-normal-normal-medium'>\r\n        <div style={{ flexGrow: 1 }} className='flex-column-normal-normal-small'>\r\n          {isFetching ? <Loader/> : \r\n          error ? <Error underText='Go back or reload the page!' code={error.code} message={error.message}/> :\r\n          data && data.length === 0 ? <Empty option={{ flexCenterCenter: true }} label=\"No post would founded!\"/> : \r\n          data && \r\n          <Fragment>\r\n            {data.map(post => <PostContainer key={post._id} post={post} type=\"preview\"/>)}\r\n            {data.length % contentPerLoad === 0 ? <div className='flex-row-center-center-none'><Button onClick={loadMorePosts} label='Load More'/></div> : null}\r\n          </Fragment>}\r\n        </div>\r\n        {postStatisticPreviewType ? <StatisticPreview type={postStatisticPreviewType}/> : null}\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}"],"names":["localStorage$1","get","key","or","JSON","parse","localStorage","getItem","set","value","setItem","stringify","remove","removeItem","AuthContext","createContext","AuthProvider","children","userState","updateUserState","useState","isAuthPending","isLoading","useEffect","async","user","response","fetcher","Authorization","coockie","getOne","isSuccess","Object","hasOwn","error","isAuth","jsx","Provider","useAuth","redirect","useNavigate","userContext","useContext","searchParams","useSearchParams","isLogOpen","isRegOpen","create","params","setSession","post","apiURL","body","setToken","token","redirectURL","prev","Error","code","message","out","clearError","ImageLoader","className","style","scss","default_image_loader","ImageComponent","alt","classNames","src","styles","isLoaded","setIsLoaded","imgSourceRef","useRef","imgRef","isHTTPProtocol","current","search","addEventListener","event","image","target","complete","once","Fragment","loader","CircleUserRound","img","default_image","size","ref","display","useHavePermission","auth","checkArray","isHaveRole","mustHaveRoles","includes","role","push","this","isIDEqual","id","_id","isHaveRoleAndIsIDEqual","isHaveRoleOrIsIDEqual","result","havePermission","length","PostContainerLoader","post_loader_container","jsxs","post_loader_avatar","width","post_loader_text","post_loader_tag","Loader","containersCount","Array","map","_","index","underText","error_container","error_body","error_error","PostHeader","createdAt","type","contentID","postID","content","tags","title","isHidden","permission","mutate","changeError","useRequest","deps","pathname","useLocation","isAdminOrCreator","isPostPage","isHomePage","isSearchPage","typeForAPI","page","parseInt","contentAction","action","contentType","onPage","onPost","request","option","removedItem","firstLetterToUpperCase","state","comments","pagesCount","removeCache","filter","hiddenItem","post_header","avatar","name","post_author","Link","to","post_create_date","DateParser","getDifference","post_header_author_not_defined","UserX","post_action_button","viewBox","d","post_action_container","onClick","Trash2","Pencil","Eye","EyeOff","PostWrapper","post_wrapper_container","post_is_hidden","padding","PostTags","post_tags","tag","trim","PostContainer","useParams","isLiked","likedBy","isContentCreator","author","isAdmin","currPage","hiddenClass","post_hidden","showSomeData","showThe","post_content_container","post_content_date","ContentViewer","post_short_view","post_data","post_statistic_data","viewedBy","MessageCircle","Heart","likedContent","comment","post_liked","Button","label","isDisable","disabled","button","button_label","PaginationListLoader","pagintion_list_button","StatisticPreviewLoader","paddingTop","preview_loader","StatisticPreview","data","isPending","paginationLength","preview_container","preview_header","preview_type","X","PaginationList","preview_item_count_list","items","Empty","item","preview_item_count","count","Math","random","isFetching","isMutating","postsCount","String","postStatisticPreviewType","MutatingLoader","height","marginRight","flexGrow","flexCenterCenter","setTimeout","window","scrollTo","behavior","top","document","scrollHeight"],"mappings":"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"}