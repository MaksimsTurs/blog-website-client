{"version":3,"file":"home.js","sources":["../../../../src/custom-hook/useAuth/useAuth.ts","../../../../src/component/image-component/imageLoader.tsx","../../../../src/component/image-component/image.tsx","../../../../src/component/loader/post-container-loader/postContainerLoader.tsx","../../../../src/custom-hook/use-metadata/useMetadata.ts","../../../../src/page/home/loader.tsx","../../../../src/component/error/error.tsx","../../../../src/component/post-container/component/postHeader.tsx","../../../../src/component/post-container/component/postWrapper.tsx","../../../../src/component/post-container/component/postTags.tsx","../../../../src/component/post-container/postContainer.tsx","../../../../src/component/button/button.tsx","../../../../src/component/pagination-list/component/paginationListLoader.tsx","../../../../src/page/home/component/statisticPreviewLoader.tsx","../../../../src/page/home/component/statisticPreview.tsx","../../../../src/page/home/page.tsx"],"sourcesContent":["import { useContext, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"./authProvider\";\r\n\r\nimport fetcher from \"@/lib/fetcher/fetcher\";\r\nimport coockie from \"@/lib/coockie/coockie\";\r\n\r\nimport type { CreateParams, UserSessionData } from \"./useAuth.type\";\r\n\r\nimport useSearchParams from \"../use-search-params/useSearchParams\";\r\n\r\nexport default function useAuth() {\r\n  const redirect = useNavigate()\r\n  const userContext = useContext(AuthContext)\r\n  const searchParams = useSearchParams()\r\n\r\n  const isLogOpen: string | null = searchParams.get('login-modal')\r\n  const isRegOpen: string | null = searchParams.get('registration-modal')\r\n\r\n  return {\r\n    ...userContext?.userState,\r\n    create: async function(params: CreateParams): Promise<void> {\r\n      try {\r\n        if(params.setSession) return userContext?.updateUserState({ user: params.setSession, isAuthPending: false, isLoading: false })\r\n          \r\n        userContext?.updateUserState({ isAuthPending: false, isLoading: true })\r\n        \r\n        const response = await fetcher.post<UserSessionData>(params.apiURL!, params.body)\r\n        \r\n        userContext?.updateUserState({ isAuthPending: false, isLoading: false, error: undefined, user: response })\r\n\r\n        if(params?.setToken) coockie.set('PR_TOKEN', response.token)\r\n        if(params?.redirectURL) redirect(params.redirectURL)\r\n      } catch(error) {\r\n        userContext!.updateUserState!(prev => ({...prev, isAuthPending: false, isLoading: false, error: error instanceof Error ? { code: 503, message: 'Service Unavailable!' } : JSON.parse(error as string) }))\r\n      }\r\n    },\r\n    out: function(): void {\r\n      userContext?.updateUserState({ isAuthPending: false, isLoading: false })\r\n      coockie.set('PR_TOKEN', 'undefined')\r\n    },\r\n    clearError: function(): void {\r\n      useEffect(() => {\r\n        userContext?.updateUserState(prev => ({...prev, error: undefined }))\r\n      }, [isLogOpen, isRegOpen])\r\n    }\r\n  }\r\n}","import scss from './image.module.scss'\r\n\r\nimport type { ImageLoaderProps } from './image.type'\r\n\r\nexport default function ImageLoader({ className, style }: ImageLoaderProps) {\r\n  return <div style={style} className={`${scss.default_image_loader} ${className}`}></div>\r\n}","import scss from './image.module.scss'\r\n\r\nimport type { ImageComponentProps } from './image.type'\r\n\r\nimport { CircleUserRound } from 'lucide-react'\r\nimport { Fragment, useEffect, useRef, useState } from 'react'\r\n\r\nimport ImageLoader from './imageLoader'\r\n\r\nexport default function ImageComponent({ alt, classNames, src, styles }: ImageComponentProps) {\r\n  const [isLoaded, setIsLoaded] = useState<boolean>(false)\r\n\r\n  const imgSourceRef = useRef<string | undefined>('default')\r\n  const imgRef = useRef<HTMLImageElement>(null)\r\n\r\n  const isHTTPProtocol: boolean = (imgSourceRef.current?.search(/\\http(s)/) || -1) > -1\r\n  \r\n  useEffect(() => {\r\n    if(!imgRef.current) return\r\n      \r\n    imgRef.current.addEventListener('loadstart', () => {\r\n      setIsLoaded(false)\r\n    })\r\n\r\n    imgRef.current.addEventListener('load', (event) => {\r\n      const image = event.target as HTMLImageElement\r\n      imgSourceRef.current = src\r\n      setIsLoaded(image.complete)\r\n    }, { once: true })\r\n\r\n    imgRef.current.addEventListener('error', () => {\r\n      imgSourceRef.current = undefined\r\n      setIsLoaded(false)\r\n    }, { once: true })\r\n  }, [imgRef.current])\r\n\r\n  return (\r\n    <Fragment>\r\n      {!isHTTPProtocol && !isLoaded ? <CircleUserRound className={`${classNames?.img} ${scss.default_image}`} size={40}/> : (!isLoaded && isHTTPProtocol) && <ImageLoader className={classNames?.loader} style={styles?.loader}/> }\r\n      <img ref={imgRef} src={src} alt={alt} className={classNames?.img} style={{...styles?.img, display: (isHTTPProtocol && imgSourceRef.current || isLoaded) ? 'block' : 'none' }}/>\r\n    </Fragment>\r\n  )\r\n}","import scss from './postContainerLoader.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nexport default function PostContainerLoader() {\r\n  return(\r\n    <div className={`${scss.post_loader_container} main-content-container flex-column-normal-normal-medium`}>\r\n      <div className='flex-row-normal-normal-medium'>\r\n        <div className={scss.post_loader_avatar}></div>\r\n        <div className='flex-column-normal-normal-medium'>\r\n          <div style={{ width: '4rem' }} className={scss.post_loader_text}></div>\r\n          <div style={{ width: '7rem' }} className={scss.post_loader_text}></div>\r\n        </div>\r\n      </div>\r\n      <div style={{ width: '11rem' }} className={scss.post_loader_text}></div>\r\n      <div className='flex-column-normal-normal-medium'>\r\n        <div style={{ width: '50%' }} className={scss.post_loader_text}></div>\r\n        <div style={{ width: '20%' }} className={scss.post_loader_text}></div>\r\n      </div>\r\n      <div  className='flex-row-normal-space-between-none'>\r\n        <div className='flex-row-normal-normal-medium'>\r\n          <div className={scss.post_loader_tag}></div>\r\n          <div className={scss.post_loader_tag}></div>\r\n          <div className={scss.post_loader_tag}></div>\r\n        </div>\r\n        <div className='flex-row-normal-normal-medium'>\r\n          <div className={scss.post_loader_tag}></div>\r\n          <div className={scss.post_loader_tag}></div>\r\n          <div className={scss.post_loader_tag}></div>          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { useEffect } from \"react\"\r\n\r\nimport type { Metadata } from \"./useMetadata.type\"\r\n\r\nexport default function useMetadata(metadata: Metadata): void {\r\n  useEffect(() => {\r\n    if(metadata.title) document.title = metadata.title\r\n  }, [metadata])\r\n\r\n  useEffect(() => {\r\n    delete metadata.title\r\n\r\n    const metaEntries: [string, string][] = Object.entries(metadata)\r\n  \r\n    for(let [key, value] of metaEntries) {\r\n      const metadataEl: HTMLMetaElement = document.createElement('meta')\r\n      \r\n      metadataEl.name = key\r\n      metadataEl.content = value\r\n  \r\n      document.head.appendChild(metadataEl)\r\n    }\r\n  }, [])\r\n}","import '@/scss/global.scss'\r\n\r\nimport PostContainerLoader from \"@/component/loader/post-container-loader/postContainerLoader\";\r\n\r\nimport type { LoaderProps } from './page.type';\r\n\r\nimport useMetadata from '@/custom-hook/use-metadata/useMetadata';\r\n\r\nexport default function Loader({ containersCount }: LoaderProps) {\r\n  useMetadata({ title: 'Home', description: 'Hier kannst du alle letzt geschriebene posts ansehen.' })\r\n  return <div className='flex-column-normal-normal-small'>{[...Array(containersCount || 3)].map((_, index) => <PostContainerLoader key={index}/>)}</div>\r\n}","import scss from './error.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport type { ErrorProps } from './error.type'\r\n\r\nexport default function Error({ code, message, underText }: ErrorProps) {\r\n  return(\r\n    <div className={`${scss.error_container} flex-row-center-center-none`}>\r\n      <div className={scss.error_body}>\r\n        <div className={`${scss.error_error} flex-column-normal-normal-none`}>\r\n          <p>Error - {code}!</p>\r\n          <p>{message}</p>\r\n        </div>\r\n        {underText ? <p>{underText}</p> : null}\r\n      </div>\r\n    </div>\r\n  )\r\n}","import scss from '../scss/postHeader.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport { PostHeaderProps } from '../postContainer.type'\r\n\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom'\r\nimport { Eye, EyeOff, Pencil, Trash2, UserX } from 'lucide-react'\r\n\r\nimport useHavePermission from '@/custom-hook/use-permitor/useHavePermission'\r\nimport useRequest from '@/custom-hook/_use-request/_useRequest'\r\nimport useSearchParams from '@/custom-hook/use-search-params/useSearchParams'\r\n\r\nimport DateParser from '@/lib/date-parser/dateParser'\r\nimport fetcher from '@/lib/fetcher/fetcher'\r\nimport coockie from '@/lib/coockie/coockie'\r\nimport firstLetterToUpperCase from '@/lib/first-letter-to-upper/firstLetterToUpper'\r\nimport localStorage from '@/lib/local-storage/localStorage'\r\n\r\nimport type { Content } from '@/global.type'\r\nimport type { PostCommentsData } from '@/page/post/page.type'\r\n\r\nimport ImageComponent from '@/component/image-component/image'\r\n\r\nexport default function PostHeader({ user, createdAt, type, contentID, postID, content, tags, title, isHidden }: PostHeaderProps) {\r\n  const permission = useHavePermission()\r\n  const searchParams = useSearchParams()\r\n  const redirect = useNavigate()\r\n  const { mutate, changeError } = useRequest({ deps: [] })\r\n  const { pathname } = useLocation()\r\n  \r\n  const isAdminOrCreator: boolean = permission.roleAndEqual(['Admin', 'Creator'], '_id', user?._id).permited()\r\n\r\n  const isPostPage: boolean = pathname.search('/post/') > -1\r\n  const isHomePage: boolean = pathname.search('/') > -1\r\n  const isSearchPage: boolean = pathname.search('/search') > -1\r\n\r\n  const typeForAPI = type === 'preview' ? 'post' : type\r\n  const page: number = parseInt(searchParams.get('page') || '0')\r\n\r\n  const contentAction = (action: 'hidde' | 'show' | 'remove' | 'edit'): void => {\r\n    const key: string[] = \r\n      isPostPage && type === 'comment' ? \r\n        [`post-${postID}-comments-${searchParams.get('page') || 0}`] :\r\n      isHomePage ? ['all-posts'] :\r\n        []\r\n\r\n    //User have no permmissin\r\n    if(!permission.role(['Creator', 'Admin']).permited()) {\r\n      return changeError(key, { code: 403, message: 'You have no edit and remove permission!' })\r\n    }\r\n\r\n    if(action === 'edit') {\r\n      if(permission.role(['Creator']).permited()) {\r\n        localStorage.set(contentID, { content, tags, title, isHidden, contentType: typeForAPI, onPage: page, onPost: postID })\r\n        return redirect(`/write-post?is-edit=true&content-id=${contentID}`)\r\n      } \r\n\r\n      if(permission.role(['Admin']).permited()) {\r\n        return redirect(`/admin/${typeForAPI}?id=${contentID}&${typeForAPI}-edit-modal=true`)\r\n      }\r\n    }\r\n\r\n    mutate<Content[] | PostCommentsData>({\r\n      key,\r\n      request: async (option) => {\r\n        //Remove item handlers\r\n        if(action === 'remove') {\r\n          const removedItem = await fetcher.get<Content>(`/admin/remove/${firstLetterToUpperCase(typeForAPI)}/${contentID}`, { 'Authorization': `Bearer ${coockie.getOne('PR_TOKEN')}` })\r\n          \r\n          //Remove some comment from post page\r\n          if(isPostPage && type === 'comment') {\r\n            const state = option.state as PostCommentsData || { comments: [], pagesCount: 0 }\r\n\r\n            if(state.comments.length === 1 && state.pagesCount >= 1) {\r\n              for(let index: number = state.pagesCount - 1; index >= 0; index--) if(index !== page) option.removeCache(`post-${postID}-comments-${index}`)\r\n              redirect(`/post/${postID}?page=${+page - 1}`)\r\n              return { pagesCount: 0, comments: [] }            \r\n            }\r\n            return {...state, comments: state.comments!.filter(content => content._id !== removedItem._id) }\r\n          } \r\n          \r\n          //Remove some post from home page\r\n          if(isHomePage) {\r\n            const state = option.state as Content[] || []\r\n            return state.filter(content => content._id !== removedItem._id)\r\n          }\r\n        }\r\n\r\n        //Hidde item handlers\r\n        const hiddenItem = await fetcher.post<Content>(`/admin/${typeForAPI}/update`, { id: contentID, isHidden: action === 'hidde' }, { 'Authorization': `Bearer ${coockie.getOne('PR_TOKEN')}` })\r\n        \r\n        //Hidde some comment from post page\r\n        if(isPostPage) {\r\n          const state = option.state as PostCommentsData || { pagesCount: 0, comments: [] }\r\n          return {...state, comments: state.comments!.map(content => content._id === hiddenItem._id ? {...content, ...hiddenItem } : content) }\r\n        }\r\n\r\n        //Hidde post from home page\r\n        const state = option.state as Content[] || []\r\n        return state.map(content => content._id === hiddenItem._id ? hiddenItem : content)\r\n      }\r\n    })\r\n  }\r\n\r\n  const createdAtDifference: string = DateParser\r\n    .getDifference(createdAt)\r\n    .getSortDate({\r\n      year: '[year] year [month] months ago!',\r\n      month: '[month] month [day] days ago!',\r\n      day: '[day] day [hour] hours ago!',\r\n      hour: '[hour] hour [minute] minutes ago!',\r\n      minute: 'days [minute] minutes [second] seconds ago!',\r\n      second: '[second] seconds ago!'\r\n    })\r\n\r\n  return(\r\n    <div className={`${scss.post_header} flex-row-center-space-between-none`}>\r\n      {user ? \r\n      <div className='flex-row-normal-normal-medium'>\r\n         <ImageComponent src={user?.avatar} alt={user?.name || 'User avatar'}/>\r\n         <div className={scss.post_author}>\r\n           <Link to={`/user/${user?._id}`}>{user?.name}</Link>\r\n           <p className={scss.post_create_date}>{createdAtDifference}</p>  \r\n        </div>\r\n      </div> :\r\n      <div className={`${scss.post_header_author_not_defined} flex-row-center-normal-medium`}>\r\n        <UserX/>\r\n        <p>Author is possibly deleted!</p>\r\n      </div>}\r\n      {(isAdminOrCreator && !isSearchPage) ?\r\n      <button className={scss.post_action_button}>\r\n        <svg viewBox=\"0 0 128 512\"><path d=\"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z\"/></svg>\r\n        <ul className={`${scss.post_action_container} flex-column-normal-normal-none`}>\r\n          <li onClick={() => contentAction('remove')} className='flex-row-center-normal-medium'><Trash2 /><p>Remove</p></li>\r\n          <li onClick={() => contentAction('edit')} className='flex-row-center-normal-medium'><Pencil /><p>Edit</p></li>\r\n          <li onClick={() => contentAction(isHidden ? 'show' : 'hidde')} className='flex-row-center-normal-medium'>{isHidden ? <Eye /> : <EyeOff />}<p>{isHidden ? 'Show' : 'Hidden'}</p></li>\r\n        </ul>\r\n      </button> : null}\r\n    </div>\r\n  )\r\n}","import scss from '../scss/postWrapper.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport type { PropsWithChildren } from \"react\"\r\nimport type { PostWrapperProps } from '../postContainer.type'\r\n\r\nimport { EyeOff } from 'lucide-react'\r\n\r\nexport default function PostWrapper({ children, className }: PropsWithChildren<PostWrapperProps>) {\r\n  return (\r\n    <section className={`${scss.post_wrapper_container} ${className} main-content-container`}>\r\n      {className ? \r\n       <div className={`${scss.post_is_hidden} flex-row-center-center-medium`}>\r\n         <EyeOff/>\r\n         <p>Hidden</p>\r\n       </div> : null}\r\n      <div style={{ padding: '1rem' }}>{children}</div>\r\n    </section>\r\n  )\r\n}","import scss from '../scss/postTags.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport type { PostTagsProps } from '../postContainer.type'\r\n\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function PostTags({ tags }: PostTagsProps) {\r\n  return <div className={`${scss.post_tags} flex-row-normal-normal-medium`}>{tags.map(tag => tag.trim() ? <Link to={`/search?tag=${tag}`} key={tag}>{tag}</Link> : null)}</div>\r\n}","import scss from './postContainer.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport PostHeader from \"./component/postHeader\";\r\nimport PostWrapper from \"./component/postWrapper\";\r\nimport PostTags from './component/postTags';\r\nimport ContentViewer from '../content-viewer/contentViewer';\r\n\r\nimport type { Content } from '@/global.type';\r\nimport type { PostCommentsData } from '@/page/post/page.type';\r\nimport type { PostContainerProps } from \"./postContainer.type\";\r\n\r\nimport { Link, useLocation, useNavigate, useParams } from \"react-router-dom\";\r\nimport { Fragment } from 'react/jsx-runtime';\r\nimport { Eye, Heart, MessageCircle } from 'lucide-react';\r\n\r\nimport DateParser from '@/lib/date-parser/dateParser';\r\n\r\nimport useAuth from '@/custom-hook/useAuth/useAuth';\r\nimport useRequest from '@/custom-hook/_use-request/_useRequest';\r\nimport useSearchParams from '@/custom-hook/use-search-params/useSearchParams';\r\nimport useHavePermission from '@/custom-hook/use-permitor/useHavePermission';\r\n\r\nimport fetcher from '@/lib/fetcher/fetcher';\r\nimport coockie from '@/lib/coockie/coockie';\r\n\r\nexport default function PostContainer({ post, type }: PostContainerProps) {\r\n  const { id } = useParams()\r\n  const { pathname } = useLocation()\r\n  const auth = useAuth()\r\n  const searchParams = useSearchParams()\r\n  const permission = useHavePermission()\r\n  const redirect = useNavigate()\r\n\r\n  const { mutate } = useRequest({ deps: [] })\r\n\r\n  const isPostPage: boolean = pathname.search('/post') > -1\r\n  const isHomePage: boolean = pathname === '/'\r\n  const isLiked: boolean = post.likedBy.includes(auth.user?._id || '')\r\n  \r\n  const isContentCreator: boolean = permission.role(['Creator']).equal('_id', post?.author?._id).permited()\r\n  const isAdmin: boolean = permission.role(['Admin']).permited()\r\n  const isHidden: boolean = post.isHidden\r\n  \r\n  const postID: string = (type === 'preview' || type === 'post') ? post._id : id!\r\n  const currPage: number = (type === 'comment') ? parseInt(searchParams.get('page') || '0') : 0\r\n  const hiddenClass: string = ((isHidden && isAdmin) || (isContentCreator && isHidden)) ? scss.post_hidden : ''\r\n\r\n  if(isHidden && isPostPage && !isAdmin && !isContentCreator && type === 'post') redirect('/')\r\n\r\n  const showSomeData = (showThe: string): void => {\r\n    searchParams.set({ 'type': showThe, 'post-id': post._id, 'list-page': 0 })\r\n  }\r\n\r\n  const likeThisPost = async (): Promise<void> => {\r\n    if(post.isHidden && !auth.user) return\r\n\r\n    const key: string[] = type === 'post' ? [`post-${post._id}`] : [`post-${postID}-comments-${currPage}`]\r\n\r\n    mutate<Content | PostCommentsData>({\r\n      key,\r\n      request: async (option) => {\r\n        const likedContent = await fetcher.get<Content>(`/${type}/${post._id}/like`, { 'Authorization': `Bearer ${coockie.getOne('PR_TOKEN')}` })\r\n\r\n        //Update post\r\n        if(type === 'post') return likedContent\r\n\r\n        //Update comment\r\n        const state = option.state as PostCommentsData\r\n        const comments = state.comments || []\r\n\r\n        return {...state, comments: comments.map(comment => comment._id === likedContent._id ? likedContent : comment) }\r\n      }\r\n    })\r\n  }\r\n\r\n  const createdAtDifference: string = DateParser\r\n    .getDifference(post.createdAt)\r\n    .getSortDate({\r\n      year: '[year] year [month] months ago!',\r\n      month: '[month] month [day] days ago!',\r\n      day: '[day] day [hour] hours ago!',\r\n      hour: '[hour] hour [minute] minutes ago!',\r\n      minute: 'days [minute] minutes [second] seconds ago!',\r\n      second: '[second] seconds ago!'\r\n    })\r\n\r\n  return(\r\n    <Fragment>\r\n      {isHomePage && !isContentCreator && !isAdmin && isHidden ? null :\r\n        <PostWrapper className={hiddenClass}>\r\n          {(type === 'comment' || type === 'preview') ? <PostHeader tags={post.tags || []} title={post.title || ''} content={post.content} isHidden={post.isHidden} postID={postID} contentID={post._id} type={type} createdAt={post.createdAt} user={post?.author}/> : null}\r\n          {type === 'post' ? \r\n            <div className={scss.post_content_container}>\r\n              <h4>{post.title}</h4>\r\n              <p className={scss.post_content_date}>{createdAtDifference}</p>\r\n              <ContentViewer content={post.content}/>\r\n            </div> : null}\r\n          {type === 'preview' ? \r\n            <div className={scss.post_content_container}>\r\n              <Link to={`/post/${post._id}`}>{post.title}</Link>\r\n              <ContentViewer className={scss.post_short_view} content={post.content.slice(0, 450)}/>\r\n            </div> : null}\r\n          {type === 'comment' ? <div className={scss.post_data}><ContentViewer content={post.content}/></div> : null}\r\n            <div className='flex-row-center-space-between-none'>\r\n              {((type === 'post' || type === 'preview') && post.tags) ? <PostTags tags={post.tags}/> : null}\r\n                <div className='flex-row-center-normal-big'>\r\n              {type === 'preview' ? \r\n                <Fragment>\r\n                  <p className={`${scss.post_statistic_data} flex-row-center-normal-small`} onClick={isHomePage ? () => showSomeData('views') : undefined} ><Eye />{post.viewedBy?.length}</p>\r\n                  <p className={`${scss.post_statistic_data} flex-row-center-normal-small`} onClick={isHomePage ? () => showSomeData('comments') : undefined}><MessageCircle />{post.comments?.length}</p>\r\n                  <p className={`${scss.post_statistic_data} flex-row-center-normal-small`} onClick={isHomePage ? () => showSomeData('likes') : undefined}><Heart />{post.likedBy?.length}</p>\r\n                </Fragment> : null}\r\n              {(type === 'comment' || type === 'post') && auth.user ? <button onClick={likeThisPost} className={`${isLiked ? scss.post_liked : ''} ${scss.post_statistic_data} flex-row-center-normal-small`}><Heart/>{post.likedBy.length}</button> : null}\r\n            </div>\r\n          </div>\r\n        </PostWrapper>}\r\n    </Fragment>\r\n  )\r\n}","import scss from './button.module.scss'\r\n\r\nimport type { ButtonProps } from \"./button.type\";\r\n\r\nexport default function Button({ label, className, onClick, type, isDisable }: ButtonProps) {\r\n  return(\r\n    <button type={type || 'button'} style={{ width: `${label.length * 13}px` }} disabled={isDisable} className={`${scss.button} ${className}`} onClick={onClick}>\r\n      <section className={scss.button_label}>{label}</section>\r\n    </button>\r\n  )\r\n}","import scss from '../scss/paginationListLoader.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nexport default function PaginationListLoader() {\r\n  return(\r\n    <div className='flex-row-normal-space-between-medium'>\r\n      <div className={scss.pagintion_list_button}></div>\r\n      <div className='flex-row-normal-normal-small'>\r\n        <div className={scss.pagintion_list_button}></div>\r\n        <div className={scss.pagintion_list_button}></div>\r\n        <div className={scss.pagintion_list_button}></div>\r\n      </div>\r\n      <div className={scss.pagintion_list_button}></div>\r\n    </div>\r\n  )\r\n}","import scss from '../scss/statisticPreviewLoader.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nexport default function StatisticPreviewLoader() {\r\n  return(\r\n    <div style={{ paddingTop: '1rem' }} className='flex-column-normal-normal-medium'>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n      <div className={scss.preview_loader}></div>\r\n    </div>\r\n  )\r\n}","import scss from '../scss/statisticPreview.module.scss'\r\nimport '@/scss/global.scss'\r\n\r\nimport Empty from '@/component/empty/empty'\r\nimport PaginationList from \"@/component/pagination-list/paginationList\"\r\nimport PaginationListLoader from '@/component/pagination-list/component/paginationListLoader'\r\nimport StatisticPreviewLoader from './statisticPreviewLoader'\r\nimport ImageComponent from '@/component/image-component/image'\r\n\r\nimport { Link } from \"react-router-dom\"\r\nimport { X } from 'lucide-react'\r\nimport { Eye, Heart, MessageCircle } from 'lucide-react';\r\n\r\nimport type { GetPostStatistic, StatisticPreviewProps } from '../page.type'\r\nimport type { KeyValueObject } from '@/global.type'\r\n\r\nimport fetcher from \"@/lib/fetcher/fetcher\"\r\nimport firstLetterToUpperCase from \"@/lib/first-letter-to-upper/firstLetterToUpper\"\r\n\r\nimport useRequest from '@/custom-hook/_use-request/_useRequest'\r\nimport useSearchParams from '@/custom-hook/use-search-params/useSearchParams'\r\n\r\nexport default function StatisticPreview({ type }: StatisticPreviewProps) {\r\n  const searchParams = useSearchParams()\r\n  const postID: string = searchParams.get('post-id')!\r\n  const currPage: number = parseInt(searchParams.get('list-page') || '0')\r\n  const iconDictionary: KeyValueObject = { views: <Eye/>, likes: <Heart/>, comments: <MessageCircle/> }\r\n  const { data, prev, isPending } = useRequest<GetPostStatistic>({ \r\n    deps: [`preview-${type}-${postID}-${currPage}`], \r\n    prev: [`preview-${type}-${postID}-${currPage - 1 < 0 ? 0 : currPage - 1}`], \r\n    request: async () => fetcher.get(`/post/preview/${type}/${postID}/${currPage}`),\r\n  })\r\n\r\n  const paginationLength: number = (prev?.pagesCount || data?.pagesCount) || 0\r\n\r\n  const closePreviewStatistic = (): void => {\r\n    searchParams.remove(['type', 'post-id', 'list-page'])\r\n  }\r\n\r\n  return(\r\n    <section className={scss.preview_container}>\r\n      <div className={`${scss.preview_body} main-content-container`}>\r\n        <div className={`${scss.preview_header} flex-row-center-space-between-none`}>\r\n          <div className='flex-row-center-normal-medium'>\r\n            {iconDictionary[type]}\r\n            <h4 className={scss.preview_type}>{firstLetterToUpperCase(type || '')}</h4>\r\n          </div>\r\n          <X onClick={closePreviewStatistic}/>\r\n        </div>\r\n        {isPending ? <PaginationListLoader/> : paginationLength > 1 ? <PaginationList pagesCount={paginationLength}/> : null}\r\n        {isPending ? <StatisticPreviewLoader/> :\r\n        <div style={{ paddingTop: paginationLength > 1 ? '0.5rem' : '0rem' }} className={scss.preview_item_count_list}>\r\n          {data?.items?.length === 0 ? <Empty label='Nothing found!'/> :\r\n          data?.items?.map(item => (\r\n            <Link to={`/user/${item._id}`} className='flex-row-center-space-between-none' key={Math.random() * 200}>\r\n              <div className='flex-row-center-normal-medium'>\r\n                <ImageComponent src={item.avatar} alt={item.name}/>\r\n                <p>{item.name}</p>\r\n              </div>\r\n              <p className={scss.preview_item_count}>{item.count}</p>\r\n            </Link>\r\n          ))}\r\n        </div>}\r\n      </div>\r\n    </section>\r\n  )\r\n}","import '@/scss/global.scss'\r\n\r\nimport PostContainer from \"@/component/post-container/postContainer\"\r\nimport Error from \"@/component/error/error\"\r\nimport Empty from \"@/component/empty/empty\"\r\nimport Button from '@/component/button/button'\r\nimport StatisticPreview from './component/statisticPreview'\r\nimport MutatingLoader from '@/component/loader/mutatig-loader/mutatingLoader'\r\nimport Loader from './loader'\r\n\r\nimport fetcher from \"@/lib/fetcher/fetcher\"\r\nimport coockie from '@/lib/coockie/coockie'\r\n\r\nimport type { Content } from \"@/global.type\"\r\n\r\nimport { Fragment } from 'react'\r\n\r\nimport useSearchParams from '@/custom-hook/use-search-params/useSearchParams'\r\nimport useRequest from '@/custom-hook/_use-request/_useRequest'\r\n\r\nexport default function Page() {\r\n  const searchParams = useSearchParams()\r\n  const contentPerLoad: number = 10\r\n  const postsCount: number = parseInt(searchParams.get('posts-count') || String(contentPerLoad))\r\n  const postStatisticPreviewType: string | null = searchParams.get('type')\r\n  const is830px: boolean = window.matchMedia('(width <= 830px)').matches\r\n  const { isFetching, isMutating, data, error, mutate } = useRequest({ \r\n    deps: ['all-posts'], \r\n    request: async () => await fetcher.get<Content[]>(`/home/${postsCount}`, { 'Authorization': `Bearer ${coockie.getOne('PR_TOKEN')}` }) \r\n  })\r\n\r\n  const loadMorePosts = async (): Promise<void> => {\r\n    const nextLoadCount: number = postsCount + contentPerLoad\r\n\r\n    searchParams.set({ 'posts-count': nextLoadCount })\r\n    await mutate({ key: ['all-posts'], request: async () => await fetcher.get<Content[]>(`/home/${nextLoadCount}`) })\r\n    \r\n    if(!isFetching && !isMutating) setTimeout(() => window.scrollTo({ behavior: 'smooth', top: document.body.scrollHeight }), 100)\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {isMutating ? <MutatingLoader/> : null}\r\n      <div style={{ height: '100%', marginRight: is830px ? '0rem' : postStatisticPreviewType ? '17rem' : '0rem' }} className='flex-row-normal-normal-medium'>\r\n        <div style={{ flexGrow: 1 }} className='flex-column-normal-normal-small'>\r\n          {isFetching ? <Loader/> : \r\n          error ? <Error underText='Go back or reload the page!' code={error.code} message={error.message}/> :\r\n          data && data.length === 0 ? <Empty option={{ flexCenterCenter: true }} label=\"No post would founded!\"/> : \r\n          data && \r\n          <Fragment>\r\n            {data.map(post => <PostContainer key={post._id} post={post} type=\"preview\"/>)}\r\n            {data.length % contentPerLoad === 0 ? <div className='flex-row-center-center-none'><Button onClick={loadMorePosts} label='Load More'/></div> : null}\r\n          </Fragment>}\r\n        </div>\r\n        {postStatisticPreviewType && <StatisticPreview type={postStatisticPreviewType}/>}\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}"],"names":["useAuth","redirect","useNavigate","userContext","useContext","AuthContext","searchParams","useSearchParams","isLogOpen","get","isRegOpen","userState","create","async","params","setSession","updateUserState","user","isAuthPending","isLoading","response","fetcher","post","apiURL","body","error","setToken","coockie","set","token","redirectURL","prev","Error","code","message","JSON","parse","out","clearError","useEffect","ImageLoader","className","style","jsx","scss","default_image_loader","ImageComponent","alt","classNames","src","styles","isLoaded","setIsLoaded","useState","imgSourceRef","useRef","imgRef","isHTTPProtocol","current","search","addEventListener","event","image","target","complete","once","Fragment","children","loader","CircleUserRound","img","default_image","size","ref","display","PostContainerLoader","post_loader_container","jsxs","post_loader_avatar","width","post_loader_text","post_loader_tag","useMetadata","metadata","title","document","metaEntries","Object","entries","key","value","metadataEl","createElement","name","content","head","appendChild","Loader","containersCount","description","Array","map","_","index","underText","error_container","error_body","error_error","PostHeader","createdAt","type","contentID","postID","tags","isHidden","permission","useHavePermission","mutate","changeError","useRequest","deps","pathname","useLocation","isAdminOrCreator","roleAndEqual","_id","permited","isPostPage","isHomePage","isSearchPage","typeForAPI","page","parseInt","contentAction","action","role","localStorage","contentType","onPage","onPost","request","option","removedItem","firstLetterToUpperCase","Authorization","getOne","state","comments","pagesCount","length","removeCache","filter","hiddenItem","id","createdAtDifference","DateParser","getDifference","getSortDate","year","month","day","hour","minute","second","post_header","avatar","post_author","Link","to","post_create_date","post_header_author_not_defined","UserX","post_action_button","viewBox","d","post_action_container","onClick","Trash2","Pencil","Eye","EyeOff","PostWrapper","post_wrapper_container","post_is_hidden","padding","PostTags","post_tags","tag","trim","PostContainer","useParams","auth","isLiked","likedBy","includes","isContentCreator","equal","author","isAdmin","currPage","hiddenClass","post_hidden","showSomeData","showThe","post_content_container","post_content_date","ContentViewer","post_short_view","slice","post_data","post_statistic_data","viewedBy","MessageCircle","Heart","likedContent","comment","post_liked","Button","label","isDisable","disabled","button","button_label","PaginationListLoader","pagintion_list_button","StatisticPreviewLoader","paddingTop","preview_loader","StatisticPreview","iconDictionary","views","likes","data","isPending","paginationLength","preview_container","preview_body","preview_header","preview_type","X","remove","PaginationList","preview_item_count_list","items","Empty","item","preview_item_count","count","Math","random","postsCount","String","postStatisticPreviewType","is830px","window","matchMedia","matches","isFetching","isMutating","MutatingLoader","height","marginRight","flexGrow","flexCenterCenter","nextLoadCount","setTimeout","scrollTo","behavior","top","scrollHeight"],"mappings":"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"}