import{j as e,r as s,R as a,V as t,W as n,O as r,E as l,K as o}from"../react.js";import"./about.js";import{L as i,P as c}from"./home.js";import{T as m,u as d,j as u,U as p,_ as x,h as j,A as h,P as g,r as f,s as N,E as C,t as D,B as v}from"./admin.js";import"../__commonjsHelpers__.js";const O="Q",w="R",F="S",L="T",$="U",y="V",b="X";function E({changeFilterData:s,filterData:a,filterDataName:t}){return e.jsx(m,{name:t,placeholder:`Find by ${t}...`,value:a[t],onInput:e=>s(t,e.currentTarget.value)})}const I=s.memo(c),R=window.matchMedia("(width <= 930px)").matches,S=[{name:"Likes",icon:e.jsx(r,{size:17})},{name:"Views",icon:e.jsx(l,{size:17})},{name:"Comments",icon:e.jsx(o,{size:17})}];function _(){const[r,l]=s.useState({author:"",content:"",title:""}),o=d(),c=o.get("tag"),m=parseInt(o.get("page")||"0"),_=s.useRef(null),k=s.useRef(),z=!R||u(p["IS-FILTER-MODAL-OPEN"],_),{isPending:P,data:T,error:A,request:M}=x({deps:[`sort-${m}`],noCache:!0,request:async()=>await j.post(`/sort/${m}`,{...r,tags:k.current?.value},h)}),U=(e,s)=>{l(s?a=>({...a,[e]:s}):s=>s="ascending"===s.sortOption?.[e]?{...s,sortOption:{[e]:void 0}}:"descending"===s.sortOption?.[e]?{...s,sortOption:{[e]:"ascending"}}:{...s,sortOption:{[e]:"descending"}})};return e.jsx(s.Fragment,{children:A?e.jsx(g,{error:A}):e.jsxs("div",{style:{height:"100%"},className:"flex-row-normal-normal-medium",children:[e.jsxs("div",{style:{width:"100%",minHeight:"100%"},className:"flex-column-normal-normal-small",children:[R?e.jsx(a,{onClick:()=>{o.set({[p["IS-FILTER-MODAL-OPEN"]]:!0})},className:F}):null,P?e.jsx(f,{}):T&&T.pagesCount>1?e.jsx(N,{pagesCount:T.pagesCount}):null,P?e.jsx(i,{}):T&&0===T.posts.length?e.jsx(C,{option:{flexCenterCenter:!0,height:"FULL"},label:"Nothing found!"}):T&&T.posts.map((s=>e.jsx(I,{post:s,type:"preview"},s._id))),P?e.jsx(f,{}):T&&T.pagesCount>1?e.jsx(N,{pagesCount:T.pagesCount}):null]}),e.jsx("div",{ref:_,className:z?O:`${O} ${w}`,children:e.jsxs("div",{className:"main-content-container flex-column-normal-normal-small",children:[e.jsx("p",{className:L,children:"Sort by"}),e.jsx("div",{className:"flex-column-normal-normal-small",children:S.map((s=>e.jsxs("button",{onClick:()=>U(s.name),className:r.sortOption?.[s.name]?`${$} ${y} flex-row-center-center-medium`:`${$} flex-row-center-center-medium`,children:[s.icon,e.jsx("p",{children:s.name}),"descending"===r.sortOption?.[s.name]?e.jsx(t,{size:14}):"ascending"===r.sortOption?.[s.name]?e.jsx(n,{size:14}):null]},s.name)))}),e.jsx(E,{changeFilterData:U,filterData:r,filterDataName:"content"}),e.jsx(E,{changeFilterData:U,filterData:r,filterDataName:"author"}),e.jsx(E,{changeFilterData:U,filterData:r,filterDataName:"title"}),e.jsx(D,{ref:k,value:[c||"",...k.current?.value||[]],placeholder:"Find by tags"}),e.jsxs("div",{className:"flex-row-normal-normal-small",children:[e.jsx(v,{className:b,onClick:()=>{0===m?M():o.set({page:0})},children:"Sortieren"}),e.jsx(v,{className:b,onClick:()=>{l({author:"",content:"",title:""}),o.set({page:0}),k.current&&k.current.clear()},children:"Wiederherstellen"})]})]})})]})})}export{_ as default};
