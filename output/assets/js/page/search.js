import{j as e,r as a,R as s,V as t,W as n,O as r,E as l,K as o}from"../react.js";import"./about.js";import{L as i,P as c}from"./home.js";import{T as m,u as d,j as u,U as p,_ as x,h as j,A as h,P as g,s as f,r as N,E as C,t as D,B as _}from"./admin.js";import"../__commonjsHelpers__.js";const v="__",O="-_",w="a_",F="b_",L="c_",$="d_",b="f_";function y({changeFilterData:a,filterData:s,filterDataName:t}){return e.jsx(m,{name:t,placeholder:`Find by ${t}...`,value:s[t],onInput:e=>a(t,e.currentTarget.value)})}const E=a.memo(c),I=window.matchMedia("(width <= 930px)").matches,k=[{name:"Likes",icon:e.jsx(r,{size:17})},{name:"Views",icon:e.jsx(l,{size:17})},{name:"Comments",icon:e.jsx(o,{size:17})}];function z(){const[r,l]=a.useState({author:"",content:"",title:""}),o=d(),c=o.get("tag"),m=parseInt(o.get("page")||"0"),z=a.useRef(null),P=a.useRef(),R=!I||u(p["IS-FILTER-MODAL-OPEN"],z),{isPending:S,data:T,error:A,request:M}=x({deps:[`sort-${m}`],noCache:!0,request:async()=>await j.post(`/sort/${m}`,{...r,tags:P.current?.value},h)}),q=(e,a)=>{l(a?s=>({...s,[e]:a}):a=>a="ascending"===a.sortOption?.[e]?{...a,sortOption:{[e]:void 0}}:"descending"===a.sortOption?.[e]?{...a,sortOption:{[e]:"ascending"}}:{...a,sortOption:{[e]:"descending"}})};return e.jsx(a.Fragment,{children:A?e.jsx(g,{error:A}):e.jsxs("div",{style:{height:"100%"},className:"flex-row-normal-normal-medium",children:[e.jsxs("div",{style:{width:"100%",minHeight:"100%"},className:"flex-column-normal-normal-small",children:[I?e.jsx(s,{onClick:()=>{o.set({[p["IS-FILTER-MODAL-OPEN"]]:!0})},className:w}):null,S?e.jsx(f,{}):T&&T.pagesCount>1?e.jsx(N,{pagesCount:T.pagesCount}):null,S?e.jsx(i,{}):T&&0===T.posts.length?e.jsx(C,{option:{flexCenterCenter:!0,height:"FULL"},label:"Nothing found!"}):T&&T.posts.map((a=>e.jsx(E,{post:a,type:"preview"},a._id))),S?e.jsx(f,{}):T&&T.pagesCount>1?e.jsx(N,{pagesCount:T.pagesCount}):null]}),e.jsx("div",{ref:z,className:R?v:`${v} ${O}`,children:e.jsxs("div",{className:"main-content-container flex-column-normal-normal-small",children:[e.jsx("p",{className:F,children:"Sort by"}),e.jsx("div",{className:"flex-column-normal-normal-small",children:k.map((a=>e.jsxs("button",{onClick:()=>q(a.name),className:r.sortOption?.[a.name]?`${L} ${$} flex-row-center-center-medium`:`${L} flex-row-center-center-medium`,children:[a.icon,e.jsx("p",{children:a.name}),"descending"===r.sortOption?.[a.name]?e.jsx(t,{size:14}):"ascending"===r.sortOption?.[a.name]?e.jsx(n,{size:14}):null]},a.name)))}),e.jsx(y,{changeFilterData:q,filterData:r,filterDataName:"content"}),e.jsx(y,{changeFilterData:q,filterData:r,filterDataName:"author"}),e.jsx(y,{changeFilterData:q,filterData:r,filterDataName:"title"}),e.jsx(D,{ref:P,value:[c||"",...P.current?.value||[]],placeholder:"Find by tags"}),e.jsxs("div",{className:"flex-row-normal-normal-small",children:[e.jsx(_,{className:b,onClick:()=>{0===m?M():o.set({page:0})},children:"Sortieren"}),e.jsx(_,{className:b,onClick:()=>{l({author:"",content:"",title:""}),o.set({page:0}),P.current&&P.current.clear()},children:"Wiederherstellen"})]})]})})]})})}export{z as default};
