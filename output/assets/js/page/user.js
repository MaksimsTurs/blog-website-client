import{j as e,w as s,S as a,n as r,e as t,r as n,x as l,L as i,i as o}from"../react.js";import{D as d,h as m,_ as c,a as _,M as u,F as h,T as x,i as j,f as g,j as p,P as v,E as N,u as f}from"./admin.js";import{I as b,b as y,B as w,u as $,E as C}from"./home.js";const R={user_loader_body:"V",user_loader_header:"W",user_loader_animation:"X",loader:"Y",user_loader_data:"Z"};function S(){return e.jsxs("div",{style:{padding:"0rem"},className:`${R.user_loader_body} main-content-container`,children:[e.jsxs("div",{className:`${R.user_loader_header} flex-row-normal-center-none`,children:[e.jsxs("div",{style:{flexGrow:1},className:"flex-column-center-center-small",children:[e.jsx("div",{style:{width:"5rem",height:"5rem"},className:`${R.user_loader_animation}`}),e.jsx("div",{style:{width:"7rem",height:"1.5rem"},className:`${R.user_loader_animation}`})]}),e.jsx("div",{style:{width:"2rem",height:"2rem"},className:`${R.user_loader_animation}`})]}),e.jsxs("div",{className:"flex-row-normal-normal-none",children:[e.jsxs("div",{className:`${R.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"4rem",height:"1rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"5rem",height:"1rem"},className:R.user_loader_animation})]}),e.jsxs("div",{className:`${R.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"3rem",height:"1rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"8rem",height:"1rem"},className:R.user_loader_animation})]}),e.jsxs("div",{className:`${R.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"6rem",height:"1rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"6.5rem",height:"1rem"},className:R.user_loader_animation})]})]})]})}function k(){return e.jsxs("div",{className:`${R.user_loader_body} main-content-container`,children:[e.jsxs("div",{style:{marginBottom:"0.5rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},className:"flex-row-center-normal-small",children:[e.jsx("div",{style:{borderRadius:"5px",width:"1.5rem",height:"1.5rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"9rem",height:"1.5rem"},className:R.user_loader_animation})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation})]})]})}const F="L",I={user_data_header:"_a",user_data_img_loader:"-a",user_data_header_top:"aa",user_data_img_container:"ba",user_data_img:"ca",user_data_role_container:"da",user_data_header_edit_button:"ea",user_data_header_bottom:"fa"};function V({user:t,setIsVisible:n}){const l="Admin"===t?.role,i=l?e.jsx(a,{}):e.jsx(r,{}),o=l?"#F48023":"#1682FD";return e.jsxs("div",{className:`${I.user_data_header} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("div",{className:`${I.user_data_header_top} flex-row-normal-center-none`,children:[e.jsxs("div",{className:`${I.user_data_img_container} flex-column-normal-normal-small`,children:[e.jsx(b,{classNames:{img:I.user_data_img,loader:I.user_data_img_loader},src:t.avatar,alt:t.name}),e.jsxs("div",{style:{color:o},className:`${I.user_data_role_container} flex-row-center-normal-small`,children:[i,e.jsx("p",{children:t.role})]})]}),e.jsx(s,{className:I.user_data_header_edit_button,size:30,onClick:()=>{n(!0)}})]}),e.jsxs("div",{className:I.user_data_header_bottom,children:[e.jsxs("section",{children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:t.name})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Registrated"}),e.jsx("p",{children:d.getDifference(t.createdAt)})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Contents"}),e.jsx("p",{children:t.myContent.length})]})]})]})}const B={edit_user_container:"ja",edit_user_body:"ka",edit_user_log_out:"la",edit_user_container_visible:"ma"};function L({isVisible:s,_id:a,setIsVisible:r}){const{submit:l,reset:i,formState:{errors:o}}=m([]),{mutate:d,isMutating:v}=c({deps:[`user-${a}`]}),N=t(),f=y(),b=n.useRef(null),$=_().isHaveRoleOrIsIDEqual(["Admin"],a).result(),C=()=>{r(!1)};return e.jsxs(e.Fragment,{children:[v?e.jsx(u,{}):null,e.jsx("div",{className:`${s?B.edit_user_container_visible:""} ${B.edit_user_container} flex-row-center-center-none`,children:e.jsx("div",{ref:b,children:e.jsxs(h,{onSubmit:l((e=>{$&&d({key:[`user-${a}`],request:async function(s){const r=await g.post("/update/user",p({...e,_id:a}));return f.create({setSession:r}),C(),i(),{...s.state,...r}}})})),className:B.edit_user_body,children:[e.jsx(x,{errors:o,name:"name",placeholder:"You name"}),e.jsx(j,{name:"avatar",label:"Chose you avatar!",isChange:v}),e.jsxs("div",{className:"flex-row-normal-normal-small",children:[e.jsx(w,{className:B.edit_user_log_out,onClick:()=>{f.out(),N("/")},label:"Log out"}),e.jsx(w,{onClick:C,label:"Stop editing"}),e.jsx(w,{type:"submit",label:"Save changes"})]})]})})})]})}const q={user_data_user_content:"w_",user_data_link:"x_"};function A({userContent:s,user:a}){return e.jsxs("ul",{className:`${q.user_data_user_content} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("li",{className:"flex-row-center-normal-medium",children:[e.jsx(l,{}),a.name," content"]}),(s.content||[]).length>0?e.jsx(v,{pagesCount:s.pagesCount||0}):null,0===(s.content||[]).length?e.jsx(N,{option:{size:"SMALL",flexCenterCenter:!0},label:"This author have no content!"}):s.content.map((s=>{const a=Boolean(s.title)?`/post/${s._id}`:`/post/${s.post?._id}#${s._id}`,r=s.post?.content||s.content;return e.jsx("li",{className:"flex-column-normal-normal-small",children:e.jsxs(i,{className:q.user_data_link,to:a,children:[e.jsx("p",{children:s.title||s.post?.title}),e.jsx("p",{children:r})]})},s._id)})),(s.content||[]).length>0?e.jsx(v,{pagesCount:s.pagesCount||0}):null]})}const D=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:s}=o(),a=f(),[r,t]=n.useState(!1),l=parseInt(a.get("list-page")||"0"),i=c({deps:[`user-${s}`],request:async()=>g.get(`/user/${s}`)}),d=c({prev:[`user-${s}-content-${l>0?l-1:l}`],deps:[`user-${s}-content-${l}`],request:async()=>await g.get(`/user/${s}/content/${l}`)});return $({title:i.data?.name,description:`Hier kannst du detalierte daten von ${i.data?.name} ansehen.`}),e.jsx(e.Fragment,{children:i.error||d.error?e.jsx(C,{code:(i.error||d.error).code,message:(i.error||d.error).message}):e.jsxs(e.Fragment,{children:[i.data?e.jsx(L,{isVisible:r,setIsVisible:t,_id:i.data._id}):null,e.jsx("div",{className:"flex-row-normal-center-none",children:e.jsxs("div",{className:`${F} flex-column-normal-normal-medium`,children:[!i.isFetching&&i.data?e.jsx(V,{user:i.data,setIsVisible:t}):e.jsx(S,{}),!d.isFetching&&i.data&&d.data?e.jsx(A,{user:i.data,userContent:d.data}):e.jsx(k,{})]})})]})})}},Symbol.toStringTag,{value:"Module"}));export{S as U,k as a,D as p};
