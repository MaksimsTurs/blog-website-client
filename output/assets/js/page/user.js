import{j as e,d as a,V as s,S as r,l as t,W as n,L as o,h as l}from"../react.js";import{u as i}from"./about.js";import{b as d,_ as m,c,u,d as _,M as h,e as x,T as j,F as g,B as p,f as N,O as v,U as y,D as f,I as b,k as $,E as w,P as S,L as C}from"./admin.js";import{u as E}from"./home.js";import{M as D}from"./galery.js";const R={user_loader_body:"i_",user_loader_header:"j_",user_loader_animation:"k_",loader:"l_",user_loader_data:"m_"};function F(){return e.jsxs("div",{style:{padding:"0rem"},className:`${R.user_loader_body} main-content-container`,children:[e.jsxs("div",{className:`${R.user_loader_header} flex-row-normal-center-none`,children:[e.jsxs("div",{style:{flexGrow:1},className:"flex-column-center-center-small",children:[e.jsx("div",{style:{width:"5rem",height:"5rem"},className:`${R.user_loader_animation}`}),e.jsx("div",{style:{width:"7rem",height:"1.5rem"},className:`${R.user_loader_animation}`})]}),e.jsx("div",{style:{width:"2rem",height:"2rem"},className:`${R.user_loader_animation}`})]}),e.jsxs("div",{className:"flex-row-normal-normal-none",children:[e.jsxs("div",{className:`${R.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"4rem",height:"1rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"5rem",height:"1rem"},className:R.user_loader_animation})]}),e.jsxs("div",{className:`${R.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"3rem",height:"1rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"8rem",height:"1rem"},className:R.user_loader_animation})]}),e.jsxs("div",{className:`${R.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"6rem",height:"1rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"6.5rem",height:"1rem"},className:R.user_loader_animation})]})]})]})}function O(){return e.jsxs("div",{className:`${R.user_loader_body} main-content-container`,children:[e.jsxs("div",{style:{marginBottom:"0.5rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},className:"flex-row-center-normal-small",children:[e.jsx("div",{style:{borderRadius:"5px",width:"1.5rem",height:"1.5rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"9rem",height:"1.5rem"},className:R.user_loader_animation})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation})]})]})}const A="q_",I={edit_user_body:"Sa",edit_user_log_out:"Ta"};function L({_id:s}){const{submit:r,reset:t,formState:{errors:n}}=d(),{isMutating:o}=m({deps:[`user-${s}`]}),{mutate:l}=c(`user-${s}`),i=E(),f=u(),b=a(),$=_().role(["Admin"]).equal("_id",s).permited(),w=()=>{f.remove([y["IS-EDIT-USER-MODAL-OPEN"]])};return e.jsxs(e.Fragment,{children:[o?e.jsx(h,{}):null,e.jsx(D,{title:"Edit user",modalKey:"IS-EDIT-USER-MODAL-OPEN",children:e.jsxs(x,{onSubmit:r((e=>{$&&l((async function(a){const r=await N.post("/update/user",v.createFormDataFromJSON({...e,_id:s}));return i.create({setSession:r}),w(),t(),{...a.state,...r}}))})),className:I.edit_user_body,children:[e.jsx(j,{errors:n,name:"name",placeholder:"You name"}),e.jsx(g,{name:"avatar",label:"Chose you avatar!"}),e.jsxs("div",{className:"flex-row-normal-normal-small",children:[e.jsx(p,{className:I.edit_user_log_out,onClick:()=>{i.out(),b("/")},label:"Log out"}),e.jsx(p,{type:"submit",label:"Save changes"})]})]})})]})}const M={user_data_header:"xc",user_data_img_loader:"yc",user_data_header_top:"zc",user_data_img_container:"Ac",user_data_img:"Bc",user_data_role_container:"Cc",user_data_header_edit_button:"Dc",user_data_header_bottom:"Ec"};function T({user:a}){const n=_().equal("_id",a._id).permited(),o="Admin"===a?.role,l=o?"#F48023":"#1682FD",i=o?e.jsx(r,{}):e.jsx(t,{}),d=u(),m=f.getDifference(a.createdAt).getSortDate({year:"[year] years [month] months ago!",month:"[month] months [day] days ago!",day:"[day] days [hour] hours ago!",hour:"[hour] hours [minute] minutes ago!",minute:"[minute] minutes [second] seconds ago!",second:"[second] seconds ago!"});return e.jsxs("div",{className:`${M.user_data_header} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("div",{className:`${M.user_data_header_top} flex-row-normal-center-none`,children:[e.jsxs("div",{className:`${M.user_data_img_container} flex-column-normal-normal-small`,children:[e.jsx(b,{classNames:{img:M.user_data_img,loader:M.user_data_img_loader,svg:M.user_data_img},src:a.avatar,alt:a.name}),e.jsxs("div",{style:{color:l},className:`${M.user_data_role_container} flex-row-center-normal-small`,children:[i,e.jsx("p",{children:a.role})]})]}),n&&e.jsx(s,{className:M.user_data_header_edit_button,size:30,onClick:()=>{d.set({[y["IS-EDIT-USER-MODAL-OPEN"]]:!0})}})]}),e.jsxs("div",{className:M.user_data_header_bottom,children:[e.jsxs("section",{children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:a.name})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Registrated"}),e.jsx("p",{children:m})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Posts"}),e.jsx("p",{children:a.myContent.length})]})]})]})}const k={user_data_user_content:"fc",user_data_link:"gc"};function P({userContent:a,user:s}){return e.jsxs("ul",{className:`${k.user_data_user_content} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("li",{className:"flex-row-center-normal-medium",children:[e.jsx(n,{}),s.name," content"]}),a.pagesCount>1?e.jsx($,{pagesCount:a.pagesCount||0}):null,0===(a.content||[]).length?e.jsx(w,{option:{size:"SMALL",flexCenterCenter:!0},label:"This author have no content!"}):a.content.map((a=>{const s=Boolean(a.title)?`/post/${a._id}`:`/post/${a.post?._id}#${a._id}`,r=a.post?.content||a.content;return e.jsx("li",{className:"flex-column-normal-normal-small",children:e.jsxs(o,{className:k.user_data_link,to:s,children:[e.jsx("p",{children:a.title||a.post?.title}),e.jsx("p",{children:r})]})},a._id)})),a.pagesCount>1?e.jsx($,{pagesCount:a.pagesCount||0}):null]})}const B=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:a}=l(),s=u(),r=parseInt(s.get(y["LIST-PAGE"])||"0"),t=m({deps:[`user-${a}`],request:async()=>N.get(`/user/${a}`)}),n=m({prev:[`user-${a}-content-${r>0?r-1:r}`],deps:[`user-${a}-content-${r}`],request:async()=>await N.get(`/user/${a}/content/${r}`)});return i({title:t.data?.name,description:`Hier kannst du detalierte daten von ${t.data?.name} ansehen.`}),e.jsx(e.Fragment,{children:t.error?e.jsx(S,{error:t.error}):e.jsxs(e.Fragment,{children:[t.data&&e.jsx(L,{_id:t.data._id}),e.jsx("div",{className:"flex-row-normal-center-none",children:e.jsxs("div",{className:`${A} flex-column-normal-normal-medium`,children:[!t.isFetching&&t.data?e.jsx(T,{user:t.data}):e.jsx(F,{}),n.error?e.jsx(C,{error:n.error.message}):!n.isFetching&&t.data&&n.data?e.jsx(P,{user:t.data,userContent:n.data}):e.jsx(O,{})]})})]})})}},Symbol.toStringTag,{value:"Module"}));export{F as U,O as a,B as p};
