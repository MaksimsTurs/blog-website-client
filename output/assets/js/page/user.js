import{j as e,w as s,S as a,n as r,e as t,r as n,x as l,L as i,i as o}from"../react.js";import{D as d,g as m,_ as c,M as u,F as _,T as h,h as x,f as j,i as g,P as p,E as v,u as N}from"./admin.js";import{I as f,b,c as y,B as w,u as $,E as C}from"./home.js";const R={user_loader_body:"L",user_loader_header:"M",user_loader_animation:"N",loader:"O",user_loader_data:"P"};function S(){return e.jsxs("div",{style:{padding:"0rem"},className:`${R.user_loader_body} main-content-container`,children:[e.jsxs("div",{className:`${R.user_loader_header} flex-row-normal-center-none`,children:[e.jsxs("div",{style:{flexGrow:1},className:"flex-column-center-center-small",children:[e.jsx("div",{style:{width:"5rem",height:"5rem"},className:`${R.user_loader_animation}`}),e.jsx("div",{style:{width:"7rem",height:"1.5rem"},className:`${R.user_loader_animation}`})]}),e.jsx("div",{style:{width:"2rem",height:"2rem"},className:`${R.user_loader_animation}`})]}),e.jsxs("div",{className:"flex-row-normal-normal-none",children:[e.jsxs("div",{className:`${R.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"4rem",height:"1rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"5rem",height:"1rem"},className:R.user_loader_animation})]}),e.jsxs("div",{className:`${R.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"3rem",height:"1rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"8rem",height:"1rem"},className:R.user_loader_animation})]}),e.jsxs("div",{className:`${R.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"6rem",height:"1rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"6.5rem",height:"1rem"},className:R.user_loader_animation})]})]})]})}function F(){return e.jsxs("div",{className:`${R.user_loader_body} main-content-container`,children:[e.jsxs("div",{style:{marginBottom:"0.5rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},className:"flex-row-center-normal-small",children:[e.jsx("div",{style:{borderRadius:"5px",width:"1.5rem",height:"1.5rem"},className:R.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"9rem",height:"1.5rem"},className:R.user_loader_animation})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:R.user_loader_animation})]})]})}const I="g",k={user_data_header:"na",user_data_img_loader:"oa",user_data_header_top:"pa",user_data_img_container:"qa",user_data_img:"ra",user_data_role_container:"sa",user_data_header_edit_button:"ta",user_data_header_bottom:"ua"};function V({user:t,setIsVisible:n}){const l="Admin"===t?.role,i=l?e.jsx(a,{}):e.jsx(r,{}),o=l?"#F48023":"#1682FD";return e.jsxs("div",{className:`${k.user_data_header} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("div",{className:`${k.user_data_header_top} flex-row-normal-center-none`,children:[e.jsxs("div",{className:`${k.user_data_img_container} flex-column-normal-normal-small`,children:[e.jsx(f,{classNames:{img:k.user_data_img,loader:k.user_data_img_loader},src:t.avatar,alt:t.name}),e.jsxs("div",{style:{color:o},className:`${k.user_data_role_container} flex-row-center-normal-small`,children:[i,e.jsx("p",{children:t.role})]})]}),e.jsx(s,{className:k.user_data_header_edit_button,size:30,onClick:()=>{n(!0)}})]}),e.jsxs("div",{className:k.user_data_header_bottom,children:[e.jsxs("section",{children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:t.name})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Registrated"}),e.jsx("p",{children:d.getDifference(t.createdAt)})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Contents"}),e.jsx("p",{children:t.myContent.length})]})]})]})}const q={edit_user_container:"Da",edit_user_body:"Ea",edit_user_log_out:"Fa",edit_user_container_visible:"Ga"};function B({isVisible:s,_id:a,setIsVisible:r}){const{submit:l,reset:i,formState:{errors:o}}=m([]),{mutate:d,isMutating:p}=c({deps:[`user-${a}`]}),v=t(),N=b(),f=n.useRef(null),$=y().isHaveRoleOrIsIDEqual(["Admin"],a).result(),C=()=>{r(!1)};return e.jsxs(e.Fragment,{children:[p?e.jsx(u,{}):null,e.jsx("div",{className:`${s?q.edit_user_container_visible:""} ${q.edit_user_container} flex-row-center-center-none`,children:e.jsx("div",{ref:f,children:e.jsxs(_,{onSubmit:l((e=>{$&&d({key:[`user-${a}`],request:async function(s){const r=await j.post("/update/user",g({...e,_id:a}));return N.create({setSession:r}),C(),i(),{...s.state,...r}}})})),className:q.edit_user_body,children:[e.jsx(h,{errors:o,name:"name",placeholder:"You name"}),e.jsx(x,{name:"avatar",label:"Chose you avatar!",isChange:p}),e.jsxs("div",{className:"flex-row-normal-normal-small",children:[e.jsx(w,{className:q.edit_user_log_out,onClick:()=>{N.out(),v("/")},label:"Log out"}),e.jsx(w,{onClick:C,label:"Stop editing"}),e.jsx(w,{type:"submit",label:"Save changes"})]})]})})})]})}const D={user_data_user_content:"va",user_data_link:"wa"};function L({userContent:s,user:a}){return e.jsxs("ul",{className:`${D.user_data_user_content} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("li",{className:"flex-row-center-normal-medium",children:[e.jsx(l,{}),a.name," content"]}),(s.content||[]).length>0?e.jsx(p,{pagesCount:s.pagesCount||0}):null,0===(s.content||[]).length?e.jsx(v,{option:{size:"SMALL",flexCenterCenter:!0},label:"This author have no content!"}):s.content.map((s=>{const a=Boolean(s.title)?`/post/${s._id}`:`/post/${s.post?._id}#${s._id}`,r=s.post?.content||s.content;return e.jsx("li",{className:"flex-column-normal-normal-small",children:e.jsxs(i,{className:D.user_data_link,to:a,children:[e.jsx("p",{children:s.title||s.post?.title}),e.jsx("p",{children:r})]})},s._id)})),(s.content||[]).length>0?e.jsx(p,{pagesCount:s.pagesCount||0}):null]})}const M=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:s}=o(),a=N(),[r,t]=n.useState(!1),l=parseInt(a.get("list-page")||"0"),i=c({deps:[`user-${s}`],request:async()=>j.get(`/user/${s}`)}),d=c({prev:[`user-${s}-content-${l>0?l-1:l}`],deps:[`user-${s}-content-${l}`],request:async()=>await j.get(`/user/${s}/content/${l}`)});return $({title:i.data?.name,description:`Hier kannst du detalierte daten von ${i.data?.name} ansehen.`}),e.jsx(e.Fragment,{children:i.error||d.error?e.jsx(C,{code:(i.error||d.error).code,message:(i.error||d.error).message}):e.jsxs(e.Fragment,{children:[i.data?e.jsx(B,{isVisible:r,setIsVisible:t,_id:i.data._id}):null,e.jsx("div",{className:"flex-row-normal-center-none",children:e.jsxs("div",{className:`${I} flex-column-normal-normal-medium`,children:[!i.isFetching&&i.data?e.jsx(V,{user:i.data,setIsVisible:t}):e.jsx(S,{}),!d.isFetching&&i.data&&d.data?e.jsx(L,{user:i.data,userContent:d.data}):e.jsx(F,{})]})})]})})}},Symbol.toStringTag,{value:"Module"}));export{S as U,F as a,M as p};
