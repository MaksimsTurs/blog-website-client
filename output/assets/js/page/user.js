import{j as e,x as s,S as a,k as r,c as t,r as n,y as i,X as o,z as l,L as d,g as m}from"../react.js";import{a as c,u as _,D as u,h,_ as x,d as j,F as g,T as p,i as N,f as v,j as y,P as f,E as b}from"./admin.js";import{I as $,b as w,B as C,u as S,E as R}from"./home.js";import{M as E}from"./galery.js";import{u as D}from"./search.js";const F={user_loader_body:"p_",user_loader_header:"q_",user_loader_animation:"r_",loader:"s_",user_loader_data:"t_"};function I(){return e.jsxs("div",{style:{padding:"0rem"},className:`${F.user_loader_body} main-content-container`,children:[e.jsxs("div",{className:`${F.user_loader_header} flex-row-normal-center-none`,children:[e.jsxs("div",{style:{flexGrow:1},className:"flex-column-center-center-small",children:[e.jsx("div",{style:{width:"5rem",height:"5rem"},className:`${F.user_loader_animation}`}),e.jsx("div",{style:{width:"7rem",height:"1.5rem"},className:`${F.user_loader_animation}`})]}),e.jsx("div",{style:{width:"2rem",height:"2rem"},className:`${F.user_loader_animation}`})]}),e.jsxs("div",{className:"flex-row-normal-normal-none",children:[e.jsxs("div",{className:`${F.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"4rem",height:"1rem"},className:F.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"5rem",height:"1rem"},className:F.user_loader_animation})]}),e.jsxs("div",{className:`${F.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"3rem",height:"1rem"},className:F.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"8rem",height:"1rem"},className:F.user_loader_animation})]}),e.jsxs("div",{className:`${F.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"6rem",height:"1rem"},className:F.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"6.5rem",height:"1rem"},className:F.user_loader_animation})]})]})]})}function k(){return e.jsxs("div",{className:`${F.user_loader_body} main-content-container`,children:[e.jsxs("div",{style:{marginBottom:"0.5rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},className:"flex-row-center-normal-small",children:[e.jsx("div",{style:{borderRadius:"5px",width:"1.5rem",height:"1.5rem"},className:F.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"9rem",height:"1.5rem"},className:F.user_loader_animation})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsx("div",{style:{width:"100%",height:"2rem"},className:F.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:F.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:F.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:F.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:F.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:F.user_loader_animation})]})]})}const O="c",A={user_data_header:"Z_",user_data_img_loader:"_a",user_data_header_top:"-a",user_data_img_container:"aa",user_data_img:"ba",user_data_role_container:"ca",user_data_header_edit_button:"da",user_data_header_bottom:"ea"};function L({user:t}){const n=c().equal("_id",t._id).permited(),i="Admin"===t?.role,o=i?e.jsx(a,{}):e.jsx(r,{}),l=i?"#F48023":"#1682FD",d=_(),m=u.getDifference(t.createdAt).getSortDate({year:"[year] years [month] months ago!",month:"[month] months [day] days ago!",day:"[day] days [hour] hours ago!",hour:"[hour] hours [minute] minutes ago!",minute:"[minute] minutes [second] seconds ago!",second:"[second] seconds ago!"});return e.jsxs("div",{className:`${A.user_data_header} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("div",{className:`${A.user_data_header_top} flex-row-normal-center-none`,children:[e.jsxs("div",{className:`${A.user_data_img_container} flex-column-normal-normal-small`,children:[e.jsx($,{classNames:{img:A.user_data_img,svg:A.user_data_img,loader:A.user_data_img_loader},src:t.avatar,alt:t.name}),e.jsxs("div",{style:{color:l},className:`${A.user_data_role_container} flex-row-center-normal-small`,children:[o,e.jsx("p",{children:t.role})]})]}),n&&e.jsx(s,{className:A.user_data_header_edit_button,size:30,onClick:()=>{d.set({[E["IS-EDIT-USER-MODAL-OPEN"]]:!0})}})]}),e.jsxs("div",{className:A.user_data_header_bottom,children:[e.jsxs("section",{children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:t.name})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Registrated"}),e.jsx("p",{children:m})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Contents"}),e.jsx("p",{children:t.myContent.length})]})]})]})}const M={edit_user_container:"F_",edit_user_body:"G_",edit_user_header:"H_",edit_user_icon:"I_",edit_user_log_out:"J_",edit_user_container_visible:"K_"};function q({_id:s}){const{submit:a,reset:r,formState:{errors:l}}=h([]),{mutate:d,isMutating:m}=x({deps:[`user-${s}`]}),u=t(),f=w(),b=_(),$=n.useRef(null),S=D(E["IS-EDIT-USER-MODAL-OPEN"],$),R=c().role(["Admin"]).equal("_id",s).permited(),F=()=>{b.remove([E["IS-EDIT-USER-MODAL-OPEN"]])};return e.jsxs(e.Fragment,{children:[m?e.jsx(j,{}):null,e.jsx("div",{ref:$,className:`${S?M.edit_user_container_visible:""} ${M.edit_user_container} flex-row-center-center-none`,children:e.jsxs(g,{onSubmit:a((e=>{R&&d({key:[`user-${s}`],request:async function(a){const t=await v.post("/update/user",y({...e,_id:s}));return f.create({setSession:t}),F(),r(),{...a.state,...t}}})})),className:M.edit_user_body,children:[e.jsxs("section",{className:`${M.edit_user_header} flex-row-center-space-between-none`,children:[e.jsxs("div",{className:`${M.edit_user_icon} flex-row-center-center-medium`,children:[e.jsx(i,{}),e.jsx("p",{children:"Edit user"})]}),e.jsx(o,{onClick:F})]}),e.jsx(p,{errors:l,name:"name",placeholder:"You name"}),e.jsx(N,{name:"avatar",label:"Chose you avatar!",isChange:m}),e.jsxs("div",{className:"flex-row-normal-normal-small",children:[e.jsx(C,{className:M.edit_user_log_out,onClick:()=>{f.out(),u("/")},label:"Log out"}),e.jsx(C,{type:"submit",label:"Save changes"})]})]})})]})}const T={user_data_user_content:"oa",user_data_link:"pa"};function B({userContent:s,user:a}){return e.jsxs("ul",{className:`${T.user_data_user_content} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("li",{className:"flex-row-center-normal-medium",children:[e.jsx(l,{}),a.name," content"]}),s.pagesCount>1?e.jsx(f,{pagesCount:s.pagesCount||0}):null,0===(s.content||[]).length?e.jsx(b,{option:{size:"SMALL",flexCenterCenter:!0},label:"This author have no content!"}):s.content.map((s=>{const a=Boolean(s.title)?`/post/${s._id}`:`/post/${s.post?._id}#${s._id}`,r=s.post?.content||s.content;return e.jsx("li",{className:"flex-column-normal-normal-small",children:e.jsxs(d,{className:T.user_data_link,to:a,children:[e.jsx("p",{children:s.title||s.post?.title}),e.jsx("p",{children:r})]})},s._id)})),s.pagesCount>1?e.jsx(f,{pagesCount:s.pagesCount||0}):null]})}const P=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:s}=m(),a=_(),r=parseInt(a.get("list-page")||"0"),t=x({deps:[`user-${s}`],request:async()=>v.get(`/user/${s}`)}),n=x({prev:[`user-${s}-content-${r>0?r-1:r}`],deps:[`user-${s}-content-${r}`],request:async()=>await v.get(`/user/${s}/content/${r}`)});return S({title:t.data?.name,description:`Hier kannst du detalierte daten von ${t.data?.name} ansehen.`}),e.jsx(e.Fragment,{children:t.error||n.error?e.jsx(R,{code:(t.error||n.error).code,message:(t.error||n.error).message}):e.jsxs(e.Fragment,{children:[t.data?e.jsx(q,{_id:t.data._id}):null,e.jsx("div",{className:"flex-row-normal-center-none",children:e.jsxs("div",{className:`${O} flex-column-normal-normal-medium`,children:[!t.isFetching&&t.data?e.jsx(L,{user:t.data}):e.jsx(I,{}),!n.isFetching&&t.data&&n.data?e.jsx(B,{user:t.data,userContent:n.data}):e.jsx(k,{})]})})]})})}},Symbol.toStringTag,{value:"Module"}));export{I as U,k as a,P as p};
