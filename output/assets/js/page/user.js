import{u as e,r as a,j as s,s as r,S as t,k as n,c as i,t as l,X as o,v as d,L as m,g as c}from"../react.js";import{a as u,u as _,D as h,g as x,_ as j,M as g,F as p,T as v,h as N,f,i as y,P as b,E as w}from"./admin.js";import{I as $,b as S,B as C,u as E,E as R}from"./home.js";import{M as D}from"./search.js";function k(s,r){const[t,n]=e();return a.useEffect((()=>{r.current?.addEventListener("click",(e=>{e.target===e.currentTarget&&n((e=>(e.set(s,String(!e.get(s))),e)))}))}),[]),JSON.parse(t.get(s)||"false")}const O={user_loader_body:"sa",user_loader_header:"ta",user_loader_animation:"ua",loader:"va",user_loader_data:"wa"};function F(){return s.jsxs("div",{style:{padding:"0rem"},className:`${O.user_loader_body} main-content-container`,children:[s.jsxs("div",{className:`${O.user_loader_header} flex-row-normal-center-none`,children:[s.jsxs("div",{style:{flexGrow:1},className:"flex-column-center-center-small",children:[s.jsx("div",{style:{width:"5rem",height:"5rem"},className:`${O.user_loader_animation}`}),s.jsx("div",{style:{width:"7rem",height:"1.5rem"},className:`${O.user_loader_animation}`})]}),s.jsx("div",{style:{width:"2rem",height:"2rem"},className:`${O.user_loader_animation}`})]}),s.jsxs("div",{className:"flex-row-normal-normal-none",children:[s.jsxs("div",{className:`${O.user_loader_data} flex-column-normal-normal-small`,children:[s.jsx("div",{style:{borderRadius:"5px",width:"4rem",height:"1rem"},className:O.user_loader_animation}),s.jsx("div",{style:{borderRadius:"5px",width:"5rem",height:"1rem"},className:O.user_loader_animation})]}),s.jsxs("div",{className:`${O.user_loader_data} flex-column-normal-normal-small`,children:[s.jsx("div",{style:{borderRadius:"5px",width:"3rem",height:"1rem"},className:O.user_loader_animation}),s.jsx("div",{style:{borderRadius:"5px",width:"8rem",height:"1rem"},className:O.user_loader_animation})]}),s.jsxs("div",{className:`${O.user_loader_data} flex-column-normal-normal-small`,children:[s.jsx("div",{style:{borderRadius:"5px",width:"6rem",height:"1rem"},className:O.user_loader_animation}),s.jsx("div",{style:{borderRadius:"5px",width:"6.5rem",height:"1rem"},className:O.user_loader_animation})]})]})]})}function I(){return s.jsxs("div",{className:`${O.user_loader_body} main-content-container`,children:[s.jsxs("div",{style:{marginBottom:"0.5rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},className:"flex-row-center-normal-small",children:[s.jsx("div",{style:{borderRadius:"5px",width:"1.5rem",height:"1.5rem"},className:O.user_loader_animation}),s.jsx("div",{style:{borderRadius:"5px",width:"9rem",height:"1.5rem"},className:O.user_loader_animation})]}),s.jsxs("div",{className:"flex-column-normal-normal-small",children:[s.jsx("div",{style:{width:"100%",height:"2rem"},className:O.user_loader_animation}),s.jsx("div",{style:{width:"100%",height:"2rem"},className:O.user_loader_animation}),s.jsx("div",{style:{width:"100%",height:"2rem"},className:O.user_loader_animation}),s.jsx("div",{style:{width:"100%",height:"2rem"},className:O.user_loader_animation}),s.jsx("div",{style:{width:"100%",height:"2rem"},className:O.user_loader_animation}),s.jsx("div",{style:{width:"100%",height:"2rem"},className:O.user_loader_animation})]})]})}const L="_",M={user_data_header:"Qa",user_data_img_loader:"Ra",user_data_header_top:"Sa",user_data_img_container:"Ta",user_data_img:"Ua",user_data_role_container:"Va",user_data_header_edit_button:"Wa",user_data_header_bottom:"Xa"};function T({user:e}){const a=u().equal("_id",e._id).permited(),i="Admin"===e?.role,l=i?s.jsx(t,{}):s.jsx(n,{}),o=i?"#F48023":"#1682FD",d=_(),m=h.getDifference(e.createdAt).getSortDate({year:"[year] year [month] months ago!",month:"[month] month [day] days ago!",day:"[day] day [hour] hours ago!",hour:"[hour] hour [minute] minutes ago!",minute:"days [minute] minutes [second] seconds ago!",second:"[second] seconds ago!"});return s.jsxs("div",{className:`${M.user_data_header} main-content-container flex-column-normal-normal-small`,children:[s.jsxs("div",{className:`${M.user_data_header_top} flex-row-normal-center-none`,children:[s.jsxs("div",{className:`${M.user_data_img_container} flex-column-normal-normal-small`,children:[s.jsx($,{classNames:{img:M.user_data_img,loader:M.user_data_img_loader},src:e.avatar,alt:e.name}),s.jsxs("div",{style:{color:o},className:`${M.user_data_role_container} flex-row-center-normal-small`,children:[l,s.jsx("p",{children:e.role})]})]}),a&&s.jsx(r,{className:M.user_data_header_edit_button,size:30,onClick:()=>{d.set({[D["IS-EDIT-USER-MODAL-OPEN"]]:!0})}})]}),s.jsxs("div",{className:M.user_data_header_bottom,children:[s.jsxs("section",{children:[s.jsx("p",{children:"Name"}),s.jsx("p",{children:e.name})]}),s.jsxs("section",{children:[s.jsx("p",{children:"Registrated"}),s.jsx("p",{children:m})]}),s.jsxs("section",{children:[s.jsx("p",{children:"Contents"}),s.jsx("p",{children:e.myContent.length})]})]})]})}const A={edit_user_container:"W_",edit_user_body:"X_",edit_user_header:"Y_",edit_user_icon:"Z_",edit_user_log_out:"_a",edit_user_container_visible:"-a"};function q({_id:e}){const{submit:r,reset:t,formState:{errors:n}}=x([]),{mutate:d,isMutating:m}=j({deps:[`user-${e}`]}),c=i(),h=S(),b=_(),w=a.useRef(null),$=k(D["IS-EDIT-USER-MODAL-OPEN"],w),E=u().role(["Admin"]).equal("_id",e).permited(),R=()=>{b.remove([D["IS-EDIT-USER-MODAL-OPEN"]])};return s.jsxs(s.Fragment,{children:[m?s.jsx(g,{}):null,s.jsx("div",{ref:w,className:`${$?A.edit_user_container_visible:""} ${A.edit_user_container} flex-row-center-center-none`,children:s.jsxs(p,{onSubmit:r((a=>{E&&d({key:[`user-${e}`],request:async function(s){const r=await f.post("/update/user",y({...a,_id:e}));return h.create({setSession:r}),R(),t(),{...s.state,...r}}})})),className:A.edit_user_body,children:[s.jsxs("section",{className:`${A.edit_user_header} flex-row-center-space-between-none`,children:[s.jsxs("div",{className:`${A.edit_user_icon} flex-row-center-center-medium`,children:[s.jsx(l,{}),s.jsx("p",{children:"Edit user"})]}),s.jsx(o,{onClick:R})]}),s.jsx(v,{errors:n,name:"name",placeholder:"You name"}),s.jsx(N,{name:"avatar",label:"Chose you avatar!",isChange:m}),s.jsxs("div",{className:"flex-row-normal-normal-small",children:[s.jsx(C,{className:A.edit_user_log_out,onClick:()=>{h.out(),c("/")},label:"Log out"}),s.jsx(C,{type:"submit",label:"Save changes"})]})]})})]})}const B={user_data_user_content:"xa",user_data_link:"ya"};function P({userContent:e,user:a}){return s.jsxs("ul",{className:`${B.user_data_user_content} main-content-container flex-column-normal-normal-small`,children:[s.jsxs("li",{className:"flex-row-center-normal-medium",children:[s.jsx(d,{}),a.name," content"]}),e.pagesCount>1?s.jsx(b,{pagesCount:e.pagesCount||0}):null,0===(e.content||[]).length?s.jsx(w,{option:{size:"SMALL",flexCenterCenter:!0},label:"This author have no content!"}):e.content.map((e=>{const a=Boolean(e.title)?`/post/${e._id}`:`/post/${e.post?._id}#${e._id}`,r=e.post?.content||e.content;return s.jsx("li",{className:"flex-column-normal-normal-small",children:s.jsxs(m,{className:B.user_data_link,to:a,children:[s.jsx("p",{children:e.title||e.post?.title}),s.jsx("p",{children:r})]})},e._id)})),e.pagesCount>1?s.jsx(b,{pagesCount:e.pagesCount||0}):null]})}const U=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:e}=c(),a=_(),r=parseInt(a.get("list-page")||"0"),t=j({deps:[`user-${e}`],request:async()=>f.get(`/user/${e}`)}),n=j({prev:[`user-${e}-content-${r>0?r-1:r}`],deps:[`user-${e}-content-${r}`],request:async()=>await f.get(`/user/${e}/content/${r}`)});return E({title:t.data?.name,description:`Hier kannst du detalierte daten von ${t.data?.name} ansehen.`}),s.jsx(s.Fragment,{children:t.error||n.error?s.jsx(R,{code:(t.error||n.error).code,message:(t.error||n.error).message}):s.jsxs(s.Fragment,{children:[t.data?s.jsx(q,{_id:t.data._id}):null,s.jsx("div",{className:"flex-row-normal-center-none",children:s.jsxs("div",{className:`${L} flex-column-normal-normal-medium`,children:[!t.isFetching&&t.data?s.jsx(T,{user:t.data}):s.jsx(F,{}),!n.isFetching&&t.data&&n.data?s.jsx(P,{user:t.data,userContent:n.data}):s.jsx(I,{})]})})]})})}},Symbol.toStringTag,{value:"Module"}));export{F as U,I as a,U as p,k as u};
