import{j as e,O as a,S as s,k as r,c as t,r as n,Q as o,X as i,R as l,L as d,g as m}from"../react.js";import{u as c}from"./about.js";import{e as u,u as _,D as h,U as x,c as j,_ as g,d as p,M as N,g as v,b as f,F as y,B as b,f as w,T as $,k as S,E as C,P as R,L as E}from"./admin.js";import{I as D,u as O}from"./database.js";import{u as F}from"./home.js";const L={user_loader_body:"oa",user_loader_header:"pa",user_loader_animation:"qa",loader:"ra",user_loader_data:"sa"};function A(){return e.jsxs("div",{style:{padding:"0rem"},className:`${L.user_loader_body} main-content-container`,children:[e.jsxs("div",{className:`${L.user_loader_header} flex-row-normal-center-none`,children:[e.jsxs("div",{style:{flexGrow:1},className:"flex-column-center-center-small",children:[e.jsx("div",{style:{width:"5rem",height:"5rem"},className:`${L.user_loader_animation}`}),e.jsx("div",{style:{width:"7rem",height:"1.5rem"},className:`${L.user_loader_animation}`})]}),e.jsx("div",{style:{width:"2rem",height:"2rem"},className:`${L.user_loader_animation}`})]}),e.jsxs("div",{className:"flex-row-normal-normal-none",children:[e.jsxs("div",{className:`${L.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"4rem",height:"1rem"},className:L.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"5rem",height:"1rem"},className:L.user_loader_animation})]}),e.jsxs("div",{className:`${L.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"3rem",height:"1rem"},className:L.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"8rem",height:"1rem"},className:L.user_loader_animation})]}),e.jsxs("div",{className:`${L.user_loader_data} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"6rem",height:"1rem"},className:L.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"6.5rem",height:"1rem"},className:L.user_loader_animation})]})]})]})}function I(){return e.jsxs("div",{className:`${L.user_loader_body} main-content-container`,children:[e.jsxs("div",{style:{marginBottom:"0.5rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},className:"flex-row-center-normal-small",children:[e.jsx("div",{style:{borderRadius:"5px",width:"1.5rem",height:"1.5rem"},className:L.user_loader_animation}),e.jsx("div",{style:{borderRadius:"5px",width:"9rem",height:"1.5rem"},className:L.user_loader_animation})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsx("div",{style:{width:"100%",height:"2rem"},className:L.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:L.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:L.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:L.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:L.user_loader_animation}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:L.user_loader_animation})]})]})}const k="Q",M={user_data_header:"ta",user_data_img_loader:"ua",user_data_header_top:"va",user_data_img_container:"wa",user_data_img:"xa",user_data_role_container:"ya",user_data_header_edit_button:"za",user_data_header_bottom:"Aa"};function P({user:t}){const n=u().equal("_id",t._id).permited(),o="Admin"===t?.role,i=o?"#F48023":"#1682FD",l=o?e.jsx(s,{}):e.jsx(r,{}),d=_(),m=h.getDifference(t.createdAt).getSortDate({year:"[year] years [month] months ago!",month:"[month] months [day] days ago!",day:"[day] days [hour] hours ago!",hour:"[hour] hours [minute] minutes ago!",minute:"[minute] minutes [second] seconds ago!",second:"[second] seconds ago!"});return e.jsxs("div",{className:`${M.user_data_header} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("div",{className:`${M.user_data_header_top} flex-row-normal-center-none`,children:[e.jsxs("div",{className:`${M.user_data_img_container} flex-column-normal-normal-small`,children:[e.jsx(D,{classNames:{img:M.user_data_img,svg:M.user_data_img,loader:M.user_data_img_loader},src:t.avatar,alt:t.name}),e.jsxs("div",{style:{color:i},className:`${M.user_data_role_container} flex-row-center-normal-small`,children:[l,e.jsx("p",{children:t.role})]})]}),n&&e.jsx(a,{className:M.user_data_header_edit_button,size:30,onClick:()=>{d.set({[x["IS-EDIT-USER-MODAL-OPEN"]]:!0})}})]}),e.jsxs("div",{className:M.user_data_header_bottom,children:[e.jsxs("section",{children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:t.name})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Registrated"}),e.jsx("p",{children:m})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Contents"}),e.jsx("p",{children:t.myContent.length})]})]})]})}const T={edit_user_container:"Na",edit_user_body:"Oa",edit_user_header:"Pa",edit_user_icon:"Qa",edit_user_log_out:"Ra",edit_user_container_visible:"Sa"};function q({_id:a}){const{submit:s,reset:r,formState:{errors:l}}=j([]),{isMutating:d}=g({deps:[`user-${a}`]}),{mutate:m}=p(`user-${a}`),c=F(),h=_(),S=t(),C=n.useRef(null),R=O(x["IS-EDIT-USER-MODAL-OPEN"],C),E=u().role(["Admin"]).equal("_id",a).permited(),D=()=>{h.remove([x["IS-EDIT-USER-MODAL-OPEN"]])};return e.jsxs(e.Fragment,{children:[d?e.jsx(N,{}):null,e.jsx("div",{ref:C,className:`${R?T.edit_user_container_visible:""} ${T.edit_user_container} flex-row-center-center-none`,children:e.jsxs(v,{onSubmit:s((e=>{E&&m((async function(s){const t=await w.post("/update/user",$.createFormDataFromJSON({...e,_id:a}));return c.create({setSession:t}),D(),r(),{...s.state,...t}}))})),className:T.edit_user_body,children:[e.jsxs("section",{className:`${T.edit_user_header} flex-row-center-space-between-none`,children:[e.jsxs("div",{className:`${T.edit_user_icon} flex-row-center-center-medium`,children:[e.jsx(o,{}),e.jsx("p",{children:"Edit user"})]}),e.jsx(i,{onClick:D})]}),e.jsx(f,{errors:l,name:"name",placeholder:"You name"}),e.jsx(y,{name:"avatar",label:"Chose you avatar!",isChange:d}),e.jsxs("div",{className:"flex-row-normal-normal-small",children:[e.jsx(b,{className:T.edit_user_log_out,onClick:()=>{c.out(),S("/")},label:"Log out"}),e.jsx(b,{type:"submit",label:"Save changes"})]})]})})]})}const B={user_data_user_content:"La",user_data_link:"Ma"};function U({userContent:a,user:s}){return e.jsxs("ul",{className:`${B.user_data_user_content} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("li",{className:"flex-row-center-normal-medium",children:[e.jsx(l,{}),s.name," content"]}),a.pagesCount>1?e.jsx(S,{pagesCount:a.pagesCount||0}):null,0===(a.content||[]).length?e.jsx(C,{option:{size:"SMALL",flexCenterCenter:!0},label:"This author have no content!"}):a.content.map((a=>{const s=Boolean(a.title)?`/post/${a._id}`:`/post/${a.post?._id}#${a._id}`,r=a.post?.content||a.content;return e.jsx("li",{className:"flex-column-normal-normal-small",children:e.jsxs(d,{className:B.user_data_link,to:s,children:[e.jsx("p",{children:a.title||a.post?.title}),e.jsx("p",{children:r})]})},a._id)})),a.pagesCount>1?e.jsx(S,{pagesCount:a.pagesCount||0}):null]})}const z=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:a}=m(),s=_(),r=parseInt(s.get(x["LIST-PAGE"])||"0"),t=g({deps:[`user-${a}`],request:async()=>w.get(`/user/${a}`)}),n=g({prev:[`user-${a}-content-${r>0?r-1:r}`],deps:[`user-${a}-content-${r}`],request:async()=>await w.get(`/user/${a}/content/${r}`)});return c({title:t.data?.name,description:`Hier kannst du detalierte daten von ${t.data?.name} ansehen.`}),e.jsx(e.Fragment,{children:t.error?e.jsx(R,{error:t.error}):e.jsxs(e.Fragment,{children:[t.data?e.jsx(q,{_id:t.data._id}):null,e.jsx("div",{className:"flex-row-normal-center-none",children:e.jsxs("div",{className:`${k} flex-column-normal-normal-medium`,children:[!t.isFetching&&t.data?e.jsx(P,{user:t.data}):e.jsx(A,{}),n.error?e.jsx(E,{error:n.error.message}):!n.isFetching&&t.data&&n.data?e.jsx(U,{user:t.data,userContent:n.data}):e.jsx(I,{})]})})]})})}},Symbol.toStringTag,{value:"Module"}));export{A as U,I as a,z as p};
