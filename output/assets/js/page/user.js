import{j as e,k as s,Y as a,S as r,t,Z as n,L as l,o as i}from"../react.js";import"./about.js";import{a as o,_ as m,b as d,u as c,d as h,M as x,F as u,T as j,e as p,B as g,h as N,O as v,U as y,D as f,I as _,q as w,E as $,P as b,L as S}from"./admin.js";import{u as C}from"./home.js";import{M as E}from"./galery.js";const D="V_",R="W_",A="X_",F="Z_";function O(){return e.jsxs("div",{style:{padding:"0rem"},className:`${D} main-content-container`,children:[e.jsxs("div",{className:`${R} flex-row-normal-center-none`,children:[e.jsxs("div",{style:{flexGrow:1},className:"flex-column-center-center-small",children:[e.jsx("div",{style:{width:"5rem",height:"5rem"},className:`${A}`}),e.jsx("div",{style:{width:"7rem",height:"1.5rem"},className:`${A}`})]}),e.jsx("div",{style:{width:"2rem",height:"2rem"},className:`${A}`})]}),e.jsxs("div",{className:"flex-row-normal-normal-none",children:[e.jsxs("div",{className:`${F} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"4rem",height:"1rem"},className:A}),e.jsx("div",{style:{borderRadius:"5px",width:"5rem",height:"1rem"},className:A})]}),e.jsxs("div",{className:`${F} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"3rem",height:"1rem"},className:A}),e.jsx("div",{style:{borderRadius:"5px",width:"8rem",height:"1rem"},className:A})]}),e.jsxs("div",{className:`${F} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{borderRadius:"5px",width:"6rem",height:"1rem"},className:A}),e.jsx("div",{style:{borderRadius:"5px",width:"6.5rem",height:"1rem"},className:A})]})]})]})}function I(){return e.jsxs("div",{className:`${D} main-content-container`,children:[e.jsxs("div",{style:{marginBottom:"0.5rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},className:"flex-row-center-normal-small",children:[e.jsx("div",{style:{borderRadius:"5px",width:"1.5rem",height:"1.5rem"},className:A}),e.jsx("div",{style:{borderRadius:"5px",width:"9rem",height:"1.5rem"},className:A})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsx("div",{style:{width:"100%",height:"2rem"},className:A}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:A}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:A}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:A}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:A}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:A})]})]})}const L="g_",M={edit_user_body:"Da",edit_user_buttons:"Ea"};function T({_id:a}){const{submit:r,reset:t,formState:{errors:n}}=o(),{isMutating:l}=m({deps:[`user-${a}`]}),{mutate:i}=d(`user-${a}`),f=C(),_=c(),w=s(),$=h().role(["Admin"]).equal("_id",a).permited(),b=()=>{_.remove([y["IS-EDIT-USER-MODAL-OPEN"]])};return e.jsxs(e.Fragment,{children:[l?e.jsx(x,{}):null,e.jsx(E,{title:"Edit user",modalKey:"IS-EDIT-USER-MODAL-OPEN",children:e.jsxs(u,{onSubmit:r((e=>{$&&i((async function(s){const r=await N.post("/update/user",v.createFormDataFromJSON({...e,_id:a}));return f.create({setSession:r}),b(),t(),{...s.state,...r}}))})),className:M.edit_user_body,children:[e.jsx(j,{errors:n,name:"name",placeholder:"You name"}),e.jsx(p,{name:"avatar",label:"Chose you avatar!"}),e.jsxs("div",{className:`${M.edit_user_buttons} flex-row-normal-normal-small`,children:[e.jsx(g,{className:M.edit_user_log_out,onClick:()=>{f.out(),w("/")},children:"Abmelden"}),e.jsx(g,{type:"submit",children:"Speichern"})]})]})})]})}const V="va",q="wa",B="xa",P="ya",k="za",U="Aa",z="Ba",G="Ca";function Y({user:s}){const n=h().equal("_id",s._id).permited(),l="Admin"===s?.role,i=l?"#F48023":"#1682FD",o=l?e.jsx(r,{}):e.jsx(t,{}),m=c(),d=f.getDifference(s.createdAt).getSortDate({year:"Vor [year] jahren [month] monat(en)!",month:"Vor [month] monaten [day] tag(en)!",day:"Vor [day] tagen [hour] stunden!",hour:"Vor [hour] stunden [minute] minuten!",minute:"Vor [minute] minuten [second] sekunden!",second:"Vor [second] sekunden!"});return e.jsxs("div",{className:`${V} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("div",{className:`${B} flex-row-normal-center-none`,children:[e.jsxs("div",{className:`${P} flex-column-normal-normal-small`,children:[e.jsx(_,{classNames:{img:k,loader:q,svg:k},src:s.avatar,alt:s.name}),e.jsxs("div",{style:{color:i},className:`${U} flex-row-center-normal-small`,children:[o,e.jsx("p",{children:s.role})]})]}),n&&e.jsx(a,{className:z,size:30,onClick:()=>{m.set({[y["IS-EDIT-USER-MODAL-OPEN"]]:!0})}})]}),e.jsxs("div",{className:G,children:[e.jsxs("section",{children:[e.jsx("p",{children:"Name"}),e.jsx("p",{children:s.name})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Registrated"}),e.jsx("p",{children:d})]}),e.jsxs("section",{children:[e.jsx("p",{children:"Content"}),e.jsx("p",{children:s.myContent.length})]})]})]})}const Z="qc",J="rc";function K({userContent:s,user:a}){return e.jsxs("ul",{className:`${Z} main-content-container flex-column-normal-normal-small`,children:[e.jsxs("li",{className:"flex-row-center-normal-medium",children:[e.jsx(n,{}),a.name," content"]}),s.pagesCount>1?e.jsx(w,{pagesCount:s.pagesCount||0}):null,0===(s.content||[]).length?e.jsx($,{option:{size:"SMALL",flexCenterCenter:!0},label:"This author have no content!"}):s.content.map((s=>{const a=Boolean(s.title)?`/post/${s._id}`:`/post/${s.post?._id}#${s._id}`,r=s.post?.content||s.content;return e.jsx("li",{className:"flex-column-normal-normal-small",children:e.jsxs(l,{className:J,to:a,children:[e.jsx("p",{children:s.title||s.post?.title}),e.jsx("p",{children:r})]})},s._id)})),s.pagesCount>1?e.jsx(w,{pagesCount:s.pagesCount||0}):null]})}const W=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:s}=i(),a=c(),r=parseInt(a.get(y["LIST-PAGE"])||"0"),t=m({deps:[`user-${s}`],request:async()=>N.get(`/user/${s}`)}),n=m({prev:[`user-${s}-content-${r>0?r-1:r}`],deps:[`user-${s}-content-${r}`],request:async()=>await N.get(`/user/${s}/content/${r}`)});return e.jsx(e.Fragment,{children:t.error?e.jsx(b,{error:t.error}):e.jsxs(e.Fragment,{children:[t.data&&e.jsx(T,{_id:t.data._id}),e.jsx("div",{className:"flex-row-normal-center-none",children:e.jsxs("div",{className:`${L} flex-column-normal-normal-medium`,children:[!t.isFetching&&t.data?e.jsx(Y,{user:t.data}):e.jsx(O,{}),n.error?e.jsx(S,{error:n.error.message}):!n.isFetching&&t.data&&n.data?e.jsx(K,{user:t.data,userContent:n.data}):e.jsx(I,{})]})})]})})}},Symbol.toStringTag,{value:"Module"}));export{O as U,I as a,W as p};
