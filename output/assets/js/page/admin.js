import{u as e,r as n,j as t,B as a,C as s,F as r,X as o,P as i,a as l,M as c,L as d,b as m,O as u,c as p,H as _,d as x,E as h,e as g,T as j,f,U as b,g as v,h as y,i as w,k as N,l as $,S as E,m as C,n as R,N as k}from"../react.js";const A={baseURL:"https://fuck-putler.vercel.app",formatURL:function(e){return this.baseURL?`${this.baseURL}${e}`:e},formatInit:function(e,n){let t={headers:n||{},body:e||{}};return!e||e instanceof FormData?t:(n||(t.headers={"Content-Type":"application/json"}),n&&!("Content-Type"in n)&&(t.headers={...t.headers,"Content-Type":"application/json"}),{...t,body:JSON.stringify(e)})},get:async function(e,n){const t=await fetch(this.formatURL(e),{headers:this.formatInit(void 0,n).headers}),a=await t.json();if(!t.ok)throw JSON.stringify(a);return await a},post:async function(e,n,t){const a=this.formatInit(n,t),s=await fetch(this.formatURL(e),{method:"POST",body:a.body,headers:a.headers}),r=await s.json();if(!s.ok)throw JSON.stringify(r);return await r}};const I={getOne:function(e){return function(){let e={};return document.cookie.split(/\;/).forEach((n=>{const[t,a]=n.split(/\=/);e={...e,[t.trim()]:a}})),e}()[e]},set:function(e,n){document.cookie=`${e}=${n};path=/;expires=${60*Date.now()*60*24*7};`}};function S(){const[n,t]=e();return{get:e=>n.get(e),set:e=>{const n=Object.entries(e);t((e=>{for(let[t,a]of n)e.set(t,a);return e}))},remove:e=>{t((n=>{for(let t=0;t<e.length;t++)n.delete(e[t]);return n}))}}}let L={isMax:function(e,n){if("string"==typeof n&&e<n.length)return!1},isMin:function(e,n){if("string"==typeof n&&e>n.length)return!1},isPattern:function(e,n){if(!RegExp(e.trim()).test(n))return!1},isEqualWith:function(e,n){if("string"==typeof e&&"string"==typeof n&&e!==n)return!1}},P={};function T(e){const[n,t,a]=e.split(":");return{func:n,value:t,error:a}}function O(e){for(let n=0;n<e.length;n++){const t=e[n];if(t.children.length>0)return O(t.children);const a=t;a.type&&(a.value="")}}function D(e){const[t,a]=n.useState({errors:void 0}),s=n.useRef(null),r=n.useRef(!1);return{submit:function(n){return new Proxy(n,{apply:function(n,t,o){const i=o[0];i.preventDefault(),s.current=i.currentTarget,r.current=!0;const l=Object.fromEntries(new FormData(i.currentTarget).entries()),c=function(e,n){for(let t in e){const a=e[t],s=a[0],r=a[1];if(Array.isArray(r)){const e=[];for(let t in r){if(!r?.[t])continue;const{error:a,func:o,value:i}=T(r[t]);"isEqualWith"===o?(!1===L[o](n[i],n[s])&&e.push(a),P[s]=e[0]||e[e.length-1]||void 0):(!1===L[o](i,n[s])&&e.push(a),P[s]=e[0]||e[e.length-1]||void 0)}}else{if(!a[1])return P;const e=a[0],{func:t,value:s,error:o}=T(r),i=L[t](s,n[e]);if(!(t in L))throw new ReferenceError(`Object 'Check' have no function with name ${t}`);P[e]=void 0===i?void 0:o}}return P}(e,l),d=0===Object.values(c).filter((e=>e)).length;a((e=>({...e,errors:c}))),d&&n(l)}})},reset:function(){if(!r)throw new Error("Form must be submitted first!");O(s.current.children)},formState:t}}const K={form_body:"Q",form_error:"R",form_button:"S",form_button_pending:"T"};function M({onSubmit:e,children:n,errors:s,isPending:r,buttonLabel:o,className:i,title:l,style:c}){const d=r?"Submiting...":o||"Submit",m=r?`${K.form_button_pending} ${K.form_button}`:K.form_button;return t.jsxs("form",{onSubmit:e,className:`${i} flex-column-normal-normal-none`,children:[l?t.jsx("h3",{children:l}):null,t.jsxs("div",{style:c,className:`${K.form_body} main-content-container flex-column-center-center-medium`,children:[n,s&&s.length>0?t.jsx("div",{style:{width:"100%"},children:s.map((e=>t.jsxs("div",{className:`${K.form_error} flex-row-center-center-medium`,children:[t.jsx(a,{size:15}),t.jsx("p",{children:e},e)]})))}):null,o?t.jsx("button",{className:m,disabled:r,children:t.jsx("section",{className:"flex-row-center-center-medium",children:d})}):null]})]})}const G={text_input_container:"U",text_input_error_icon:"V",text_input_error_text_container:"W",text_input_icon_hidden:"X",text_input:"Y",text_input_invalid:"Z"};function V({name:e,defaultValue:n,placeholder:a,errors:r,onInput:o,type:i}){const l=r?.[e]?G.text_input_error_icon:`${G.text_input_error_icon} ${G.text_input_icon_hidden}`,c=r?.[e]?`${G.text_input_invalid} ${G.text_input}`:G.text_input;return t.jsxs("div",{className:G.text_input_container,children:[t.jsx("input",{name:e,defaultValue:n,onInput:o,placeholder:a,type:i||"text",className:c}),t.jsx(s,{className:l}),t.jsx("div",{className:G.text_input_error_text_container,children:t.jsx("span",{children:r?.[e]})})]})}const U={file_input_label:"Ta",file_input_text:"Ua",file_input_uploaded_asset:"Va",asset_input_buttons:"Wa",asset_button:"Xa"};function B({name:e,label:a,asset:s,initValue:l,isChange:c,supportedFormats:d}){const[m,u]=n.useState(l),p=n.useRef(null),_=n.useRef(!1),x=S(),h=d||["image/webp","image/jpg","image/png","image/jpeg"],g=()=>{p.current&&(p.current.value=""),u(void 0)};return n.useEffect((()=>{g()}),[c,x.get("is-open")]),t.jsxs(n.Fragment,{children:[t.jsx("input",{ref:p,accept:h.join(","),id:e,name:e,type:"file",onChange:e=>{const n=e.currentTarget.files[0];n.type.search("video")>-1?_.current=!0:_.current=!1,h.includes(n.type)&&(u(URL.createObjectURL(n)),s&&(s.current=n))}}),m?t.jsxs("div",{className:U.file_input_label,children:[_.current?t.jsx("video",{className:U.file_input_uploaded_asset,src:m}):t.jsx("img",{className:U.file_input_uploaded_asset,src:m,alt:"User uploaded avatar"}),t.jsxs("section",{className:`${U.asset_input_buttons} flex-column-normal-normal-medium`,children:[t.jsx("button",{className:`${U.asset_button} flex-row-center-center-none`,type:"button",onClick:g,children:t.jsx(o,{})}),t.jsx("label",{className:`${U.asset_button} flex-row-center-center-none`,htmlFor:e,children:t.jsx(i,{})})]})]}):t.jsx("label",{className:U.file_input_label,htmlFor:e,children:t.jsxs("section",{className:U.file_input_text,children:[t.jsx(r,{}),t.jsx("p",{children:a})]})})]})}function X(e){const n=new FormData;for(let[t,a]of Object.entries(e))n.append(t,a);return n}const F=n.createContext(void 0);function z({children:e}){const[a,s]=n.useState();return t.jsx(F.Provider,{value:{change:s,cache:a},children:e})}const H={pagination_loader_container:"E",pagination_loader_button:"F",loader:"G"};function q(){return t.jsxs("div",{className:`${H.pagination_loader_container} flex-row-center-space-between-none`,children:[t.jsx("div",{style:{width:"4rem"},className:H.pagination_loader_button}),t.jsxs("div",{className:"flex-row-normal-normal-medium",children:[t.jsx("div",{className:H.pagination_loader_button}),t.jsx("div",{className:H.pagination_loader_button}),t.jsx("div",{className:H.pagination_loader_button}),t.jsx("div",{className:H.pagination_loader_button}),t.jsx("div",{className:H.pagination_loader_button})]}),t.jsx("div",{style:{width:"4rem"},className:H.pagination_loader_button})]})}const W={data_loader_container:"d_",data_loader_avatar:"e_",data_loader_animation:"f_",loader:"g_"};function J(){return t.jsx("div",{className:W.data_loader_container,children:[...Array(20)].map(((e,n)=>t.jsx("div",{style:{height:"fit-content",padding:"0.5rem"},className:"main-content-container",children:t.jsxs("div",{className:"flex-column-normal-normal-small",children:[t.jsxs("div",{className:"flex-row-normal-normal-small",children:[t.jsx("div",{className:`${W.data_loader_avatar} ${W.data_loader_animation}`}),t.jsxs("div",{style:{width:"100%"},className:"flex-column-normal-normal-small",children:[t.jsx("div",{style:{width:"50%",height:"100%",padding:"0.5rem"},className:W.data_loader_animation}),t.jsx("div",{style:{width:"75%",height:"1rem",padding:"0.5rem"},className:W.data_loader_animation})]})]}),t.jsxs("div",{className:"flex-row-normal-normal-small",children:[t.jsx("div",{style:{flexGrow:"1",height:"1.5rem"},className:W.data_loader_animation}),t.jsx("div",{style:{flexGrow:"1",height:"1.5rem"},className:W.data_loader_animation}),t.jsx("div",{style:{flexGrow:"1",height:"1.5rem"},className:W.data_loader_animation})]})]})},Math.random()*n+100)))})}function Q(e){const t=e.deps.join("-"),a=e.prev?.join("-"),s=n.useContext(F),r=s?.cache?.[t],o=s?.cache?.[a||"NO_DATA"]?.data;let i=n.useRef(),l=n.useRef(!0);async function c(){const n=s?.cache?.[t]?.data;if(!n&&e.request){s.change((e=>({...e,[t]:{isFetching:!0,isPending:!0,isMutating:!1}})));try{const n=await e.request(e.deps);if(e.noCache)return i.current=n,void s.change((e=>({...e,[t]:{isFetching:!1,isPending:!1,isMutating:!1}})));s.change((e=>({...e,[t]:{data:n,isFetching:!1,isPending:!1,isMutating:!1}})))}catch(a){s.change((e=>({...e,[t]:{isFetching:!1,isMutating:!1,isPending:!1,error:a instanceof Error?{code:503,message:"Service Unavailable!"}:JSON.parse(a)}})))}}else s.change((e=>({...e,[t]:{isFetching:!1,isMutating:!1,isPending:!1,data:n}})));l.current=!1}return n.useEffect((()=>{(e.enabled||void 0===e.enabled)&&c()}),e.deps),{...r,data:e.noCache?i.current:r?.data,isPending:(d=r?.isPending,void 0===d||r.isPending),isFetching:l.current&&!r?.error,prev:o,mutate:async function(n){const{key:t,request:a}=n,r=s?.cache?.[n.key.join("-")];try{s.change((e=>({...e,[t.join("-")]:{...r,isPending:!1,isMutating:!0}})));const o=await a({deps:n.key,state:r?.data,removeCache:function(e){s?.change?.((n=>({...n,[e]:{...r,isPending:!1,data:void 0}})))}});if(!o)return;if(e.noCache)return i.current=o,void s?.change?.((e=>({...e,[t.join("-")]:{...r,isPending:!1,isMutating:!1}})));s?.change?.((e=>({...e,[t.join("-")]:{...r,isPending:!1,isMutating:!1,data:o}})))}catch(o){s.change((e=>({...e,[t.join("-")]:{...r,isPending:!1,isMutating:!1,error:JSON.parse(o)}})))}},request:c,changeError:function(e,n){s?.change?.((t=>({...t||{},[e.join("-")]:{...(t||{})?.[e.join("-")]||{},error:n}})))}};var d}function Y(e){return parseInt(String(Math.abs(e)))}const Z={getDifference:function(e){if(!e)return"";const n=function(e,n){const t=e-n;return{second:Y(t/1e3%60),minute:Y(t/1e3/60%60),hour:Y(t/36e5%24),day:Y(t/864e5%9),month:Y(t/6048e5%12),year:Y(t/72576e5%365)}}(Date.parse(e),Date.now());return n.year>0?`${n.year}:${n.month}`:n.month>0?`${n.month} months ${n.day} days ago!`:n.day>0?`${n.day} days ${n.hour} hourse ago!`:n.hour>0?`${n.hour} hourse ago!`:n.minute>0?`${n.minute} minutes ${n.second} seconds ago!`:n.second>0?`${n.second} seconds ago!`:void 0}};function ee(e){return Array.isArray(e)?e.map((e=>`${e[0].toUpperCase()}${e.slice(1,-1)}`)):`${e[0].toUpperCase()}${e.slice(1,e.length)}`}const ne="Ka",te="La",ae={LINK_REGEXP:/\[(.*?);(.*?)\]/g,IMAGE_REGEXP:/\((.*?);(.*?);?(.*?)\)/g,BOLD_REGEXP:/#{1}(.*?)#{1}/g,HEADER_REGEXP_1:/#{2}(.*?)#{2}/,HEADER_REGEXP_2:/#{3}(.*?)#{3}/,VIDEO_REGEXP:/\(\[(.+)\]\)/g,DEFAULT_REGEXP:/\[(.*?)\]/g,SECURE_PROTOCOL_REGEXP:/((blob:?.+https?)|https):\/{1,2}/g,SQUARE_BRACKETS_REGEXP:/^\[(.*)\]$/g,PAIR_BRACKETS_REGEXP:/\((.*?)\)/g,TAG_BRACKET_REGEXP:/<.*>(.*)<.*>/},se={secureLink:function(e){return ae.SECURE_PROTOCOL_REGEXP.lastIndex=0,ae.SECURE_PROTOCOL_REGEXP.test(e)}},re={bold:function(e){return ae.BOLD_REGEXP.lastIndex=0,ae.BOLD_REGEXP.test(e)},header1:function(e){return ae.HEADER_REGEXP_1.lastIndex=0,ae.HEADER_REGEXP_1.test(e)},header2:function(e){return ae.HEADER_REGEXP_2.lastIndex=0,ae.HEADER_REGEXP_2.test(e)},img:function(e){return ae.IMAGE_REGEXP.lastIndex=0,ae.IMAGE_REGEXP.test(e)},link:function(e){return ae.LINK_REGEXP.lastIndex=0,ae.LINK_REGEXP.test(e)},video:function(e){return ae.LINK_REGEXP.lastIndex=0,ae.VIDEO_REGEXP.test(e)},lineIntendention:function(e){return"-"===e[0]},listItem:function(e){return"+"===e[0]}},oe={splitLineOnTags:function(e){if(!ae.TAG_BRACKET_REGEXP.test(e))return[e];let n=[],t="",a=!1,s="";for(let r=0;r<e.length;r++){const o=e[r];"<"!==o||a||(a=!0,s=e[r+1],n.push(t),t=""),"/"!==o||"<"!==e[r-1]||">"!==e[r+2]||s!==e[r+1]?(t+=o,t.length>0&&r+1===e.length&&n.push(t)):(n.push(`${t}/${e[r+1]}>`),a=!1,t="",s="",r+=2)}return n.filter((e=>e))}},ie={lineIntendention:function(){return'<div class="intendention"></div>'},header2:function(e){return e.replace(ae.HEADER_REGEXP_2,'<h2 class="header header_2">$1</h2>')},header1:function(e){return e.replace(ae.HEADER_REGEXP_1,'<h1 class="header header_1">$1</h1>')},bold:function(e){return e.replace(ae.BOLD_REGEXP,'<b class="container_flex">$1</b>')},listItem:function(e,n){let t="",a={},s=[];for(;e.index<n.length&&re.listItem(n[e.index]);){let t=n[e.index].replace("+","");re.link(t)&&(t=this.link(t)),a[e.index]={text:t},e.index++}s=Object.entries(a);for(let[r,o]of s)t+="<li>"+o.text+"</li>";return'<ul class="list">'+t+"</ul>"},img:function(e,n){let t="",a={},s=[];for(;e.index<n.length&&re.img(n[e.index]);){const[t,s,r]=n[e.index].replace(ae.PAIR_BRACKETS_REGEXP,"$1").split(/;/);a[e.index]=r?{text:t,link:r,context:s}:{text:t,link:s},e.index++}s=Object.entries(a);for(let[r,o]of s)o.context?t+='\n          <div class="img_with_context flex-column-center-center-medium">\n            <img src="'+o.link+'"alt="'+o.text+'">\n            <p>'+o.context+"</p>\n          </div>\n        ":t+='<div class="flex-row-normal-normal-none"><img class="img" src="'+o.link+'"alt="'+o.text+'"></div>';return t},link:function(e){const n=e.match(ae.LINK_REGEXP);let t=0,a=e;for(;n?.[t];){const e=n[t].replace(ae.SQUARE_BRACKETS_REGEXP,"$1").split(/;/);a=a.replace(n[t],'<a class="link content_flex" href="'+e[1]+'">'+e[0]+"</a>"),t++}return a},video:function(e){return'\n        <div class="video_container flex-row-center-center-none">\n          <video controls src="'+e.replace(ae.VIDEO_REGEXP,"$1")+'"></video>\n        </div>\n      '},paragraph:function(e){let n="";const t=oe.splitLineOnTags(e);let a,s;for(let r=0;r<t.length;r++)if(a=t[r],ae.TAG_BRACKET_REGEXP.test(a))n+=a;else{s=a.split(" ");for(let e=0;e<s.length;e++)0!==s[e].length&&(n+=`<p>${s[e]}</p>`)}return n}},le={regexp:ae,kind:{BOLD:"BOLD",HEADER1:"HEADER1",HEADER2:"HEADER2",IMG:"IMG",LINK:"LINK",LIST:"LIST",VIDEO:"VIDEO"},is:se,have:re,parseAs:ie,tools:oe};function ce(e){if(!e)return"";let n=e.split("\\n"),t="";1===n.length&&(n=e.split("\n"));for(let a={index:0};a.index<n.length;a.index++)le.have.lineIntendention(n[a.index])?t+=le.parseAs.lineIntendention():le.have.header2(n[a.index])?t+=le.parseAs.header2(n[a.index]):le.have.header1(n[a.index])?t+=le.parseAs.header1(n[a.index]):le.have.img(n[a.index])?(t+=le.parseAs.img(a,n),a.index--):le.have.video(n[a.index])?t+=le.parseAs.video(n[a.index]):le.have.listItem(n[a.index])?t+=le.parseAs.listItem(a,n):(le.have.bold(n[a.index])&&(n[a.index]=le.parseAs.bold(n[a.index])),le.have.link(n[a.index])&&(n[a.index]=le.parseAs.link(n[a.index])),n[a.index]=le.parseAs.paragraph(n[a.index]),n[a.index]='<div class="line flex-row-normal-normal-medium">'+n[a.index]+'</div><div class="line_end"></div>',t+=n[a.index]);return t}function de({content:e,className:a}){const s=n.useMemo((()=>ce(e||"")),[e]);return t.jsx("div",{className:`${ne} ${a}`,dangerouslySetInnerHTML:s?{__html:s}:void 0,children:0===s.length?t.jsxs("div",{className:`${te} flex-row-center-center-big`,children:[t.jsx(i,{}),t.jsx("p",{children:"Post is empty"})]}):null})}const me={empty_container:"G_"};function ue({label:e,option:n}){let a={fontSize:`${{SMALL:1,MEDIUM:1.25,LARGE:1.5}[n?.size||"MEDIUM"]}rem`,textAlign:{CENTER:"center",LEFT:"left",RIGHT:"right"}[n?.align||"CENTER"],height:{SMALL:"10%",MEDIUM:"50%",FULL:"100%"}[n?.height||"FULL"]};return n?.flexCenterCenter&&(a={...a,display:"flex",alignItems:"center",justifyContent:"center"}),t.jsx("div",{style:a,className:me.empty_container,children:t.jsx("p",{children:e})})}const pe={pagination_list_button:"ec",pagination_curr_page:"fc"};function _e({pagesCount:e,listKey:n}){const{pathname:a}=l(),s=S(),r=`${n||"list"}-page`,o=parseInt(s.get(r)||"0"),i=n=>{if("next"===n){const n=o+1>e-1?o:o+1;s.set({[r]:n})}else{const e=o-1<0?0:o-1;s.set({[r]:e})}},u=e=>{s.set({[r]:e})};return t.jsxs("section",{className:`${pe.pagination_list_container} flex-row-normal-space-between-medium`,children:[t.jsx("button",{onClick:()=>i("preview"),className:`${pe.pagination_list_button} flex-row-center-center-none`,children:t.jsx(c,{})}),t.jsxs("div",{className:"flex-row-normal-normal-none",children:[o-3>=0?t.jsx(d,{className:`${pe.pagination_list_button} flex-row-center-center-none`,to:`${a}?${r}=0`,children:"..."}):null,[...Array(e)].map(((e,n)=>t.jsx("button",{onClick:()=>u(n),className:`${pe.pagination_list_button} ${o===n?pe.pagination_curr_page:""} flex-row-center-center-none`,children:n},n))).slice(o-(1===o?1:2),o),[...Array(e)].map(((e,n)=>t.jsx("button",{onClick:()=>u(n),className:`${pe.pagination_list_button} ${o===n?pe.pagination_curr_page:""} flex-row-center-center-none`,children:n},n))).slice(o,o+1),[...Array(e)].map(((e,n)=>t.jsx("button",{onClick:()=>u(n),className:`${pe.pagination_list_button} ${o===n?pe.pagination_curr_page:""} flex-row-center-center-none`,children:n},n))).slice(o+1,o+3),o+3<e?t.jsx(d,{className:`${pe.pagination_list_button} flex-row-center-center-none`,to:`${a}?${r}=${e-1}`,children:"..."}):null]}),t.jsx("button",{onClick:()=>i("next"),className:`${pe.pagination_list_button} flex-row-center-center-none`,children:t.jsx(m,{})})]})}const xe={mutating_loader_container:"j_",mutating_loader:"k_",left:"l_",right:"m_"};function he(){return t.jsx("div",{className:`${xe.mutating_loader_container} flex-row-center-center-none`,children:t.jsx("span",{className:xe.mutating_loader})})}const ge="r_",je="s_",fe="t_",be="u_",ve="v_",ye="w_",we="x_",Ne={modal_error_container:"__",modal_error_body:"-_",modal_error_header:"a_",modal_error_text:"b_",modal_error_code:"c_"};function $e({error:e,removeError:a}){const s=S(),r=JSON.parse(s.get("is-error-modal-open")||"false");return n.useEffect((()=>{e&&s.set({"is-error-modal-open":!0})}),[e]),t.jsx("div",{style:{display:r&&e?"flex":"none"},className:`${Ne.modal_error_container} flex-row-center-center-none`,children:t.jsxs("div",{className:`${Ne.modal_error_body} flex-column-normal-normal-none`,children:[t.jsxs("div",{className:`${Ne.modal_error_header} flex-row-center-space-between-none`,children:[t.jsxs("div",{className:"flex-row-center-center-medium",children:[t.jsx(u,{size:17}),t.jsx("p",{children:"Some error!"})]}),t.jsx(o,{onClick:()=>{s.remove(["is-error-modal-open"]),a&&a()},size:17})]}),t.jsxs("div",{className:Ne.modal_error_text,children:[t.jsxs("p",{className:Ne.modal_error_code,children:[e?.code,"!"]}),t.jsx("p",{children:e?.message}),t.jsxs("div",{style:{flexWrap:"wrap",rowGap:"0rem"},className:"flex-row-normal-normal-small",children:[t.jsx("button",{onClick:()=>{window.location.reload()},children:"Refresh"}),t.jsx("p",{children:"the page or write a"}),t.jsx(d,{to:"/",children:"E-mail."})]})]})]})})}const Ee=n.memo((function({placeholder:e,defaultValue:a,getValue:s}){const[o,i]=n.useState(a),[l,c]=n.useState(),[d,m]=n.useState(),[u,g]=n.useState(),j=n.useRef(),f=n.useRef(null),b=n.useRef(!1),v=n.useRef(0),y=S(),w=JSON.parse(y.get("is-open")||"false"),N=JSON.parse(y.get("is-preview")||"false"),$=n.useCallback((async()=>{const e=function(e){let n={};return e.alt||(n={...n,alt:"Alt is required filed!"}),le.is.secureLink(e.url||"")||e.url||e.asset||(n={...n,url:"URL is not valid!"}),(e.url||"")?.length>0&&e.asset&&(n={...n,url:"Url or Data url is defined!"}),n}({alt:/video/g.test(j.current?.type||"")?"placeholder":d,url:u,asset:j.current}),n=f.current.selectionEnd;if(v.current=n,c(e),!(Object.entries(e).filter((e=>e)).length>0)){if(j.current){b.current=!0;const e=new FormData;let a;e.append("file",j.current);try{a=await async function(e){try{return await A.post("/api/upload",e)}catch(n){throw new Error("Error by uploading img!")}}(e)}catch(t){c({"upload-error":l.message}),b.current=!1}if(/video/g.test(j.current?.type||"")){const e=`${o.substring(0,n)}[${a.assetURL}]${o.substring(n,o.length)}`;i(e),s&&s(e)}else{const e=`${o.substring(0,n)}(${d};${a.assetURL})${o.substring(n,o.length)}`;i(e),s&&s(e)}b.current=!1}else{const e=`${o.substring(0,n)}(${d};${u})${o.substring(n,o.length)}`;i(e),s&&s(e)}m(""),g(""),c({}),j.current=void 0,y.set({"is-open":!1})}}),[d,u,j]);return n.useEffect((()=>{i(a||""),s&&s(a||"")}),[a]),t.jsxs(n.Fragment,{children:[b.current?t.jsx(he,{}):null,t.jsx($e,{error:l?.["upload-error"]}),t.jsxs("section",{className:ye,children:[t.jsx("button",{disabled:N,onClick:()=>{const e=f.current.selectionStart,n=f.current.selectionEnd;v.current=n;const t=o.substring(e,n),a=o.replace(t,`#${t}#`);i(a),s&&s(a)},type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(p,{})}),t.jsx("button",{disabled:N,onClick:()=>{const e=f.current.selectionStart,n=f.current.selectionEnd;v.current=n;const t=o.substring(e,n),a=o.replace(t,`##${t}##`);i(a),s&&s(a)},type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(_,{})}),t.jsx("button",{disabled:N,onClick:()=>{const e=f.current.selectionEnd;v.current=e;const n=`${o.substring(0,e)}[LINK STRING;LINK URL]${o.substring(e,o.length)}`;i(n),s&&s(n)},type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(x,{})}),t.jsx("button",{disabled:N,onClick:()=>{y.set({"is-open":!0})},type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(r,{})}),t.jsx("button",{onClick:()=>N?y.remove(["is-preview"]):y.set({"is-preview":!0}),type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(h,{})})]}),t.jsxs("div",{className:be,children:[t.jsx("div",{className:w?`${ge} flex-row-center-center-none`:`${ge} ${fe} flex-row-center-center-none`,children:t.jsxs("div",{className:`${je} main-content-container flex-column-normal-normal-small`,children:[t.jsx(V,{errors:l,onInput:e=>{g(e.currentTarget.value)},defaultValue:u||"",name:"url",type:"text",placeholder:"Put you img URL here!"}),t.jsx(V,{errors:l,onInput:e=>{m(e.currentTarget.value)},defaultValue:d||"",name:"alt",type:"text",placeholder:"Put img Alt attributte here!"}),t.jsx(B,{label:"Upload img!",name:"uploadImg",asset:j,initValue:u}),t.jsx("button",{disabled:b.current,type:"button",onClick:$,children:"Add Link"}),t.jsx("button",{type:"button",onClick:()=>{m(""),g(void 0),c({}),y.set({"is-open":!1}),j.current=void 0,s&&s(o)},children:"Stop"})]})}),t.jsx("div",{children:N?t.jsx(de,{content:o}):t.jsx("textarea",{className:ve,placeholder:e,spellCheck:!1,onChange:e=>{v.current=e.currentTarget.selectionEnd,i(e.currentTarget.value),s&&s(e.currentTarget.value)},ref:f,value:o,rows:(o?.split(/\n/)?.length||0)+1})})]})]})})),Ce={tag_list:"la",tag_item:"ma"};function Re({removeTag:e,tags:n}){return t.jsx("ul",{className:`${Ce.tag_list} flex-row-flex-start-normal-small`,children:n.map((n=>n.trim()?t.jsx("li",{onClick:()=>e(n),className:Ce.tag_item,children:n},n):null))})}function ke({getTags:e,placeholder:a,value:s}){const[r,o]=n.useState(s||[]);return t.jsxs(n.Fragment,{children:[t.jsx(V,{name:"tags",onInput:n=>{const t=n.currentTarget.value.split(/\,/);o(t),e(t)},placeholder:a,defaultValue:r.join(",")}),t.jsx(Re,{removeTag:n=>{o((t=>{const a=t.filter(((e,a)=>a!==t.indexOf(n)));return e(a),a}))},tags:r})]})}const Ae={pagination_button_style:"y_",pagination_button_disabled:"z_",pagination_container:"A_",pagination_body:"B_",pagination_curr_page:"C_"};function Ie({pagesCount:e,disableOn:n}){const{pathname:a}=l(),s=S(),r=parseInt(s.get("page")||"0"),o=n?Ae.pagination_button_disabled:"",i=n=>{if("next"===n){const n=r+1>e-1?r:r+1;s.set({page:n})}else{const e=r-1<0?0:r-1;s.set({page:e})}};return t.jsxs("div",{className:`${Ae.pagination_container} flex-row-center-space-between-none`,children:[t.jsx("button",{className:`${Ae.pagination_button_style} flex-row-center-center-none`,onClick:()=>i("preview"),children:t.jsx(c,{})}),t.jsxs("ul",{className:`${Ae.pagination_body} flex-row-center-normal-small`,children:[r>=3?t.jsx(d,{tabIndex:-1,className:`${o} ${Ae.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=0`,children:"..."}):null,[...Array(e)].map(((e,n)=>t.jsx("li",{children:t.jsx(d,{tabIndex:-1,className:n===r?`${o} ${Ae.pagination_curr_page} ${Ae.pagination_button_style} flex-row-center-center-none`:`${Ae.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=${n}`,children:n})},n))).slice(r-(1===r?1:2),r),[...Array(e)].map(((e,n)=>t.jsx("li",{children:t.jsx(d,{tabIndex:-1,className:n===r?`${o} ${Ae.pagination_curr_page} ${Ae.pagination_button_style} flex-row-center-center-none`:`${Ae.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=${n}`,children:n})},n))).slice(r,r+1),[...Array(e)].map(((e,n)=>t.jsx("li",{children:t.jsx(d,{tabIndex:-1,className:n===r?`${o} ${Ae.pagination_curr_page} ${Ae.pagination_button_style} flex-row-center-center-none`:`${Ae.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=${n}`,children:n})},n))).slice(r+1,r+3),r<=e-4?t.jsx(d,{tabIndex:-1,className:`${o} ${Ae.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=${e-1}`,children:"..."}):null]}),t.jsx("button",{className:`${Ae.pagination_button_style} flex-row-center-center-none`,onClick:()=>i("next"),children:t.jsx(m,{})})]})}const Se="f";function Le(e,n){if("object"!=typeof e||Array.isArray(e))return!1;for(let t=0;t<n.length;t++)if(Object.hasOwn(e,n[t]))return!0;return!1}const Pe={admin_side_menu_list_container:"Z_",admin_side_menu_body:"_a"};function Te(){const e=g(),n=n=>{e(`/admin/${n}`)};return t.jsxs("div",{className:Pe.admin_side_menu_list_container,children:[t.jsx("div",{className:Pe.admin_side_menu_body,children:t.jsxs("section",{onClick:()=>n("post"),className:"flex-row-center-normal-medium",children:[t.jsx(j,{}),t.jsx("p",{children:"Posts"})]})}),t.jsx("div",{className:Pe.admin_side_menu_body,children:t.jsxs("section",{onClick:()=>n("comment"),className:"flex-row-center-normal-medium",children:[t.jsx(f,{}),t.jsx("p",{children:"Comments"})]})}),t.jsx("div",{className:Pe.admin_side_menu_body,children:t.jsxs("section",{onClick:()=>n("user"),className:"flex-row-center-normal-medium",children:[t.jsx(b,{}),t.jsx("p",{children:"Users"})]})})]})}const Oe={content_author_avatar:"M_",content_author_name:"N_",content_author_registrated:"O_",content_content:"P_",content_no_data_about_author:"Q_"},De={data_wrapper_container:"Sa"};function Ke({children:e,id:n}){const a=S();return t.jsx("div",{onClick:()=>{a.set({id:n})},className:`${De.data_wrapper_container} main-content-container`,children:e})}function Me({contentData:e,authorData:n}){return t.jsx(Ke,{id:e._id,children:t.jsxs("div",{style:{justifyContent:"space-between"},className:"flex-column-normal-normal-medium",children:[n?t.jsxs("div",{className:"flex-row-normal-normal-medium",children:[t.jsx("img",{className:Oe.content_author_avatar,src:n.avatar,alt:n.name}),t.jsxs("div",{className:"flex-column-normal-norma-none",children:[t.jsx("p",{className:Oe.content_author_name,children:n.name}),t.jsx("p",{className:Oe.content_author_registrated,children:Z.getDifference(e.createdAt)})]})]}):t.jsxs("div",{className:`${Oe.content_no_data_about_author} flex-row-center-normal-medium`,children:[t.jsx(v,{}),t.jsxs("div",{children:[t.jsx("p",{children:"Author not found!"}),t.jsx("p",{className:Oe.content_author_registrated,children:Z.getDifference(e.createdAt)})]})]}),t.jsx("p",{className:Oe.content_content,children:e.content})]})})}const Ge={user_preview_author:"ca",user_preview_name:"da",user_preview_registrated:"ea",user_preview_some_data:"fa"};function Ve({user:e}){const n="Admin"===e.role?"#F48023":"#1682FD";return t.jsx(Ke,{id:e._id,children:t.jsxs("div",{className:"flex-column-normal-normal-none",children:[t.jsxs("div",{className:"flex-row-normal-normal-medium",children:[t.jsx("img",{className:Ge.user_preview_author,src:e.avatar,alt:e.name}),t.jsxs("div",{children:[t.jsx("p",{className:Ge.user_preview_name,children:e.name}),t.jsx("p",{className:Ge.user_preview_registrated,children:Z.getDifference(e.createdAt)})]})]}),t.jsxs("div",{className:`${Ge.user_preview_some_data} flex-row-normal-normal-none`,children:[t.jsxs("section",{className:"flex-row-normal-normal-medium",children:[t.jsx("p",{children:"Content:"}),t.jsx("p",{children:(e.myContent||[]).length})]}),t.jsxs("section",{className:"flex-row-normal-normal-medium",children:[t.jsx("p",{children:"Liked:"}),t.jsx("p",{children:(e.likedContent||[]).length})]}),t.jsxs("section",{className:"flex-row-normal-normal-medium",children:[t.jsx("p",{children:"Role:"}),t.jsx("p",{style:{color:n},children:e.role})]})]})]})})}const Ue={post_list_container:"ic",post_list_body:"jc",post_auhtor_container:"kc",post_author_data_body:"lc"},Be={data_simple_container:"oc",data_simple_key:"pc",data_simple_copyied:"qc"};function Xe({propKey:e,propValue:a,useParser:s,useCopyBoard:r}){const[o,i]=n.useState(void 0);return n.useEffect((()=>{o&&setTimeout((()=>i(!1)),200)}),[o]),t.jsxs("section",{className:`${Be.data_simple_container} flex-row-center-space-between-none`,children:[t.jsx("p",{className:Be.data_simple_key,children:e}),t.jsxs("div",{className:"flex-row-center-center-medium",children:[s?t.jsx("span",{className:"flex-row-center-center-none",dangerouslySetInnerHTML:{__html:ce(a)}}):t.jsx("p",{className:Be.data_simple_value,children:a}),r?t.jsx(y,{className:o?Be.data_simple_copyied:"",onClick:async()=>{await navigator.clipboard.writeText(a),i(!0)},size:15}):null]})]})}const Fe={modal_wrapper_container:"Ac",modal_wrapper_body:"Bc",modal_wrapper_header:"Cc"},ze={data_modal_wrapper_container:"Hc",data_modal_wrapper_data_body:"Ic",data_modal_wrapper_loader_animation:"Jc",loader:"Kc"},He={admin_action_button:"tc"};function qe({optionAction:e}){const[a,s]=n.useState(!1),r=S(),o=g(),{tab:l}=w(),c=["user","comment","post"].includes(l||"")?l:"post",d=r.get("id"),m=parseInt(r.get("page")||"0"),{mutate:u}=Q({deps:[]}),p={remove:{icon:t.jsx(N,{color:a?"#8a0000":"white"}),color:"#8a0000"},edit:{icon:t.jsx(i,{color:a?"#F48023":"white"}),color:"#F48023"}},_={backgroundColor:p[e.actionType].color,border:`1px solid ${p[e.actionType].color}`},x=e=>{"mouseleave"===e.type?s(!1):s(!0)};return t.jsx("button",{onMouseEnter:x,onMouseLeave:x,onClick:()=>{if("edit"===e.actionType)return r.set({[`${l}-edit-modal`]:!0});u({key:[`${c}-${m}`],request:async e=>{const n=await A.post(`/admin/remove/${ee(l)}/${d}`,{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`});return 1===e.state?.data.length?o(`/admin/${l}?page=${m-1<=0?0:m-1}`):o(`/admin/${l}?page=${m}`),{pagesCount:e.state?.pagesCount||0,data:e.state?.data.filter((e=>e._id!==n._id))||[]}}})},style:_,className:`${He.admin_action_button}`,children:t.jsx("section",{className:"flex-row-center-center-none",children:p[e.actionType].icon})})}function We(){return t.jsxs("div",{className:`${ze.data_modal_wrapper_container} flex-column-normal-normal-medium`,children:[t.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"6px",position:"absolute",right:"-15%",zIndex:"-1",top:"-2%"},className:"flex-column-normal-normal-small",children:[t.jsx(qe,{optionAction:{actionType:"remove"}}),t.jsx(qe,{optionAction:{actionType:"edit"}})]}),t.jsxs("div",{className:`${ze.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"2rem"},className:`${ze.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"11rem"},className:`${ze.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${ze.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"5rem"},className:`${ze.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"9rem"},className:`${ze.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${ze.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"3rem"},className:`${ze.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"6rem"},className:`${ze.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${ze.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"4rem"},className:`${ze.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"11rem"},className:`${ze.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${ze.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"3.5rem"},className:`${ze.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"5rem"},className:`${ze.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${ze.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"4rem"},className:`${ze.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"3rem"},className:`${ze.data_modal_wrapper_loader_animation}`})]})]})}function Je({Component:e}){const a=S(),{tab:s}=w(),r=["comment","post","user"].includes(s||"")?s:"post",i=a.get("id"),l=a.get("page")||"0",{data:c,isPending:d}=Q({deps:[`${r}-${l}`]}),m=c?.data&&c.data.find((e=>e._id===i));return t.jsxs(n.Fragment,{children:[m||!i||d?null:t.jsx($e,{error:{code:404,message:`${ee(r)} not found!`}}),i?t.jsx("div",{className:`${Fe.modal_wrapper_container} flex-row-center-center-none`,children:t.jsxs("div",{className:`${Fe.modal_wrapper_body} main-content-container flex-column-normal-normal-none`,children:[t.jsxs("section",{className:`${Fe.modal_wrapper_header} flex-row-center-space-between-none`,children:[t.jsx("p",{children:ee(r)}),t.jsx(o,{onClick:()=>{a.remove(["id"])},size:17})]}),d?t.jsx(We,{}):m?e({data:m}):null]})}):null]})}const Qe={burger_data_wrapper_container:"gc",burger_data_wrapper_key:"hc"};function Ye({propKey:e,children:a}){const[s,r]=n.useState(!1),o=n.useRef(null),i=n.useRef(0),l=n.cloneElement(a,{ref:o});return n.useEffect((()=>{o.current&&(i.current=o.current.getBoundingClientRect().height+7)}),[]),t.jsxs("div",{className:Qe.burger_data_wrapper_container,children:[t.jsx("p",{onClick:()=>{r((e=>!e))},className:Qe.burger_data_wrapper_key,children:e}),t.jsx("div",{style:{height:s?i.current:0,overflow:"auto",maxHeight:"15rem",transition:"all 0.2s ease"},children:l})]})}const Ze={data_edit_modal_wrapper:"uc",data_edit_modal_header:"vc"};function en({children:e}){const n=S(),{tab:a}=w(),s=JSON.parse(n.get(`${a}-edit-modal`)||"false");return t.jsx("div",{style:{display:s?"flex":"none"},className:`${Ze.data_edit_modal_wrapper} flex-row-center-center-none`,children:t.jsxs("div",{className:"main-content-container",children:[t.jsxs("div",{className:`${Ze.data_edit_modal_header} flex-row-center-space-between-none`,children:[t.jsxs("p",{children:["Edit ",ee(a)]}),t.jsx(o,{onClick:()=>{n.remove([`${a}-edit-modal`])},size:17})]}),e]})})}const nn={checkbox_default_input:"Dc",checkbox_body:"Ec",checkbox_custom_checkbox_wrapper:"Fc",checkbox_custom_checkbox_body:"Gc"};function tn({defaultValue:e,label:n,name:a}){return t.jsx("div",{style:{width:"100%"},className:"flex-row-center-normal-none",children:t.jsxs("label",{className:`${nn.checkbox_body} flex-row-center-normal-medium`,children:[t.jsx("input",{name:a,className:nn.checkbox_default_input,type:"checkbox",defaultChecked:e}),t.jsxs("p",{className:nn.checkbox_custom_checkbox_wrapper,children:[t.jsx("p",{className:nn.checkbox_custom_checkbox_body}),t.jsx($,{})]}),n]})})}function an(){const e=n.useRef([]),a=n.useRef(),s=S(),{submit:r,reset:o}=D([]),{mutate:i}=Q({deps:[]}),l=parseInt(s.get("views-page")||"0"),c=parseInt(s.get("likes-page")||"0"),m=10*l,u=m+10,p=10*c,_=p+10,x=n=>{i({key:[`post-${s.get("page")||0}`],request:async t=>{const r=await A.post("/admin/post/update",{...n,tags:e.current,content:a.current,id:s.get("id")},{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`});return o(),s.remove(["post-edit-modal"]),{pagesCount:t.state?.pagesCount||0,data:t.state?.data.map((e=>e._id===r._id?{...e,...r}:e))||[]}}})},h=e=>{a.current=e},g=n=>{e.current=n};return t.jsx(Je,{Component:e=>{const n=e.data.viewedBy?.slice(m,u)||[],a=e.data.likedBy.slice(p,_)||[],s=Math.ceil(n.length/10),o=Math.ceil(a.length/10);return t.jsxs("div",{style:{width:"30rem",position:"relative"},className:"flex-column-normal-normal-small",children:[t.jsx(en,{children:t.jsxs(M,{style:{border:"none",width:"30rem",boxShadow:"none",padding:"1rem"},onSubmit:r(x),buttonLabel:"Change post data",children:[t.jsx(V,{name:"title",placeholder:"Write new post title",defaultValue:e.data.title}),t.jsx(tn,{name:"isHidden",label:e.data.isHidden?"Show post":"Hidde post",defaultValue:!0}),t.jsx(ke,{placeholder:"Write new post tags",getTags:g,value:e.data.tags}),t.jsx(Ee,{placeholder:"Write new post content",defaultValue:e.data.content,getValue:h})]})}),t.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"6px",position:"absolute",right:"-12.5%",zIndex:"-1",top:"-2%"},className:"flex-column-normal-normal-small",children:[t.jsx(qe,{optionAction:{actionType:"remove"}}),t.jsx(qe,{optionAction:{actionType:"edit"}})]}),t.jsx(Ye,{propKey:"Auhor:",children:e.data.author?t.jsxs(d,{to:`/admin/user?id=${e.data.author._id}`,className:`${Ue.post_auhtor_container} flex-row-normal-normal-medium`,children:[t.jsx("img",{src:e.data.author.avatar,alt:e.data.author.name}),t.jsxs("div",{className:`${Ue.post_author_data_body} flex-column-normal-normal-none`,children:[t.jsx("p",{children:e.data.author.name}),t.jsx("p",{children:e.data.author.role}),t.jsx("p",{children:Z.getDifference(e.data.author.createdAt)}),t.jsx("p",{children:e.data.author.email})]})]}):t.jsx("div",{children:t.jsx(ue,{option:{size:"SMALL"},label:"No author found!"})})}),t.jsx(Ye,{propKey:"Views:",children:t.jsxs("div",{className:`${Ue.post_list_container} flex-column-normal-normal-none`,children:[s>1?t.jsx(_e,{pagesCount:s,listKey:"views"}):null,0===n.length?t.jsx(ue,{option:{size:"SMALL"},label:"No body have viewed!"}):t.jsx("ul",{className:Ue.post_list_body,children:n?.map((e=>t.jsx(d,{to:`/admin/user?id=${e._id}`,children:t.jsxs("li",{className:"flex-row-center-normal-medium",children:[t.jsx("img",{src:e.avatar,alt:e.name}),t.jsx("p",{children:e.name})]},`${e._id+100*Math.random()}`)})))})]})}),t.jsx(Ye,{propKey:"Likes:",children:t.jsxs("div",{className:`${Ue.post_list_container} flex-column-normal-normal-none`,children:[o>1?t.jsx(_e,{pagesCount:o,listKey:"likes"}):null,0===a.length?t.jsx(ue,{option:{size:"SMALL"},label:"No body have liked!"}):t.jsx("ul",{className:Ue.post_list_body,children:a?.map((e=>t.jsx(d,{to:`/admin/user?id=${e._id}`,children:t.jsxs("li",{className:"flex-row-center-normal-medium",children:[t.jsx("img",{src:e.avatar,alt:e.name}),t.jsx("p",{children:e.name})]},`${e._id+100*Math.random()}`)})))})]})}),t.jsx(Xe,{propKey:"ID:",propValue:e.data._id,useCopyBoard:!0}),t.jsx(Xe,{propKey:"Title:",propValue:e.data.title}),t.jsx(Xe,{propKey:"Is hidden:",propValue:e.data.isHidden?"Yes":"No"}),t.jsx(Xe,{propKey:"Tags:",propValue:e.data.tags?.join(", ")||"No tags"}),t.jsx(Xe,{propKey:"Created at:",propValue:Z.getDifference(e.data.createdAt)}),t.jsx(Xe,{propKey:"Updated at:",propValue:Z.getDifference(e.data.updatedAt)}),t.jsx(Xe,{propKey:"Content:",propValue:e.data.content,useParser:!0})]})}})}const sn={comment_list_container:"Oa",comment_list_body:"Pa",comment_auhtor_container:"Qa",comment_author_data_body:"Ra"};function rn(){const{submit:e,reset:a}=D([]),s=S(),r=n.useRef(),{mutate:o}=Q({deps:[]}),i=10*parseInt(s.get("comment-likes-page")||"0"),l=i+10,c=e=>{o({key:[`comment-${s.get("page")||0}`],request:async n=>{const t=await A.post("/admin/comment/update",{...e,content:r.current,id:s.get("id")},{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`});return a(),s.remove(["comment-edit-modal"]),{pagesCount:n.state?.pagesCount||0,data:n.state?.data.map((e=>e._id===t._id?{...e,...t}:e))||[]}}})},m=e=>{r.current=e};return t.jsx(Je,{Component:n=>{const a=n.data.likedBy.slice(i,l)||[],s=Math.ceil((n.data.likedBy?.length||0)/10);return t.jsxs("div",{style:{width:"30rem",position:"relative"},className:"flex-column-normal-normal-small",children:[t.jsx(en,{children:t.jsxs(M,{style:{border:"none",width:"30rem",boxShadow:"none",padding:"1rem"},onSubmit:e(c),buttonLabel:"Change comment data",children:[t.jsx(tn,{label:n.data.isHidden?"Show comment":"Hidde comment",name:"isHidden",defaultValue:n.data.isHidden}),t.jsx(Ee,{placeholder:"Write new comment content",defaultValue:n.data.content,getValue:m})]})}),t.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"6px",position:"absolute",right:"-12.5%",zIndex:"-1",top:"-2%"},className:"flex-column-normal-normal-small",children:[t.jsx(qe,{optionAction:{actionType:"remove"}}),t.jsx(qe,{optionAction:{actionType:"edit"}})]}),t.jsx(Xe,{propKey:"ID:",propValue:n.data._id,useCopyBoard:!0}),t.jsx(Xe,{propKey:"Written at:",propValue:Z.getDifference(n.data.createdAt)}),t.jsx(Xe,{propKey:"Is hidden:",propValue:n.data.isHidden?"Yes":"No"}),t.jsx(Xe,{propKey:"Content:",propValue:n.data.content,useParser:!0}),t.jsx(Ye,{propKey:"Auhor:",children:n.data.author?t.jsxs(d,{to:`/admin/user?id=${n.data.author._id}`,className:`${sn.comment_auhtor_container} flex-row-normal-normal-medium`,children:[t.jsx("img",{src:n.data.author.avatar,alt:n.data.author.name}),t.jsxs("div",{className:`${sn.comment_author_data_body} flex-column-normal-normal-none`,children:[t.jsx("p",{children:n.data.author.name}),t.jsx("p",{children:n.data.author.role}),t.jsx("p",{children:Z.getDifference(n.data.author.createdAt)}),t.jsx("p",{children:n.data.author.email})]})]}):t.jsx("div",{children:t.jsx(ue,{option:{size:"SMALL"},label:"No author found!"})})}),t.jsx(Ye,{propKey:"Likes:",children:t.jsxs("div",{className:`${sn.comment_list_container} flex-row-normal-normal-none`,children:[s>1?t.jsx(_e,{pagesCount:s,listKey:"coment-likes"}):null,0===a.length?t.jsx(ue,{option:{size:"SMALL"},label:"No body have liked!"}):t.jsx("ul",{className:sn.comment_list_body,children:a?.map((e=>t.jsx(d,{to:`/admin/user?id=${e._id}`,children:t.jsxs("li",{className:"flex-row-center-normal-medium",children:[t.jsx("img",{src:e.avatar,alt:e.name}),t.jsx("p",{children:e.name})]},e._id+100*Math.random())})))})]})})]})}})}const on={user_modal_user_content:"cc",user_modal_data_container:"dc"},ln={select_list_wrapper:"wc",select_list_title:"xc",select_list_item:"yc",select_list_item_selected:"zc"};function cn({isMultiple:e}){const[a,s]=n.useState([]),r=e=>a.includes(e);return{selected:a,reset:()=>{s([])},SelectInput:function({children:e,title:n}){return t.jsxs("ul",{className:`${ln.select_list_wrapper} main-content-container`,children:[t.jsx("li",{className:ln.select_list_title,children:n}),e]})},SelectItem:function({children:n,value:a}){return t.jsx("li",{onClick:()=>(n=>{s((t=>e&&t.includes(n)?t.filter((e=>e!==n)):e?[...t,n]:t[0]===n?[]:[n]))})(a),className:`${ln.select_list_item} ${r(a)?ln.select_list_item_selected:""}`,children:n})}}}function dn(){const e=S(),n=cn({}),a=cn({}),{submit:s,reset:r}=D([]),{mutate:o,isMutating:i}=Q({deps:[]}),l=parseInt(e.get("user-content")||"0"),c=parseInt(e.get("my-likes")||"0"),m=10*l,u=m+10,p=10*c,_=p+10,x=t=>{o({key:[`user-${e.get("page")||0}`],request:async s=>{const o=0===n.selected.length?void 0:n.selected[0],i=0===a.selected.length?void 0:a.selected[0],l=await A.post("/admin/user/update",X({...t,id:e.get("id"),role:o,ban:i}),{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`});return n.reset(),a.reset(),r(),e.remove(["user-edit-modal"]),{pagesCount:s.state?.pagesCount||0,data:s.state?.data.map((e=>e._id===l._id?{...e,...l}:e))||[]}}})};return t.jsx(Je,{Component:e=>{const r=e.data.myContent?.slice(m,u)||[],o=e.data.likedContent.slice(p,_)||[],l=Math.ceil(r.length/10),c=Math.ceil(o.length/10);return t.jsxs("div",{style:{width:"30rem",position:"relative"},className:"flex-column-normal-normal-small",children:[t.jsx(en,{children:t.jsxs(M,{style:{border:"none",width:"25rem",boxShadow:"none",padding:"1rem"},buttonLabel:"Change user data",onSubmit:s(x),children:[t.jsx(V,{name:"name",placeholder:"Write new user name",defaultValue:e.data.name}),t.jsxs(n.SelectInput,{title:"User roles:",children:[t.jsx(n.SelectItem,{value:"Admin",children:t.jsxs("div",{style:{background:"transparent"},className:"flex-row-center-normal-big",children:[t.jsx(E,{size:15}),t.jsx("p",{children:"Admin"})]})}),t.jsx(n.SelectItem,{value:"Creator",children:t.jsxs("div",{style:{background:"transparent"},className:"flex-row-center-normal-big",children:[t.jsx(C,{size:15}),t.jsx("p",{children:"Creator"})]})}),t.jsx(n.SelectItem,{value:"User",children:t.jsxs("div",{style:{background:"transparent"},className:"flex-row-center-normal-big",children:[t.jsx(R,{size:15}),t.jsx("p",{children:"User"})]})})]}),t.jsxs(a.SelectInput,{title:"Ban for:",children:[t.jsx(a.SelectItem,{value:"1",children:"1 Day"}),t.jsx(a.SelectItem,{value:"7",children:"7 Days"}),t.jsx(a.SelectItem,{value:"14",children:"14 Days"})]}),t.jsx(B,{label:"Change user avatar",name:"avatar",isChange:i})]})}),t.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"6px",position:"absolute",right:"-12.5%",zIndex:"-1",top:"-2%"},className:"flex-column-normal-normal-small",children:[t.jsx(qe,{optionAction:{actionType:"remove"}}),t.jsx(qe,{optionAction:{actionType:"edit"}})]}),t.jsx(Xe,{propKey:"ID:",propValue:e.data._id,useCopyBoard:!0}),t.jsx(Xe,{propKey:"Email:",propValue:e.data.email,useCopyBoard:!0}),t.jsx(Xe,{propKey:"Name:",propValue:e.data.name}),t.jsx(Xe,{propKey:"Role:",propValue:e.data.role}),t.jsx(Xe,{propKey:"Registrated:",propValue:Z.getDifference(e.data.createdAt)}),t.jsx(Xe,{propKey:"Ban for:",propValue:Z.getDifference(e.data.ban)||"Not baned!"}),t.jsx(Ye,{propKey:`${e.data.name} content:`,children:t.jsxs("ul",{className:on.user_modal_user_content,children:[l>1?t.jsx(_e,{pagesCount:l,listKey:"user-content"}):null,0===r.length?t.jsx(ue,{option:{flexCenterCenter:!0,size:"SMALL"},label:"User have no content!"}):r.map((e=>t.jsx(d,{to:`/admin/${Le(e,["viewedBy"])?"post":"comment"}?id=${e._id}`,children:t.jsxs("li",{className:"flex-column-normal-normal-none",children:[t.jsx("h5",{children:e.title}),t.jsxs("section",{className:`${on.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Likes:"}),t.jsx("p",{children:e.likedBy.length})]}),e.viewedBy?t.jsxs("section",{className:`${on.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Views:"}),t.jsx("p",{children:e.viewedBy.length})]}):null,e.comments?t.jsxs("section",{className:`${on.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Comments:"}),t.jsx("p",{children:e.comments.length})]}):null]},e._id)})))]})}),t.jsx(Ye,{propKey:`${e.data.name} likes:`,children:t.jsxs("ul",{className:on.user_modal_user_content,children:[c>1?t.jsx(_e,{pagesCount:c,listKey:"my-likes"}):null,0===o.length?t.jsx(ue,{option:{flexCenterCenter:!0,size:"SMALL"},label:"User have not liked some one content!"}):o.map((e=>t.jsxs("li",{className:"flex-column-normal-normal-none",children:[t.jsx("h5",{children:e.title}),t.jsxs("section",{className:`${on.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Likes:"}),t.jsx("p",{children:e.likedBy.length})]}),t.jsxs("section",{className:`${on.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Views:"}),t.jsx("p",{children:e.viewedBy.length})]}),t.jsxs("section",{className:`${on.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Comments:"}),t.jsx("p",{children:e.comments.length})]})]},e._id)))]})})]})}})}function mn(){const{tab:e}=w(),n=["post","comment","user"].includes(e||"")?e:"post";return t.jsx(t.Fragment,{children:"post"===n?t.jsx(an,{}):"comment"===n?t.jsx(rn,{}):"user"===n?t.jsx(dn,{}):null})}const un=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{tab:e}=w(),n=S(),a=parseInt(n.get("page")||"0"),{isMutating:s,isPending:r,data:o,prev:i,error:l}=Q({deps:[`${e}-${a}`],prev:[`${e}-${0===a?a:a-1}`],request:async()=>await A.get(`/admin/${e}/${a}`,{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`})}),c=o?.pagesCount||i?.pagesCount||0,d=Le(o?.data?.[0]||{},["avatar","email"]);return t.jsxs("div",{className:"flex-row-normal-normal-none",children:[t.jsx($e,{error:l}),t.jsx(mn,{}),s?t.jsx(he,{}):null,500===l?.code?null:403===l?.code?t.jsx(k,{to:"/"}):t.jsxs("div",{style:{paddingRight:"11rem",width:"100%"},className:"flex-column-normal-normal-medium",children:[r?t.jsx(q,{}):t.jsx(Ie,{pagesCount:c}),0===o?.data.length&&t.jsx(ue,{option:{flexCenterCenter:!0},label:"Nothing found..."}),r?t.jsx(J,{}):t.jsx("div",{className:Se,children:o&&o.data.map((e=>d?t.jsx(Ve,{user:e},e._id):t.jsx(Me,{contentData:e,authorData:e.author},e._id)))}),r?t.jsx(q,{}):t.jsx(Ie,{pagesCount:c})]}),t.jsx(Te,{})]})}},Symbol.toStringTag,{value:"Module"}));export{de as C,Z as D,ue as E,M as F,he as M,_e as P,z as R,V as T,Q as _,ee as a,Ie as b,I as c,q as d,Re as e,A as f,D as g,B as h,X as i,$e as j,ke as k,Ee as l,J as m,un as p,S as u};
