import{u as e,r as n,j as t,B as a,C as s,F as r,X as o,P as i,a as l,M as c,L as d,b as m,O as u,c as p,H as _,d as x,E as h,e as j,T as g,f,U as b,g as y,h as w,i as v,k as N,l as $,S as E,m as C,n as k,N as R}from"../react.js";const A={baseURL:"https://ruzzkiy-mir-api.onrender.com",formatURL:function(e){return this.baseURL?`${this.baseURL}${e}`:e},formatInit:function(e,n){let t={headers:n||{},body:e||{}};return!e||e instanceof FormData?t:(n||(t.headers={"Content-Type":"application/json"}),n&&!("Content-Type"in n)&&(t.headers={...t.headers,"Content-Type":"application/json"}),{...t,body:JSON.stringify(e)})},get:async function(e,n){const t=await fetch(this.formatURL(e),{headers:this.formatInit(void 0,n).headers}),a=await t.json();if(!t.ok)throw JSON.stringify(a);return await a},post:async function(e,n,t){const a=this.formatInit(n,t),s=await fetch(this.formatURL(e),{method:"POST",body:a.body,headers:a.headers}),r=await s.json();if(!s.ok)throw JSON.stringify(r);return await r}};const I={getOne:function(e){return function(){let e={};return document.cookie.split(/\;/).forEach((n=>{const[t,a]=n.split(/\=/);e={...e,[t.trim()]:a}})),e}()[e]},set:function(e,n){document.cookie=`${e}=${n};path=/;expires=${60*Date.now()*60*24*7};`}};function S(){const[n,t]=e();return{get:e=>n.get(e),set:e=>{const n=Object.entries(e);t((e=>{for(let[t,a]of n)e.set(t,a);return e}))},remove:e=>{t((n=>{for(let t=0;t<e.length;t++)n.delete(e[t]);return n}))}}}let L={isMax:function(e,n){if("string"==typeof n&&e<n.length)return!1},isMin:function(e,n){if("string"==typeof n&&e>n.length)return!1},isPattern:function(e,n){if(!RegExp(e.trim()).test(n))return!1},isEqualWith:function(e,n){if("string"==typeof e&&"string"==typeof n&&e!==n)return!1}},P={};function T(e){const[n,t,a]=e.split(":");return{func:n,value:t,error:a}}function D(e){for(let n=0;n<e.length;n++){const t=e[n];if(t.children.length>0)return D(t.children);const a=t;a.type&&(a.value="")}}function O(e){const[t,a]=n.useState({errors:void 0}),s=n.useRef(null),r=n.useRef(!1);return{submit:function(n){return new Proxy(n,{apply:function(n,t,o){const i=o[0];i.preventDefault(),s.current=i.currentTarget,r.current=!0;const l=Object.fromEntries(new FormData(i.currentTarget).entries()),c=function(e,n){for(let t in e){const a=e[t],s=a[0],r=a[1];if(Array.isArray(r)){const e=[];for(let t in r){if(!r?.[t])continue;const{error:a,func:o,value:i}=T(r[t]);"isEqualWith"===o?(!1===L[o](n[i],n[s])&&e.push(a),P[s]=e[0]||e[e.length-1]||void 0):(!1===L[o](i,n[s])&&e.push(a),P[s]=e[0]||e[e.length-1]||void 0)}}else{if(!a[1])return P;const e=a[0],{func:t,value:s,error:o}=T(r),i=L[t](s,n[e]);if(!(t in L))throw new ReferenceError(`Object 'Check' have no function with name ${t}`);P[e]=void 0===i?void 0:o}}return P}(e,l),d=0===Object.values(c).filter((e=>e)).length;a((e=>({...e,errors:c}))),d&&n(l)}})},reset:function(){if(!r)throw new Error("Form must be submitted first!");D(s.current.children)},formState:t}}const K={form_body:"Ga",form_error:"Ha",form_button:"Ia",form_button_pending:"Ja"};function M({onSubmit:e,children:n,errors:s,isPending:r,buttonLabel:o,className:i,title:l,style:c}){const d=r?"Submiting...":o||"Submit",m=r?`${K.form_button_pending} ${K.form_button}`:K.form_button;return t.jsxs("form",{onSubmit:e,className:`${i} flex-column-normal-normal-none`,children:[l?t.jsx("h3",{children:l}):null,t.jsxs("div",{style:c,className:`${K.form_body} main-content-container flex-column-center-center-medium`,children:[n,s&&s.length>0?t.jsx("div",{style:{width:"100%"},children:s.map((e=>t.jsxs("div",{className:`${K.form_error} flex-row-center-center-medium`,children:[t.jsx(a,{size:15}),t.jsx("p",{children:e},e)]})))}):null,o?t.jsx("button",{className:m,disabled:r,children:t.jsx("section",{className:"flex-row-center-center-medium",children:d})}):null]})]})}const V={text_input_container:"ra",text_input_error_icon:"sa",text_input_error_text_container:"ta",text_input_icon_hidden:"ua",text_input:"va",text_input_invalid:"wa"};function G({name:e,defaultValue:n,placeholder:a,errors:r,onInput:o,type:i}){const l=r?.[e]?V.text_input_error_icon:`${V.text_input_error_icon} ${V.text_input_icon_hidden}`,c=r?.[e]?`${V.text_input_invalid} ${V.text_input}`:V.text_input;return t.jsxs("div",{className:V.text_input_container,children:[t.jsx("input",{name:e,defaultValue:n,onInput:o,placeholder:a,type:i||"text",className:c}),t.jsx(s,{className:l}),t.jsx("div",{className:V.text_input_error_text_container,children:t.jsx("span",{children:r?.[e]})})]})}const U={file_input_label:"Ka",file_input_text:"La",file_input_uploaded_asset:"Ma",asset_input_buttons:"Na",asset_button:"Oa"};function B({name:e,label:a,asset:s,initValue:l,isChange:c}){const[d,m]=n.useState(l),u=n.useRef(null),p=n.useRef(!1),_=S(),x=["image/webp","image/jpg","image/png","image/jpeg","video/mp4"],h=()=>{u.current&&(u.current.value=""),m(void 0)};return n.useEffect((()=>{h()}),[c,_.get("is-open")]),t.jsxs(n.Fragment,{children:[t.jsx("input",{ref:u,accept:x.join(","),id:e,name:e,type:"file",onChange:e=>{const n=e.currentTarget.files[0];n.type.search("video")>-1?p.current=!0:p.current=!1,x.includes(n.type)&&(m(URL.createObjectURL(n)),s&&(s.current=n))}}),d?t.jsxs("div",{className:U.file_input_label,children:[p.current?t.jsx("video",{className:U.file_input_uploaded_asset,src:d}):t.jsx("img",{className:U.file_input_uploaded_asset,src:d,alt:"User uploaded avatar"}),t.jsxs("section",{className:`${U.asset_input_buttons} flex-column-normal-normal-medium`,children:[t.jsx("button",{className:`${U.asset_button} flex-row-center-center-none`,type:"button",onClick:h,children:t.jsx(o,{})}),t.jsx("label",{className:`${U.asset_button} flex-row-center-center-none`,htmlFor:e,children:t.jsx(i,{})})]})]}):t.jsx("label",{className:U.file_input_label,htmlFor:e,children:t.jsxs("section",{className:U.file_input_text,children:[t.jsx(r,{}),t.jsx("p",{children:a})]})})]})}function z(e){const n=new FormData;for(let[t,a]of Object.entries(e))n.append(t,a);return n}const X=n.createContext(void 0);function F({children:e}){const[a,s]=n.useState();return t.jsx(X.Provider,{value:{cache:a,change:s},children:e})}const H={pagination_loader_container:"f_",pagination_loader_button:"g_",loader:"h_"};function q(){return t.jsxs("div",{className:`${H.pagination_loader_container} flex-row-center-space-between-none`,children:[t.jsx("div",{style:{width:"4rem"},className:H.pagination_loader_button}),t.jsxs("div",{className:"flex-row-normal-normal-medium",children:[t.jsx("div",{className:H.pagination_loader_button}),t.jsx("div",{className:H.pagination_loader_button}),t.jsx("div",{className:H.pagination_loader_button}),t.jsx("div",{className:H.pagination_loader_button}),t.jsx("div",{className:H.pagination_loader_button})]}),t.jsx("div",{style:{width:"4rem"},className:H.pagination_loader_button})]})}const J={data_loader_container:"K_",data_loader_avatar:"L_",data_loader_animation:"M_",loader:"N_"};function W(){return t.jsx("div",{className:J.data_loader_container,children:[...Array(20)].map(((e,n)=>t.jsx("div",{style:{height:"fit-content",padding:"0.5rem"},className:"main-content-container",children:t.jsxs("div",{className:"flex-column-normal-normal-small",children:[t.jsxs("div",{className:"flex-row-normal-normal-small",children:[t.jsx("div",{className:`${J.data_loader_avatar} ${J.data_loader_animation}`}),t.jsxs("div",{style:{width:"100%"},className:"flex-column-normal-normal-small",children:[t.jsx("div",{style:{width:"50%",height:"100%",padding:"0.5rem"},className:J.data_loader_animation}),t.jsx("div",{style:{width:"75%",height:"1rem",padding:"0.5rem"},className:J.data_loader_animation})]})]}),t.jsxs("div",{className:"flex-row-normal-normal-small",children:[t.jsx("div",{style:{flexGrow:"1",height:"1.5rem"},className:J.data_loader_animation}),t.jsx("div",{style:{flexGrow:"1",height:"1.5rem"},className:J.data_loader_animation}),t.jsx("div",{style:{flexGrow:"1",height:"1.5rem"},className:J.data_loader_animation})]})]})},Math.random()*n+100)))})}function Q(e){const t=e.deps.join("-"),a=e.prev?.join("-"),s=n.useContext(X),r=s?.cache?.[t],o=s?.cache?.[a||"NO_DATA"]?.data;let i=n.useRef(),l=n.useRef(!0);async function c(){const n=s?.cache?.[t]?.data;if(!n&&e.request){s.change((e=>({...e,[t]:{...r,isPending:!0}})));try{const n=await e.request(e.deps);if(e.noCache)return i.current=n,void s.change((e=>({...e,[t]:{...r,isPending:!1}})));s.change((e=>({...e,[t]:{...r,isPending:!1,data:n}})))}catch(a){s.change((e=>({...e,[t]:{...r,isPending:!1,error:a instanceof Error?{code:503,message:"Service Unavailable!"}:JSON.parse(a)}})))}}else s.change((e=>({...e,[t]:{...r,isPending:!1,data:n}})));l.current=!1}return n.useEffect((()=>{(e.enabled||void 0===e.enabled)&&c()}),e.deps),{...r,data:e.noCache?i.current:r?.data,isPending:(d=r?.isPending,void 0===d||r.isPending),isFetching:l.current&&!r?.error,prev:o,mutate:async function(n){const{key:t,request:a}=n,r=s?.cache?.[n.key.join("-")];try{s.change((e=>({...e,[t.join("-")]:{...r,isPending:!1,isMutating:!0}})));const o=await a({deps:n.key,state:r?.data,removeCache:function(e){s?.change?.((n=>({...n,[e]:{...r,isPending:!1,data:void 0}})))}});if(!o)return;if(e.noCache)return i.current=o,void s?.change?.((e=>({...e,[t.join("-")]:{...r,isPending:!1,isMutating:!1}})));s?.change?.((e=>({...e,[t.join("-")]:{...r,isPending:!1,isMutating:!1,data:o}})))}catch(o){s.change((e=>({...e,[t.join("-")]:{...r,isPending:!1,isMutating:!1,error:JSON.parse(o)}})))}},request:c,changeError:function(e,n){s?.change?.((t=>({...t||{},[e.join("-")]:{...(t||{})?.[e.join("-")]||{},error:n}})))}};var d}function Y(e){return parseInt(String(Math.abs(e)))}const Z={getDifference:function(e){if(!e)return"";const n=function(e,n){const t=e-n;return{second:Y(t/1e3%60),minute:Y(t/1e3/60%60),hour:Y(t/36e5%24),day:Y(t/864e5%9),month:Y(t/6048e5%12),year:Y(t/72576e5%365)}}(Date.parse(e),Date.now());return n.year>0?`${n.year}:${n.month}`:n.month>0?`${n.month} months ${n.day} days ago!`:n.day>0?`${n.day} days ${n.hour} hourse ago!`:n.hour>0?`${n.hour} hourse ago!`:n.minute>0?`${n.minute} minutes ${n.second} seconds ago!`:n.second>0?`${n.second} seconds ago!`:void 0}};function ee(e){return Array.isArray(e)?e.map((e=>`${e[0].toUpperCase()}${e.slice(1,-1)}`)):`${e[0].toUpperCase()}${e.slice(1,e.length)}`}const ne="Xa",te="Ya",ae={LINK_REGEXP:/\[(.*?);(.*?)\]/g,IMAGE_REGEXP:/\((.*?);(.*?)\)/g,HEADER_REGEXP:/##(.*?)##/,BOLD_REGEXP:/#(.*?)#/g,VIDEO_REGEXP:/\[.+\.(mp4|mp3)\]/g,DEFAULT_REGEXP:/\[(.*?)\]/g,SECURE_PROTOCOL_REGEXP:/((blob:?.+https?)|https):\/{1,2}/g,SQUARE_BRACKETS_REGEXP:/^\[(.*)\]$/g,PAIR_BRACKETS_REGEXP:/\((.*?)\)/g},se={secureLink:function(e){return ae.SECURE_PROTOCOL_REGEXP.test(e)}},re={bold:e=>(ae.BOLD_REGEXP.lastIndex=0,ae.BOLD_REGEXP.test(e)),header:e=>(ae.HEADER_REGEXP.lastIndex=0,ae.HEADER_REGEXP.test(e)),img:e=>(ae.IMAGE_REGEXP.lastIndex=0,ae.IMAGE_REGEXP.test(e)),link:function(e){return ae.LINK_REGEXP.lastIndex=0,ae.LINK_REGEXP.test(e)},video:function(e){return ae.LINK_REGEXP.lastIndex=0,ae.VIDEO_REGEXP.test(e)}},oe={regexp:ae,kind:{BOLD:"BOLD",HEADER:"HEADER",IMG:"IMG",LINK:"LINK",LIST:"LIST",VIDEO:"VIDEO"},is:se,have:re,parseAs:{bold:function(e){return e.replace(ae.BOLD_REGEXP,"<b>$1</b>")},header:function(e){return e.replace(ae.HEADER_REGEXP,'<h1 class="title">$1</h1>')},img:function(e){const n=e.match(ae.IMAGE_REGEXP);let t=0,a=e;for(;n?.[t];){const e=n[t].replace(ae.PAIR_BRACKETS_REGEXP,"$1").split(/;/);a=a.replace(n[t],'<img class="img" src="'+e[1]+'"alt="'+e[0]+'">'),t++}return a},link:function(e){const n=e.match(ae.LINK_REGEXP);let t=0,a=e;for(;n?.[t];){const e=n[t].replace(ae.SQUARE_BRACKETS_REGEXP,"$1").split(/;/);a=a.replace(n[t],'<a class="link" href="'+e[1]+'">'+e[0]+"</a>"),t++}return a},video:function(e){return`\n        <div style="width: 100%" class="flex-row-center-center-none">\n          <video controls src=${e.replace(/\[(.+)\]/g,"$1")}></video>\n        </div>\n      `}}};function ie(e){if(!e)return"";let n=e.split("\\n"),t="";1===n.length&&(n=e.split("\n"));for(let a=0;a<n.length;a++)oe.have.header(n[a])&&(n[a]=oe.parseAs.header(n[a])),oe.have.bold(n[a])&&(n[a]=oe.parseAs.bold(n[a])),oe.have.link(n[a])&&(n[a]=oe.parseAs.link(n[a])),oe.have.img(n[a])&&(n[a]=oe.parseAs.img(n[a])),oe.have.video(n[a])&&(n[a]=oe.parseAs.video(n[a])),n[a]='<div class="container">'+n[a]+"</div><br/>",t+=n[a];return t}function le({content:e,className:a}){const s=n.useMemo((()=>ie(e||"")),[e]);return t.jsx("div",{className:`${ne} ${a} flex-column-flex-start-normal-none`,dangerouslySetInnerHTML:s?{__html:s}:void 0,children:0===s.length?t.jsxs("div",{className:`${te} flex-row-center-center-big`,children:[t.jsx(i,{}),t.jsx("p",{children:"Post is empty"})]}):null})}const ce={empty_container:"U_"};function de({label:e,option:n}){let a={fontSize:`${{SMALL:1,MEDIUM:1.25,LARGE:1.5}[n?.size||"MEDIUM"]}rem`,textAlign:{CENTER:"center",LEFT:"left",RIGHT:"right"}[n?.align||"CENTER"],height:{SMALL:"10%",MEDIUM:"50%",FULL:"100%"}[n?.height||"FULL"]};return n?.flexCenterCenter&&(a={...a,display:"flex",alignItems:"center",justifyContent:"center"}),t.jsx("div",{style:a,className:ce.empty_container,children:t.jsx("p",{children:e})})}const me={pagination_list_button:"Ea",pagination_curr_page:"Fa"};function ue({pagesCount:e,listKey:n}){const{pathname:a}=l(),s=S(),r=`${n||"list"}-page`,o=parseInt(s.get(r)||"0"),i=n=>{if("next"===n){const n=o+1>e-1?o:o+1;s.set({[r]:n})}else{const e=o-1<0?0:o-1;s.set({[r]:e})}},u=e=>{s.set({[r]:e})};return t.jsxs("section",{className:`${me.pagination_list_container} flex-row-normal-space-between-medium`,children:[t.jsx("button",{onClick:()=>i("preview"),className:`${me.pagination_list_button} flex-row-center-center-none`,children:t.jsx(c,{})}),t.jsxs("div",{className:"flex-row-normal-normal-none",children:[o-3>=0?t.jsx(d,{className:`${me.pagination_list_button} flex-row-center-center-none`,to:`${a}?${r}=0`,children:"..."}):null,[...Array(e)].map(((e,n)=>t.jsx("button",{onClick:()=>u(n),className:`${me.pagination_list_button} ${o===n?me.pagination_curr_page:""} flex-row-center-center-none`,children:n},n))).slice(o-(1===o?1:2),o),[...Array(e)].map(((e,n)=>t.jsx("button",{onClick:()=>u(n),className:`${me.pagination_list_button} ${o===n?me.pagination_curr_page:""} flex-row-center-center-none`,children:n},n))).slice(o,o+1),[...Array(e)].map(((e,n)=>t.jsx("button",{onClick:()=>u(n),className:`${me.pagination_list_button} ${o===n?me.pagination_curr_page:""} flex-row-center-center-none`,children:n},n))).slice(o+1,o+3),o+3<e?t.jsx(d,{className:`${me.pagination_list_button} flex-row-center-center-none`,to:`${a}?${r}=${e-1}`,children:"..."}):null]}),t.jsx("button",{onClick:()=>i("next"),className:`${me.pagination_list_button} flex-row-center-center-none`,children:t.jsx(m,{})})]})}const pe={mutating_loader_container:"ba",mutating_loader:"ca",left:"da",right:"ea"};function _e(){return t.jsx("div",{className:`${pe.mutating_loader_container} flex-row-center-center-none`,children:t.jsx("span",{className:pe.mutating_loader})})}const xe={pagination_button_style:"O_",pagination_button_disabled:"P_",pagination_container:"Q_",pagination_body:"R_",pagination_curr_page:"S_"};function he({pagesCount:e,disableOn:n}){const{pathname:a}=l(),s=S(),r=parseInt(s.get("page")||"0"),o=n?xe.pagination_button_disabled:"",i=n=>{if("next"===n){const n=r+1>e-1?r:r+1;s.set({page:n})}else{const e=r-1<0?0:r-1;s.set({page:e})}};return t.jsxs("div",{className:`${xe.pagination_container} flex-row-center-space-between-none`,children:[t.jsx("button",{className:`${xe.pagination_button_style} flex-row-center-center-none`,onClick:()=>i("preview"),children:t.jsx(c,{})}),t.jsxs("ul",{className:`${xe.pagination_body} flex-row-center-normal-small`,children:[r>=3?t.jsx(d,{tabIndex:-1,className:`${o} ${xe.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=0`,children:"..."}):null,[...Array(e)].map(((e,n)=>t.jsx("li",{children:t.jsx(d,{tabIndex:-1,className:n===r?`${o} ${xe.pagination_curr_page} ${xe.pagination_button_style} flex-row-center-center-none`:`${xe.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=${n}`,children:n})},n))).slice(r-(1===r?1:2),r),[...Array(e)].map(((e,n)=>t.jsx("li",{children:t.jsx(d,{tabIndex:-1,className:n===r?`${o} ${xe.pagination_curr_page} ${xe.pagination_button_style} flex-row-center-center-none`:`${xe.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=${n}`,children:n})},n))).slice(r,r+1),[...Array(e)].map(((e,n)=>t.jsx("li",{children:t.jsx(d,{tabIndex:-1,className:n===r?`${o} ${xe.pagination_curr_page} ${xe.pagination_button_style} flex-row-center-center-none`:`${xe.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=${n}`,children:n})},n))).slice(r+1,r+3),r<=e-4?t.jsx(d,{tabIndex:-1,className:`${o} ${xe.pagination_button_style} flex-row-center-center-none`,to:`${a}?page=${e-1}`,children:"..."}):null]}),t.jsx("button",{className:`${xe.pagination_button_style} flex-row-center-center-none`,onClick:()=>i("next"),children:t.jsx(m,{})})]})}const je="ya",ge="za",fe="Aa",be="Ba",ye="Ca",we="Da",ve={modal_error_container:"fa",modal_error_body:"ga",modal_error_header:"ha",modal_error_text:"ia",modal_error_code:"ja"};function Ne({error:e,removeError:a}){const s=S(),r=JSON.parse(s.get("is-error-modal-open")||"false");return n.useEffect((()=>{e&&s.set({"is-error-modal-open":!0})}),[e]),t.jsx("div",{style:{display:r&&e?"flex":"none"},className:`${ve.modal_error_container} flex-row-center-center-none`,children:t.jsxs("div",{className:`${ve.modal_error_body} flex-column-normal-normal-none`,children:[t.jsxs("div",{className:`${ve.modal_error_header} flex-row-center-space-between-none`,children:[t.jsxs("div",{className:"flex-row-center-center-medium",children:[t.jsx(u,{size:17}),t.jsx("p",{children:"Some error!"})]}),t.jsx(o,{onClick:()=>{s.remove(["is-error-modal-open"]),a&&a()},size:17})]}),t.jsxs("div",{className:ve.modal_error_text,children:[t.jsxs("p",{className:ve.modal_error_code,children:[e?.code,"!"]}),t.jsx("p",{children:e?.message}),t.jsxs("div",{style:{flexWrap:"wrap",rowGap:"0rem"},className:"flex-row-normal-normal-small",children:[t.jsx("button",{onClick:()=>{window.location.reload()},children:"Refresh"}),t.jsx("p",{children:"the page or write a"}),t.jsx(d,{to:"/",children:"E-mail."})]})]})]})})}const $e=n.memo((function({placeholder:e,defaultValue:a,getValue:s}){const[o,i]=n.useState(a),[l,c]=n.useState(),[d,m]=n.useState(),[u,j]=n.useState(),g=n.useRef(),f=n.useRef(null),b=n.useRef(!1),y=S(),w=JSON.parse(y.get("is-open")||"false"),v=JSON.parse(y.get("is-preview")||"false"),N=n.useCallback((async()=>{const e=function(e){let n={};return e.alt||(n={...n,alt:"Alt is required filed!"}),oe.is.secureLink(e.url||"")||e.url||e.asset||(n={...n,url:"URL is not valid!"}),(e.url||"")?.length>0&&e.asset&&(n={...n,url:"Url or Data url is defined!"}),n}({alt:/video/g.test(g.current?.type||"")?"placeholder":d,url:u,asset:g.current}),n=f.current.selectionEnd;if(c(e),!(Object.entries(e).filter((e=>e)).length>0)){if(g.current){b.current=!0;const e=new FormData;let a;e.append("file",g.current);try{a=await async function(e){try{return await A.post("/api/upload",e)}catch(n){throw new Error("Error by uploading img!")}}(e)}catch(t){b.current=!1,c({"upload-error":l.message})}if(/video/g.test(g.current?.type||"")){const e=`${o.substring(0,n)}[${a.assetURL}]${o.substring(n,o.length)}`;i(e),s&&s(e)}else{const e=`${o.substring(0,n)}(${d};${a.assetURL})${o.substring(n,o.length)}`;i(e),s&&s(e)}b.current=!1}else{const e=`${o.substring(0,n)}(${d};${u})${o.substring(n,o.length)}`;i(e),s&&s(e)}m(""),j(""),c({}),g.current=void 0,y.set({"is-open":!1})}}),[d,u,g]);return n.useEffect((()=>{i(a||""),s&&s(a||"")}),[a]),t.jsxs(n.Fragment,{children:[b.current?t.jsx(_e,{}):null,t.jsx(Ne,{error:l?.["upload-error"]}),t.jsxs("div",{className:be,children:[t.jsx("div",{className:w?`${je} flex-row-center-center-none`:`${je} ${fe} flex-row-center-center-none`,children:t.jsxs("div",{className:`${ge} main-content-container flex-column-normal-normal-small`,children:[t.jsx(G,{errors:l,onInput:e=>{j(e.currentTarget.value)},defaultValue:u||"",name:"url",type:"text",placeholder:"Put you img URL here!"}),t.jsx(G,{errors:l,onInput:e=>{m(e.currentTarget.value)},defaultValue:d||"",name:"alt",type:"text",placeholder:"Put img Alt attributte here!"}),t.jsx(B,{label:"Upload img!",name:"uploadImg",asset:g,initValue:u}),t.jsx("button",{disabled:b.current,type:"button",onClick:N,children:"Add Link"}),t.jsx("button",{type:"button",onClick:()=>{m(""),j(void 0),c({}),y.set({"is-open":!1}),g.current=void 0,s&&s("")},children:"Stop"})]})}),t.jsxs("section",{children:[t.jsx("button",{disabled:v,onClick:()=>{const e=f.current.selectionStart,n=f.current.selectionEnd,t=o.substring(e,n),a=o.replace(t,`#${t}#`);i(a),s&&s(a)},type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(p,{})}),t.jsx("button",{disabled:v,onClick:()=>{const e=f.current.selectionStart,n=f.current.selectionEnd,t=o.substring(e,n),a=o.replace(t,`##${t}##`);i(a),s&&s(a)},type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(_,{})}),t.jsx("button",{disabled:v,onClick:()=>{const e=f.current.selectionEnd,n=`${o.substring(0,e)}[LINK STRING;LINK URL]${o.substring(e,o.length)}`;i(n),s&&s(n)},type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(x,{})}),t.jsx("button",{disabled:v,onClick:()=>{y.set({"is-open":!0})},type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(r,{})}),t.jsx("button",{onClick:()=>{const e=JSON.parse(y.get("is-preview")||"false");y.set({"is-preview":!e})},type:"button",className:`${we} flex-row-center-center-none`,children:t.jsx(h,{})})]}),v?t.jsx(le,{content:o}):t.jsx("textarea",{className:ye,placeholder:e,onChange:e=>{i(e.currentTarget.value),s&&s(e.currentTarget.value)},ref:f,value:o,rows:(o?.split(/\n/)?.length||0)+1})]})]})})),Ee={tag_list:"ka",tag_item:"la"};function Ce({removeTag:e,tags:n}){return t.jsx("ul",{className:`${Ee.tag_list} flex-row-flex-start-normal-small`,children:n.map((n=>n.trim()?t.jsx("li",{onClick:()=>e(n),className:Ee.tag_item,children:n},n):null))})}function ke({getTags:e,placeholder:a,value:s}){const[r,o]=n.useState(s||[]);return t.jsxs(n.Fragment,{children:[t.jsx(G,{name:"tags",onInput:n=>{const t=n.currentTarget.value.split(/\,/);o(t),e(t)},placeholder:a,defaultValue:r.join(",")}),t.jsx(Ce,{removeTag:n=>{o((t=>{const a=t.filter(((e,a)=>a!==t.indexOf(n)));return e(a),a}))},tags:r})]})}const Re="_";function Ae(e,n){if("object"!=typeof e||Array.isArray(e))return!1;for(let t=0;t<n.length;t++)if(Object.hasOwn(e,n[t]))return!0;return!1}const Ie={admin_side_menu_list_container:"x_",admin_side_menu_body:"y_"};function Se(){const e=j(),n=n=>{e(`/admin/${n}`)};return t.jsxs("div",{className:Ie.admin_side_menu_list_container,children:[t.jsx("div",{className:Ie.admin_side_menu_body,children:t.jsxs("section",{onClick:()=>n("post"),className:"flex-row-center-normal-medium",children:[t.jsx(g,{}),t.jsx("p",{children:"Posts"})]})}),t.jsx("div",{className:Ie.admin_side_menu_body,children:t.jsxs("section",{onClick:()=>n("comment"),className:"flex-row-center-normal-medium",children:[t.jsx(f,{}),t.jsx("p",{children:"Comments"})]})}),t.jsx("div",{className:Ie.admin_side_menu_body,children:t.jsxs("section",{onClick:()=>n("user"),className:"flex-row-center-normal-medium",children:[t.jsx(b,{}),t.jsx("p",{children:"Users"})]})})]})}const Le={content_author_avatar:"B_",content_author_name:"C_",content_author_registrated:"D_",content_content:"E_",content_no_data_about_author:"F_"},Pe={data_wrapper_container:"Ra"};function Te({children:e,id:n}){const a=S();return t.jsx("div",{onClick:()=>{a.set({id:n})},className:`${Pe.data_wrapper_container} main-content-container`,children:e})}function De({contentData:e,authorData:n}){return t.jsx(Te,{id:e._id,children:t.jsxs("div",{style:{justifyContent:"space-between"},className:"flex-column-normal-normal-medium",children:[n?t.jsxs("div",{className:"flex-row-normal-normal-medium",children:[t.jsx("img",{className:Le.content_author_avatar,src:n.avatar,alt:n.name}),t.jsxs("div",{className:"flex-column-normal-norma-none",children:[t.jsx("p",{className:Le.content_author_name,children:n.name}),t.jsx("p",{className:Le.content_author_registrated,children:Z.getDifference(e.createdAt)})]})]}):t.jsxs("div",{className:`${Le.content_no_data_about_author} flex-row-center-normal-medium`,children:[t.jsx(y,{}),t.jsxs("div",{children:[t.jsx("p",{children:"Author not found!"}),t.jsx("p",{className:Le.content_author_registrated,children:Z.getDifference(e.createdAt)})]})]}),t.jsx("p",{className:Le.content_content,children:e.content})]})})}const Oe={user_preview_author:"G_",user_preview_name:"H_",user_preview_registrated:"I_",user_preview_some_data:"J_"};function Ke({user:e}){const n="Admin"===e.role?"#F48023":"#1682FD";return t.jsx(Te,{id:e._id,children:t.jsxs("div",{className:"flex-column-normal-normal-none",children:[t.jsxs("div",{className:"flex-row-normal-normal-medium",children:[t.jsx("img",{className:Oe.user_preview_author,src:e.avatar,alt:e.name}),t.jsxs("div",{children:[t.jsx("p",{className:Oe.user_preview_name,children:e.name}),t.jsx("p",{className:Oe.user_preview_registrated,children:Z.getDifference(e.createdAt)})]})]}),t.jsxs("div",{className:`${Oe.user_preview_some_data} flex-row-normal-normal-none`,children:[t.jsxs("section",{className:"flex-row-normal-normal-medium",children:[t.jsx("p",{children:"Content:"}),t.jsx("p",{children:(e.myContent||[]).length})]}),t.jsxs("section",{className:"flex-row-normal-normal-medium",children:[t.jsx("p",{children:"Liked:"}),t.jsx("p",{children:(e.likedContent||[]).length})]}),t.jsxs("section",{className:"flex-row-normal-normal-medium",children:[t.jsx("p",{children:"Role:"}),t.jsx("p",{style:{color:n},children:e.role})]})]})]})})}const Me={post_list_container:"Sa",post_list_body:"Ta",post_auhtor_container:"Ua",post_author_data_body:"Va"},Ve={data_simple_container:"Ac",data_simple_key:"Bc",data_simple_copyied:"Cc"};function Ge({propKey:e,propValue:a,useParser:s,useCopyBoard:r}){const[o,i]=n.useState(void 0);return n.useEffect((()=>{o&&setTimeout((()=>i(!1)),200)}),[o]),t.jsxs("section",{className:`${Ve.data_simple_container} flex-row-center-space-between-none`,children:[t.jsx("p",{className:Ve.data_simple_key,children:e}),t.jsxs("div",{className:"flex-row-center-center-medium",children:[s?t.jsx("span",{className:"flex-row-center-center-none",dangerouslySetInnerHTML:{__html:ie(a)}}):t.jsx("p",{className:Ve.data_simple_value,children:a}),r?t.jsx(w,{className:o?Ve.data_simple_copyied:"",onClick:async()=>{await navigator.clipboard.writeText(a),i(!0)},size:15}):null]})]})}const Ue={modal_wrapper_container:"dc",modal_wrapper_body:"ec",modal_wrapper_header:"fc"},Be={data_modal_wrapper_container:"Dc",data_modal_wrapper_data_body:"Ec",data_modal_wrapper_loader_animation:"Fc",loader:"Gc"},ze={admin_action_button:"tc"};function Xe({optionAction:e}){const[a,s]=n.useState(!1),r=S(),o=j(),{tab:l}=v(),c=["user","comment","post"].includes(l||"")?l:"post",d=r.get("id"),m=parseInt(r.get("page")||"0"),{mutate:u}=Q({deps:[]}),p={remove:{icon:t.jsx(N,{color:a?"#8a0000":"white"}),color:"#8a0000"},edit:{icon:t.jsx(i,{color:a?"#F48023":"white"}),color:"#F48023"}},_={backgroundColor:p[e.actionType].color,border:`1px solid ${p[e.actionType].color}`},x=e=>{"mouseleave"===e.type?s(!1):s(!0)};return t.jsx("button",{onMouseEnter:x,onMouseLeave:x,onClick:()=>{if("edit"===e.actionType)return r.set({[`${l}-edit-modal`]:!0});u({key:[`${c}-${m}`],request:async e=>{const n=await A.post(`/admin/remove/${ee(l)}/${d}`,{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`});return 1===e.state?.data.length?o(`/admin/${l}?page=${m-1<=0?0:m-1}`):o(`/admin/${l}?page=${m}`),{pagesCount:e.state?.pagesCount||0,data:e.state?.data.filter((e=>e._id!==n._id))||[]}}})},style:_,className:`${ze.admin_action_button}`,children:t.jsx("section",{className:"flex-row-center-center-none",children:p[e.actionType].icon})})}function Fe(){return t.jsxs("div",{className:`${Be.data_modal_wrapper_container} flex-column-normal-normal-medium`,children:[t.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"6px",position:"absolute",right:"-15%",zIndex:"-1",top:"-2%"},className:"flex-column-normal-normal-small",children:[t.jsx(Xe,{optionAction:{actionType:"remove"}}),t.jsx(Xe,{optionAction:{actionType:"edit"}})]}),t.jsxs("div",{className:`${Be.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"2rem"},className:`${Be.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"11rem"},className:`${Be.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${Be.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"5rem"},className:`${Be.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"9rem"},className:`${Be.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${Be.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"3rem"},className:`${Be.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"6rem"},className:`${Be.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${Be.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"4rem"},className:`${Be.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"11rem"},className:`${Be.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${Be.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"3.5rem"},className:`${Be.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"5rem"},className:`${Be.data_modal_wrapper_loader_animation}`})]}),t.jsxs("div",{className:`${Be.data_modal_wrapper_data_body} flex-row-normal-space-between-none`,children:[t.jsx("div",{style:{width:"4rem"},className:`${Be.data_modal_wrapper_loader_animation}`}),t.jsx("div",{style:{width:"3rem"},className:`${Be.data_modal_wrapper_loader_animation}`})]})]})}function He({Component:e}){const a=S(),{tab:s}=v(),r=["comment","post","user"].includes(s||"")?s:"post",i=a.get("id"),l=a.get("page")||"0",{data:c,isPending:d}=Q({deps:[`${r}-${l}`]}),m=c?.data&&c.data.find((e=>e._id===i));return t.jsxs(n.Fragment,{children:[m||!i||d?null:t.jsx(Ne,{error:{code:404,message:`${ee(r)} not found!`}}),i?t.jsx("div",{className:`${Ue.modal_wrapper_container} flex-row-center-center-none`,children:t.jsxs("div",{className:`${Ue.modal_wrapper_body} main-content-container flex-column-normal-normal-none`,children:[t.jsxs("section",{className:`${Ue.modal_wrapper_header} flex-row-center-space-between-none`,children:[t.jsx("p",{children:ee(r)}),t.jsx(o,{onClick:()=>{a.remove(["id"])},size:17})]}),d?t.jsx(Fe,{}):m?e({data:m}):null]})}):null]})}const qe={burger_data_wrapper_container:"ic",burger_data_wrapper_key:"jc"};function Je({propKey:e,children:a}){const[s,r]=n.useState(!1),o=n.useRef(null),i=n.useRef(0),l=n.cloneElement(a,{ref:o});return n.useEffect((()=>{o.current&&(i.current=o.current.getBoundingClientRect().height+7)}),[]),t.jsxs("div",{className:qe.burger_data_wrapper_container,children:[t.jsx("p",{onClick:()=>{r((e=>!e))},className:qe.burger_data_wrapper_key,children:e}),t.jsx("div",{style:{height:s?i.current:0,overflow:"auto",maxHeight:"15rem",transition:"all 0.2s ease"},children:l})]})}const We={data_edit_modal_wrapper:"gc",data_edit_modal_header:"hc"};function Qe({children:e}){const n=S(),{tab:a}=v(),s=JSON.parse(n.get(`${a}-edit-modal`)||"false");return t.jsx("div",{style:{display:s?"flex":"none"},className:`${We.data_edit_modal_wrapper} flex-row-center-center-none`,children:t.jsxs("div",{className:"main-content-container",children:[t.jsxs("div",{className:`${We.data_edit_modal_header} flex-row-center-space-between-none`,children:[t.jsxs("p",{children:["Edit ",ee(a)]}),t.jsx(o,{onClick:()=>{n.remove([`${a}-edit-modal`])},size:17})]}),e]})})}const Ye={checkbox_default_input:"wc",checkbox_body:"xc",checkbox_custom_checkbox_wrapper:"yc",checkbox_custom_checkbox_body:"zc"};function Ze({defaultValue:e,label:n,name:a}){return t.jsx("div",{style:{width:"100%"},className:"flex-row-center-normal-none",children:t.jsxs("label",{className:`${Ye.checkbox_body} flex-row-center-normal-medium`,children:[t.jsx("input",{name:a,className:Ye.checkbox_default_input,type:"checkbox",defaultChecked:e}),t.jsxs("p",{className:Ye.checkbox_custom_checkbox_wrapper,children:[t.jsx("p",{className:Ye.checkbox_custom_checkbox_body}),t.jsx($,{})]}),n]})})}function en(){const e=n.useRef([]),a=n.useRef(),s=S(),{submit:r,reset:o}=O([]),{mutate:i}=Q({deps:[]}),l=parseInt(s.get("views-page")||"0"),c=parseInt(s.get("likes-page")||"0"),m=10*l,u=m+10,p=10*c,_=p+10,x=n=>{i({key:[`post-${s.get("page")||0}`],request:async t=>{const r=await A.post("/admin/post/update",{...n,tags:e.current,content:a.current,id:s.get("id")},{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`});return o(),s.remove(["post-edit-modal"]),{pagesCount:t.state?.pagesCount||0,data:t.state?.data.map((e=>e._id===r._id?{...e,...r}:e))||[]}}})},h=e=>{a.current=e},j=n=>{e.current=n};return t.jsx(He,{Component:e=>{const n=e.data.viewedBy?.slice(m,u)||[],a=e.data.likedBy.slice(p,_)||[],s=Math.ceil(n.length/10),o=Math.ceil(a.length/10);return t.jsxs("div",{style:{width:"30rem",position:"relative"},className:"flex-column-normal-normal-small",children:[t.jsx(Qe,{children:t.jsxs(M,{style:{border:"none",width:"30rem",boxShadow:"none",padding:"1rem"},onSubmit:r(x),buttonLabel:"Change post data",children:[t.jsx(G,{name:"title",placeholder:"Write new post title",defaultValue:e.data.title}),t.jsx(Ze,{name:"isHidden",label:e.data.isHidden?"Show post":"Hidde post",defaultValue:!0}),t.jsx(ke,{placeholder:"Write new post tags",getTags:j,value:e.data.tags}),t.jsx($e,{placeholder:"Write new post content",defaultValue:e.data.content,getValue:h})]})}),t.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"6px",position:"absolute",right:"-12.5%",zIndex:"-1",top:"-2%"},className:"flex-column-normal-normal-small",children:[t.jsx(Xe,{optionAction:{actionType:"remove"}}),t.jsx(Xe,{optionAction:{actionType:"edit"}})]}),t.jsx(Je,{propKey:"Auhor:",children:e.data.author?t.jsxs(d,{to:`/admin/user?id=${e.data.author._id}`,className:`${Me.post_auhtor_container} flex-row-normal-normal-medium`,children:[t.jsx("img",{src:e.data.author.avatar,alt:e.data.author.name}),t.jsxs("div",{className:`${Me.post_author_data_body} flex-column-normal-normal-none`,children:[t.jsx("p",{children:e.data.author.name}),t.jsx("p",{children:e.data.author.role}),t.jsx("p",{children:Z.getDifference(e.data.author.createdAt)}),t.jsx("p",{children:e.data.author.email})]})]}):t.jsx("div",{children:t.jsx(de,{option:{size:"SMALL"},label:"No author found!"})})}),t.jsx(Je,{propKey:"Views:",children:t.jsxs("div",{className:`${Me.post_list_container} flex-column-normal-normal-none`,children:[s>1?t.jsx(ue,{pagesCount:s,listKey:"views"}):null,0===n.length?t.jsx(de,{option:{size:"SMALL"},label:"No body have viewed!"}):t.jsx("ul",{className:Me.post_list_body,children:n?.map((e=>t.jsx(d,{to:`/admin/user?id=${e._id}`,children:t.jsxs("li",{className:"flex-row-center-normal-medium",children:[t.jsx("img",{src:e.avatar,alt:e.name}),t.jsx("p",{children:e.name})]},`${e._id+100*Math.random()}`)})))})]})}),t.jsx(Je,{propKey:"Likes:",children:t.jsxs("div",{className:`${Me.post_list_container} flex-column-normal-normal-none`,children:[o>1?t.jsx(ue,{pagesCount:o,listKey:"likes"}):null,0===a.length?t.jsx(de,{option:{size:"SMALL"},label:"No body have liked!"}):t.jsx("ul",{className:Me.post_list_body,children:a?.map((e=>t.jsx(d,{to:`/admin/user?id=${e._id}`,children:t.jsxs("li",{className:"flex-row-center-normal-medium",children:[t.jsx("img",{src:e.avatar,alt:e.name}),t.jsx("p",{children:e.name})]},`${e._id+100*Math.random()}`)})))})]})}),t.jsx(Ge,{propKey:"ID:",propValue:e.data._id,useCopyBoard:!0}),t.jsx(Ge,{propKey:"Title:",propValue:e.data.title}),t.jsx(Ge,{propKey:"Is hidden:",propValue:e.data.isHidden?"Yes":"No"}),t.jsx(Ge,{propKey:"Tags:",propValue:e.data.tags?.join(", ")||"No tags"}),t.jsx(Ge,{propKey:"Created at:",propValue:Z.getDifference(e.data.createdAt)}),t.jsx(Ge,{propKey:"Updated at:",propValue:Z.getDifference(e.data.updatedAt)}),t.jsx(Ge,{propKey:"Content:",propValue:e.data.content,useParser:!0})]})}})}const nn={comment_list_container:"-c",comment_list_body:"ac",comment_auhtor_container:"bc",comment_author_data_body:"cc"};function tn(){const{submit:e,reset:a}=O([]),s=S(),r=n.useRef(),{mutate:o}=Q({deps:[]}),i=10*parseInt(s.get("comment-likes-page")||"0"),l=i+10,c=e=>{o({key:[`comment-${s.get("page")||0}`],request:async n=>{const t=await A.post("/admin/comment/update",{...e,content:r.current,id:s.get("id")},{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`});return a(),s.remove(["comment-edit-modal"]),{pagesCount:n.state?.pagesCount||0,data:n.state?.data.map((e=>e._id===t._id?{...e,...t}:e))||[]}}})},m=e=>{r.current=e};return t.jsx(He,{Component:n=>{const a=n.data.likedBy.slice(i,l)||[],s=Math.ceil((n.data.likedBy?.length||0)/10);return t.jsxs("div",{style:{width:"30rem",position:"relative"},className:"flex-column-normal-normal-small",children:[t.jsx(Qe,{children:t.jsxs(M,{style:{border:"none",width:"30rem",boxShadow:"none",padding:"1rem"},onSubmit:e(c),buttonLabel:"Change comment data",children:[t.jsx(Ze,{label:n.data.isHidden?"Show comment":"Hidde comment",name:"isHidden",defaultValue:n.data.isHidden}),t.jsx($e,{placeholder:"Write new comment content",defaultValue:n.data.content,getValue:m})]})}),t.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"6px",position:"absolute",right:"-12.5%",zIndex:"-1",top:"-2%"},className:"flex-column-normal-normal-small",children:[t.jsx(Xe,{optionAction:{actionType:"remove"}}),t.jsx(Xe,{optionAction:{actionType:"edit"}})]}),t.jsx(Ge,{propKey:"ID:",propValue:n.data._id,useCopyBoard:!0}),t.jsx(Ge,{propKey:"Written at:",propValue:Z.getDifference(n.data.createdAt)}),t.jsx(Ge,{propKey:"Is hidden:",propValue:n.data.isHidden?"Yes":"No"}),t.jsx(Ge,{propKey:"Content:",propValue:n.data.content,useParser:!0}),t.jsx(Je,{propKey:"Auhor:",children:n.data.author?t.jsxs(d,{to:`/admin/user?id=${n.data.author._id}`,className:`${nn.comment_auhtor_container} flex-row-normal-normal-medium`,children:[t.jsx("img",{src:n.data.author.avatar,alt:n.data.author.name}),t.jsxs("div",{className:`${nn.comment_author_data_body} flex-column-normal-normal-none`,children:[t.jsx("p",{children:n.data.author.name}),t.jsx("p",{children:n.data.author.role}),t.jsx("p",{children:Z.getDifference(n.data.author.createdAt)}),t.jsx("p",{children:n.data.author.email})]})]}):t.jsx("div",{children:t.jsx(de,{option:{size:"SMALL"},label:"No author found!"})})}),t.jsx(Je,{propKey:"Likes:",children:t.jsxs("div",{className:`${nn.comment_list_container} flex-row-normal-normal-none`,children:[s>1?t.jsx(ue,{pagesCount:s,listKey:"coment-likes"}):null,0===a.length?t.jsx(de,{option:{size:"SMALL"},label:"No body have liked!"}):t.jsx("ul",{className:nn.comment_list_body,children:a?.map((e=>t.jsx(d,{to:`/admin/user?id=${e._id}`,children:t.jsxs("li",{className:"flex-row-center-normal-medium",children:[t.jsx("img",{src:e.avatar,alt:e.name}),t.jsx("p",{children:e.name})]},e._id+100*Math.random())})))})]})})]})}})}const an={user_modal_user_content:"Za",user_modal_data_container:"_c"},sn={select_list_wrapper:"pc",select_list_title:"qc",select_list_item:"rc",select_list_item_selected:"sc"};function rn({isMultiple:e}){const[a,s]=n.useState([]),r=e=>a.includes(e);return{selected:a,reset:()=>{s([])},SelectInput:function({children:e,title:n}){return t.jsxs("ul",{className:`${sn.select_list_wrapper} main-content-container`,children:[t.jsx("li",{className:sn.select_list_title,children:n}),e]})},SelectItem:function({children:n,value:a}){return t.jsx("li",{onClick:()=>(n=>{s((t=>e&&t.includes(n)?t.filter((e=>e!==n)):e?[...t,n]:t[0]===n?[]:[n]))})(a),className:`${sn.select_list_item} ${r(a)?sn.select_list_item_selected:""}`,children:n})}}}function on(){const e=S(),n=rn({}),a=rn({}),{submit:s,reset:r}=O([]),{mutate:o,isMutating:i}=Q({deps:[]}),l=parseInt(e.get("user-content")||"0"),c=parseInt(e.get("my-likes")||"0"),m=10*l,u=m+10,p=10*c,_=p+10,x=t=>{o({key:[`user-${e.get("page")||0}`],request:async s=>{const o=0===n.selected.length?void 0:n.selected[0],i=0===a.selected.length?void 0:a.selected[0],l=await A.post("/admin/user/update",z({...t,id:e.get("id"),role:o,ban:i}),{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`});return n.reset(),a.reset(),r(),e.remove(["user-edit-modal"]),{pagesCount:s.state?.pagesCount||0,data:s.state?.data.map((e=>e._id===l._id?{...e,...l}:e))||[]}}})};return t.jsx(He,{Component:e=>{const r=e.data.myContent?.slice(m,u)||[],o=e.data.likedContent.slice(p,_)||[],l=Math.ceil(r.length/10),c=Math.ceil(o.length/10);return t.jsxs("div",{style:{width:"30rem",position:"relative"},className:"flex-column-normal-normal-small",children:[t.jsx(Qe,{children:t.jsxs(M,{style:{border:"none",width:"25rem",boxShadow:"none",padding:"1rem"},buttonLabel:"Change user data",onSubmit:s(x),children:[t.jsx(G,{name:"name",placeholder:"Write new user name",defaultValue:e.data.name}),t.jsxs(n.SelectInput,{title:"User roles:",children:[t.jsx(n.SelectItem,{value:"Admin",children:t.jsxs("div",{style:{background:"transparent"},className:"flex-row-center-normal-big",children:[t.jsx(E,{size:15}),t.jsx("p",{children:"Admin"})]})}),t.jsx(n.SelectItem,{value:"Creator",children:t.jsxs("div",{style:{background:"transparent"},className:"flex-row-center-normal-big",children:[t.jsx(C,{size:15}),t.jsx("p",{children:"Creator"})]})}),t.jsx(n.SelectItem,{value:"User",children:t.jsxs("div",{style:{background:"transparent"},className:"flex-row-center-normal-big",children:[t.jsx(k,{size:15}),t.jsx("p",{children:"User"})]})})]}),t.jsxs(a.SelectInput,{title:"Ban for:",children:[t.jsx(a.SelectItem,{value:"1",children:"1 Day"}),t.jsx(a.SelectItem,{value:"7",children:"7 Days"}),t.jsx(a.SelectItem,{value:"14",children:"14 Days"})]}),t.jsx(B,{label:"Change user avatar",name:"avatar",isChange:i})]})}),t.jsxs("div",{style:{background:"white",padding:"1rem",borderRadius:"6px",position:"absolute",right:"-12.5%",zIndex:"-1",top:"-2%"},className:"flex-column-normal-normal-small",children:[t.jsx(Xe,{optionAction:{actionType:"remove"}}),t.jsx(Xe,{optionAction:{actionType:"edit"}})]}),t.jsx(Ge,{propKey:"ID:",propValue:e.data._id,useCopyBoard:!0}),t.jsx(Ge,{propKey:"Email:",propValue:e.data.email,useCopyBoard:!0}),t.jsx(Ge,{propKey:"Name:",propValue:e.data.name}),t.jsx(Ge,{propKey:"Role:",propValue:e.data.role}),t.jsx(Ge,{propKey:"Registrated:",propValue:Z.getDifference(e.data.createdAt)}),t.jsx(Ge,{propKey:"Ban for:",propValue:Z.getDifference(e.data.ban)||"Not baned!"}),t.jsx(Je,{propKey:`${e.data.name} content:`,children:t.jsxs("ul",{className:an.user_modal_user_content,children:[l>1?t.jsx(ue,{pagesCount:l,listKey:"user-content"}):null,0===r.length?t.jsx(de,{option:{flexCenterCenter:!0,size:"SMALL"},label:"User have no content!"}):r.map((e=>t.jsx(d,{to:`/admin/${Ae(e,["viewedBy"])?"post":"comment"}?id=${e._id}`,children:t.jsxs("li",{className:"flex-column-normal-normal-none",children:[t.jsx("h5",{children:e.title}),t.jsxs("section",{className:`${an.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Likes:"}),t.jsx("p",{children:e.likedBy.length})]}),e.viewedBy?t.jsxs("section",{className:`${an.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Views:"}),t.jsx("p",{children:e.viewedBy.length})]}):null,e.comments?t.jsxs("section",{className:`${an.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Comments:"}),t.jsx("p",{children:e.comments.length})]}):null]},e._id)})))]})}),t.jsx(Je,{propKey:`${e.data.name} likes:`,children:t.jsxs("ul",{className:an.user_modal_user_content,children:[c>1?t.jsx(ue,{pagesCount:c,listKey:"my-likes"}):null,0===o.length?t.jsx(de,{option:{flexCenterCenter:!0,size:"SMALL"},label:"User have not liked some one content!"}):o.map((e=>t.jsxs("li",{className:"flex-column-normal-normal-none",children:[t.jsx("h5",{children:e.title}),t.jsxs("section",{className:`${an.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Likes:"}),t.jsx("p",{children:e.likedBy.length})]}),t.jsxs("section",{className:`${an.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Views:"}),t.jsx("p",{children:e.viewedBy.length})]}),t.jsxs("section",{className:`${an.user_modal_data_container} flex-row-normal-normal-big`,children:[t.jsx("p",{children:"Comments:"}),t.jsx("p",{children:e.comments.length})]})]},e._id)))]})})]})}})}function ln(){const{tab:e}=v(),n=["post","comment","user"].includes(e||"")?e:"post";return t.jsx(t.Fragment,{children:"post"===n?t.jsx(en,{}):"comment"===n?t.jsx(tn,{}):"user"===n?t.jsx(on,{}):null})}const cn=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{tab:e}=v(),n=S(),a=parseInt(n.get("page")||"0"),{isMutating:s,isPending:r,data:o,prev:i,error:l}=Q({deps:[`${e}-${a}`],prev:[`${e}-${0===a?a:a-1}`],request:async()=>await A.get(`/admin/${e}/${a}`,{Authorization:`Bearer ${I.getOne("PR_TOKEN")}`})}),c=o?.pagesCount||i?.pagesCount||0,d=Ae(o?.data?.[0]||{},["avatar","email"]);return t.jsxs("div",{className:"flex-row-normal-normal-none",children:[t.jsx(Ne,{error:l}),t.jsx(ln,{}),s?t.jsx(_e,{}):null,500===l?.code?null:403!==l?.code&&o?t.jsxs("div",{style:{paddingRight:"11rem",width:"100%"},className:"flex-column-normal-normal-medium",children:[r?t.jsx(q,{}):t.jsx(he,{pagesCount:c}),0===o?.data.length&&t.jsx(de,{option:{flexCenterCenter:!0},label:"Nothing found..."}),r?t.jsx(W,{}):t.jsx("div",{className:Re,children:o&&o.data.map((e=>d?t.jsx(Ke,{user:e},e._id):t.jsx(De,{contentData:e,authorData:e.author},e._id)))}),r?t.jsx(q,{}):t.jsx(he,{pagesCount:c})]}):t.jsx(R,{to:"/"}),t.jsx(Se,{})]})}},Symbol.toStringTag,{value:"Module"}));export{le as C,Z as D,de as E,M as F,_e as M,ue as P,F as R,$e as T,Q as _,ee as a,O as b,I as c,Ne as d,q as e,A as f,he as g,G as h,Ce as i,B as j,z as k,ke as l,W as m,cn as p,S as u};
