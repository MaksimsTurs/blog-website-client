import{c as e,r as t,j as s,p as n,a,L as o,q as i,h as r,P as l,E as c,s as d,X as m,g as u,t as _,H as p}from"../react.js";import{A as x,u as h,f as g,c as v,a as E,_ as f,D as j,l as w,b as N,P as R,E as y,d as A}from"./admin.js";function $(){const s=e(),n=t.useContext(x),a=h(),o=a.get("login-modal"),i=a.get("registration-modal");return{...n?.userState,create:async function(e){try{if(e.setSession)return n?.updateUserState({user:e.setSession,isAuthPending:!1,isLoading:!1});n?.updateUserState({isAuthPending:!1,isLoading:!0});const t=await g.post(e.apiURL,e.body);n?.updateUserState({isAuthPending:!1,isLoading:!1,error:void 0,user:t}),e?.setToken&&v.set("PR_TOKEN",t.token),e?.redirectURL&&s(e.redirectURL)}catch(W){n.updateUserState((t=>({...t,isAuthPending:!1,isLoading:!1,error:W instanceof Error?{code:503,message:"Service Unavailable!"}:JSON.parse(W)})))}},out:function(){n?.updateUserState({isAuthPending:!1,isLoading:!1}),v.set("PR_TOKEN","undefined")},clearError:function(){t.useEffect((()=>{n?.updateUserState((e=>({...e,error:void 0})))}),[o,i])}}}const P="j_",T="k_";function b({className:e,style:t}){return s.jsx("div",{style:t,className:`${T} ${e}`})}const k=t.memo((function({alt:e,classNames:a,src:o,styles:i}){const[r,l]=t.useState({isLoading:!0});return t.useEffect((()=>{(async()=>{try{await fetch(o||""),l({isLoading:!1,source:o})}catch(W){l({isLoading:!1})}})()}),[]),s.jsxs(t.Fragment,{children:[r.isLoading?s.jsx(b,{className:a?.loader,style:i?.loader}):r.source?null:s.jsx(n,{className:`${a?.img} ${P}`}),s.jsx("img",{src:o,alt:e,className:a?.img,style:{...i?.img,display:r.source&&!r.isLoading?"block":"none"}})]})})),I={post_loader_container:"Q_",post_loader_text:"R_",loader:"S_",post_loader_tag:"T_",post_loader_avatar:"U_"};function L(){return s.jsxs("div",{className:`${I.post_loader_container} main-content-container flex-column-normal-normal-medium`,children:[s.jsxs("div",{className:"flex-row-normal-normal-medium",children:[s.jsx("div",{className:I.post_loader_avatar}),s.jsxs("div",{className:"flex-column-normal-normal-medium",children:[s.jsx("div",{style:{width:"4rem"},className:I.post_loader_text}),s.jsx("div",{style:{width:"7rem"},className:I.post_loader_text})]})]}),s.jsx("div",{style:{width:"11rem"},className:I.post_loader_text}),s.jsxs("div",{className:"flex-column-normal-normal-medium",children:[s.jsx("div",{style:{width:"50%"},className:I.post_loader_text}),s.jsx("div",{style:{width:"20%"},className:I.post_loader_text})]}),s.jsxs("div",{className:"flex-row-normal-space-between-none",children:[s.jsxs("div",{className:"flex-row-normal-normal-medium",children:[s.jsx("div",{className:I.post_loader_tag}),s.jsx("div",{className:I.post_loader_tag}),s.jsx("div",{className:I.post_loader_tag})]}),s.jsxs("div",{className:"flex-row-normal-normal-medium",children:[s.jsx("div",{className:I.post_loader_tag}),s.jsx("div",{className:I.post_loader_tag}),s.jsx("div",{className:I.post_loader_tag})]})]})]})}function G(e){t.useEffect((()=>{e.title&&(document.title=e.title)}),[e]),t.useEffect((()=>{delete e.title;const t=Object.entries(e);for(let[e,s]of t){const t=document.createElement("meta");t.name=e,t.content=s,document.head.appendChild(t)}}),[])}function C({containersCount:e}){return G({title:"Home",description:"Hier kannst du alle letzt geschriebene posts ansehen."}),s.jsx("div",{className:"flex-column-normal-normal-small",children:[...Array(e||3)].map(((e,t)=>s.jsx(L,{},t)))})}const O={error_container:"d",error_body:"e",error_error:"f"};function D({code:e,message:t,underText:n}){return s.jsx("div",{className:`${O.error_container} flex-row-center-center-none`,children:s.jsxs("div",{className:O.error_body,children:[s.jsxs("div",{className:`${O.error_error} flex-column-normal-normal-none`,children:[s.jsxs("p",{children:["Error - ",e,"!"]}),s.jsx("p",{children:t})]}),n?s.jsx("p",{children:n}):null]})})}const S={post_content_container:"sa",post_title:"ta",post_short_view:"ua",post_content_date:"va",post_tags_statistic_container:"wa",post_data:"xa",post_hidden:"ya",post_statistic_data:"za",post_liked:"Aa",like:"Ba"},X={post_header:"Qc",post_header_author_not_defined:"Rc",post_action_button:"Sc",post_action_container:"Tc",post_create_date:"Uc"};function H({user:t,createdAt:n,type:m,contentID:u,postID:_,content:p,tags:x,title:R,isHidden:y}){const A=E(),$=h(),P=e(),{mutate:T,changeError:b}=f({deps:[]}),{pathname:I}=a(),L=A.roleAndEqual(["Admin","Creator"],"_id",t?._id).permited(),G=I.search("/post/")>-1,C=I.search("/")>-1,O=I.search("/search")>-1,D="preview"===m?"post":m,S=parseInt($.get("page")||"0"),H=e=>{const t=G&&"comment"===m?[`post-${_}-comments-${$.get("page")||0}`]:C?["all-posts"]:[];if(!A.role(["Creator","Admin"]).permited())return b(t,{code:403,message:"You have no edit and remove permission!"});if("edit"===e){if(A.role(["Creator"]).permited())return w.set(u,{content:p,tags:x,title:R,isHidden:y,contentType:D,onPage:S,onPost:_}),P(`/write-post?is-edit=true&content-id=${u}`);if(A.role(["Admin"]).permited())return P(`/admin/${D}?id=${u}&${D}-edit-modal=true`)}T({key:t,request:async t=>{if("remove"===e){const e=await g.get(`/admin/remove/${N(D)}/${u}`,{Authorization:`Bearer ${v.getOne("PR_TOKEN")}`});if(G&&"comment"===m){const s=t.state||{comments:[],pagesCount:0};if(1===s.comments.length&&s.pagesCount>=1){for(let e=s.pagesCount-1;e>=0;e--)e!==S&&t.removeCache(`post-${_}-comments-${e}`);return P(`/post/${_}?page=${+S-1}`),{pagesCount:0,comments:[]}}return{...s,comments:s.comments.filter((t=>t._id!==e._id))}}if(C){return(t.state||[]).filter((t=>t._id!==e._id))}}const s=await g.post(`/admin/${D}/update`,{id:u,isHidden:"hidde"===e},{Authorization:`Bearer ${v.getOne("PR_TOKEN")}`});if(G){const e=t.state||{pagesCount:0,comments:[]};return{...e,comments:e.comments.map((e=>e._id===s._id?{...e,...s}:e))}}return(t.state||[]).map((e=>e._id===s._id?s:e))}})},K=j.getDifference(n).getSortDate({year:"[year] year [month] months ago!",month:"[month] month [day] days ago!",day:"[day] day [hour] hours ago!",hour:"[hour] hour [minute] minutes ago!",minute:"[minute] minutes [second] seconds ago!",second:"[second] seconds ago!"});return s.jsxs("div",{className:`${X.post_header} flex-row-center-space-between-none`,children:[t?s.jsxs("div",{className:"flex-row-center-normal-medium",children:[s.jsx(k,{styles:{svg:{width:"2rem",height:"2rem"},img:{width:"2rem",height:"2rem"}},src:t?.avatar,alt:t?.name||"User avatar"}),s.jsxs("div",{className:X.post_author,children:[s.jsx(o,{to:`/user/${t?._id}`,children:t?.name}),s.jsx("p",{className:X.post_create_date,children:K})]})]}):s.jsxs("div",{className:`${X.post_header_author_not_defined} flex-row-center-normal-medium`,children:[s.jsx(i,{}),s.jsx("p",{children:"Author is possibly deleted!"})]}),L&&!O?s.jsxs("button",{className:X.post_action_button,children:[s.jsx("svg",{viewBox:"0 0 128 512",children:s.jsx("path",{d:"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"})}),s.jsxs("ul",{className:`${X.post_action_container} flex-column-normal-normal-none`,children:[s.jsxs("li",{onClick:()=>H("remove"),className:"flex-row-center-normal-medium",children:[s.jsx(r,{}),s.jsx("p",{children:"Remove"})]}),s.jsxs("li",{onClick:()=>H("edit"),className:"flex-row-center-normal-medium",children:[s.jsx(l,{}),s.jsx("p",{children:"Edit"})]}),s.jsxs("li",{onClick:()=>H(y?"show":"hidde"),className:"flex-row-center-normal-medium",children:[y?s.jsx(c,{}):s.jsx(d,{}),s.jsx("p",{children:y?"Show":"Hidden"})]})]})]}):null]})}const K={post_wrapper_container:"Oc",post_is_hidden:"Pc"};function U({children:e,className:t}){return s.jsxs("section",{className:`${K.post_wrapper_container} ${t} main-content-container`,children:[t?s.jsxs("div",{className:`${K.post_is_hidden} flex-row-center-center-medium`,children:[s.jsx(d,{}),s.jsx("p",{children:"Hidden"})]}):null,s.jsx("div",{style:{padding:"1rem"},children:e})]})}const B={post_tags:"Vc"};function M({tags:e}){return s.jsx("div",{className:`${B.post_tags} flex-row-normal-normal-medium`,children:e.map((e=>e.trim()?s.jsx(o,{to:`/search?tag=${e}`,children:e},e):null))})}const q={content_viewer_container:"fe",content_viewer_post_empty:"ge",content_view_parse_error:"he"},z={LINK_REGEXP:/\[(.*?);(.*?)\]/g,IMAGE_REGEXP:/\((.*?);(.*?);?(.*?)\)/g,QUOTE_BRACKETS_REGEXP:/\(?(.*?)\)?\"{2}([^""]+?)\"{2}/gm,BOLD_REGEXP:/#(.*?)#/g,HEADER_REGEXP_1:/#{2}(.*?)#{2}/,HEADER_REGEXP_2:/#{3}(.*?)#{3}/,VIDEO_REGEXP:/\(\[(.+)\]\)/g,DEFAULT_REGEXP:/\[(.*?)\]/g,SQUARE_BRACKETS_REGEXP:/^\[(.*)\]$/g,PAIR_BRACKETS_REGEXP:/\((.*?)\)/g,TAG_BRACKET_REGEXP:/<.*>(.*)<.*>/,HTTPS_PROTOCOL_REGEXP:/((blob:?.+https?)|https):\/{2}/g,HTML_TAG_WITH_HANDLERS_REGEXP:/<.*? on.* .*?>/gm,SCRIPT_TAG_REGEXP:/<script.*?>([\s\S]*?)<\/script>/gm},Q={URL:function(e){return z.HTTPS_PROTOCOL_REGEXP.lastIndex=0,z.HTTPS_PROTOCOL_REGEXP.test(e)},DOM:function(e){return z.SCRIPT_TAG_REGEXP.lastIndex=0,z.HTML_TAG_WITH_HANDLERS_REGEXP.lastIndex=0,!z.SCRIPT_TAG_REGEXP.test(e)&&!z.HTML_TAG_WITH_HANDLERS_REGEXP.test(e)}},V={bold:function(e){return z.BOLD_REGEXP.lastIndex=0,z.BOLD_REGEXP.test(e)},header1:function(e){return z.HEADER_REGEXP_1.lastIndex=0,z.HEADER_REGEXP_1.test(e)},header2:function(e){return z.HEADER_REGEXP_2.lastIndex=0,z.HEADER_REGEXP_2.test(e)},img:function(e){return z.IMAGE_REGEXP.lastIndex=0,z.IMAGE_REGEXP.test(e)},link:function(e){return z.LINK_REGEXP.lastIndex=0,z.LINK_REGEXP.test(e)},video:function(e){return z.LINK_REGEXP.lastIndex=0,z.VIDEO_REGEXP.test(e)},intendention:function(e){return"-"===e[0]},list:function(e){return"+"===e[0]},quote:function(e){return z.QUOTE_BRACKETS_REGEXP.lastIndex=0,z.QUOTE_BRACKETS_REGEXP.test(e)}};class F extends Error{constructor(e){super(e.message),this.name="Error by content parsing"}}const W={throw:function(e){throw new F(e)}};const J={parsingTime:0,kindCount:{},getParsingBenchmarkResultAndParsedContent:function(e){const t=Date.now(),s=function(e){if(ee.benchmark.reset(),!e)return"";let t=e.split("\\n"),s="";1===t.length&&(t=e.split("\n"));for(let n={index:0};n.index<t.length;n.index++)ee.have.intendention(t[n.index])?s+=ee.parseAs.intendention():ee.have.quote(t[n.index])?s+=ee.parseAs.quote(t[n.index]):ee.have.header2(t[n.index])?s+=ee.parseAs.header2(t[n.index]):ee.have.header1(t[n.index])?s+=ee.parseAs.header1(t[n.index]):ee.have.img(t[n.index])?(s+=ee.parseAs.img(n,t),n.index--):ee.have.video(t[n.index])?s+=ee.parseAs.video(t[n.index]):ee.have.list(t[n.index])?(s+=ee.parseAs.list(n,t),n.index--):(ee.have.bold(t[n.index])&&(t[n.index]=ee.parseAs.bold(t[n.index])),ee.have.link(t[n.index])&&(t[n.index]=ee.parseAs.link(t[n.index])),t[n.index]='<div dir="auto" class="line flex-row-normal-normal-medium">'+t[n.index]+"</div>",s+=t[n.index],ee.benchmark.countKind(ee.kind.LINE));return s='<div style="width: 100%;" class="flex-column-normal-normal-none">'+s+"</div>",ee.secure.DOM(s)||ee.error.throw({content:s,function:"parse",message:"HTML Contains handlers or script tag!"}),s}(e),n=(Date.now(),Object.entries(this.kindCount));for(let[a,o]of n);return s},countKind:function(e){this.kindCount[e]?this.kindCount[e]++:this.kindCount[e]=1},reset:function(){this.parsingTime=0,this.kindCount={}}},Y={HEADER_1:"HEADER_1",HEADER_2:"HEADER_2",LINE:"LINE",INTENDENTION:"INTENDENTION",BOLD:"BOLD",QUOTE:"QUOTE",IMG:"IMG",LINK:"LINK",LIST:"LIST",VIDEO:"VIDEO"},Z={intendention:function(){return J.countKind(Y.INTENDENTION),'<div class="intendention"></div>'},header2:function(e){return J.countKind(Y.HEADER_2),e.replace(z.HEADER_REGEXP_2,'<h2 class="header header_2">$1</h2>')},header1:function(e){return J.countKind(Y.HEADER_1),e.replace(z.HEADER_REGEXP_1,'<h1 class="header header_1">$1</h1>')},bold:function(e){return J.countKind(Y.BOLD),e.replace(z.BOLD_REGEXP,'<b class="bold container_flex">$1</b>')},list:function(e,t){J.countKind(Y.LIST);let s="",n={},a=[];for(;e.index<t.length&&V.list(t[e.index]);){let s=t[e.index].replace("+","");V.link(s)&&(s=this.link(s)),n[e.index]={text:s},e.index++}a=Object.entries(n);for(let[o,i]of a)s+="<li>"+i.text+"</li>";return'<ul class="list">'+s+"</ul>"},img:function(e,t){J.countKind(Y.IMG);let s="",n={},a=[];for(;e.index<t.length&&V.img(t[e.index]);){const[s,a,o]=t[e.index].replace(z.PAIR_BRACKETS_REGEXP,"$1").split(/;/);!o&&Q.URL(a)?n[e.index]={text:s,link:a}:o&&Q.URL(o)?n[e.index]={text:s,link:o,context:a}:W.throw({content:t[e.index],function:"parseAs.img",message:`"context": ${a} or "src": ${o} is not defined or not secure!`}),e.index++}a=Object.entries(n);for(let[o,i]of a)i.context?s+='\n          <div class="img_with_context flex-column-center-center-medium">\n            <a target="_blank" href="'+i.link+'"><img src="'+i.link+'"alt="'+i.text+'"></a>\n            <p>'+i.context+"</p>\n          </div>\n        ":s+='<a target="_blank" href="'+i.link+'"><img class="img" src="'+i.link+'"alt="'+i.text+'"></a>';return'<div style="flex-wrap: wrap; margin: 1rem 0rem;" class="flex-row-center-center-none">'+s+"</div>"},link:function(e){J.countKind(Y.LINK);const t=e.match(z.LINK_REGEXP);let s=0,n=e;for(;t?.[s];){const a=t[s].replace(z.SQUARE_BRACKETS_REGEXP,"$1").split(/;/);Q.URL(a[1])||W.throw({content:e,function:"parseAs.link",message:`Type of URL "${a[1]}" is "${typeof a[1]}", URL is not string or URL is not secure!`}),n=n.replace(t[s],'<a target="_blank" class="link content_flex" href="'+a[1]+'">'+a[0]+"</a>"),s++}return n},video:function(e){J.countKind(Y.VIDEO);let t=e.replace(z.VIDEO_REGEXP,"$1");return Q.URL(t)||W.throw({content:e,function:"parseAs.video",message:`Type of video URL "${t}" is "${typeof t}", video URL is not string or URL is not secure!`}),'\n        <div class="video_container flex-row-center-center-none">\n          <video controls src="'+t+'"></video>\n        </div>\n      '},quote:function(e){J.countKind(Y.QUOTE);const t=e.replace(z.QUOTE_BRACKETS_REGEXP,"$1");let s=e.replace(z.QUOTE_BRACKETS_REGEXP,"$2");return V.bold(s)&&(s=this.bold(s)),'\n        <div class="quote_container flex-row-center-center-none">\n          <div class="quote_body">\n            '+(t?'<p class="quote_name">'+t+":</p>":"")+'\n            <svg class="quote_svg quote_start" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/></svg>\n            <p>'+s+'</p>\n            <svg class="quote_svg quote_end" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/></svg>\n          </div>\n        </div>\n      '}},ee={regexp:z,secure:Q,have:V,kind:Y,parseAs:Z,benchmark:J,error:W};function te({content:e,className:n}){const[a,o]=t.useState(""),[i,r]=t.useState("");return t.useEffect((()=>{try{o(ee.benchmark.getParsingBenchmarkResultAndParsedContent(e||"")),r("")}catch(W){r(W.message)}}),[]),s.jsx("div",{className:`${q.content_viewer_container} ${n}`,dangerouslySetInnerHTML:a?{__html:a}:void 0,children:i?s.jsxs("div",{className:`${q.content_view_parse_error} flex-row-center-center-medium`,children:[s.jsx(m,{}),i]}):0===a.length?s.jsxs("div",{className:`${q.content_viewer_post_empty} flex-row-center-center-big`,children:[s.jsx(l,{}),s.jsx("p",{children:"Post is empty"})]}):null})}function se({post:t,type:n}){const{id:i}=u(),{pathname:r}=a(),l=e(),d=$(),m=h(),x=E(),{mutate:w}=f({deps:[]}),N=r.search("/post")>-1,R="/"===r,y=t.likedBy.includes(d.user?._id||""),A=x.role(["Creator"]).equal("_id",t?.author?._id).permited(),P=x.role(["Admin"]).permited(),T=t.isHidden,b="preview"===n||"post"===n?t._id:i,k="comment"===n?parseInt(m.get("page")||"0"):0,I=T&&P||A&&T?S.post_hidden:"";T&&N&&!P&&!A&&"post"===n&&l("/");const L=e=>{m.set({type:e,"post-id":t._id,"list-page":0})},G=j.getDifference(t.createdAt).getSortDate({year:"[year] years [month] months ago!",month:"[month] months [day] days ago!",day:"[day] days [hour] hours ago!",hour:"[hour] hours [minute] minutes ago!",minute:"[minute] minutes [second] seconds ago!",second:"[second] seconds ago!"});return s.jsx(s.Fragment,{children:R&&!A&&!P&&T?null:s.jsxs(U,{className:I,children:["comment"===n||"preview"===n?s.jsx(H,{tags:t.tags||[],title:t.title||"",content:t.content,isHidden:t.isHidden,postID:b,contentID:t._id,type:n,createdAt:t.createdAt,user:t?.author}):null,"post"===n?s.jsxs("div",{className:S.post_content_container,children:[s.jsx("h4",{className:S.post_title,children:t.title}),s.jsx("p",{className:S.post_content_date,children:G}),s.jsx(te,{content:t.content})]}):null,"preview"===n?s.jsxs("div",{className:S.post_content_container,children:[s.jsx(o,{to:`/post/${t._id}`,children:t.title}),s.jsx(te,{className:S.post_short_view,content:t.content.slice(0,450)})]}):null,"comment"===n?s.jsx("div",{className:S.post_data,children:s.jsx(te,{content:t.content})}):null,s.jsxs("div",{className:`${S.post_tags_statistic_container} flex-row-center-space-between-medium`,children:["post"!==n&&"preview"!==n||!t.tags?null:s.jsx(M,{tags:t.tags}),s.jsxs("div",{className:"flex-row-center-normal-big",children:["preview"===n?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:`${S.post_statistic_data} flex-row-center-normal-small`,onClick:R?()=>L("views"):void 0,children:[s.jsx(c,{}),t.viewedBy?.length]}),s.jsxs("p",{className:`${S.post_statistic_data} flex-row-center-normal-small`,onClick:R?()=>L("comments"):void 0,children:[s.jsx(_,{}),t.comments?.length]}),s.jsxs("p",{className:`${S.post_statistic_data} flex-row-center-normal-small`,onClick:R?()=>L("likes"):void 0,children:[s.jsx(p,{}),t.likedBy?.length]})]}):null,"comment"!==n&&"post"!==n||!d.user?null:s.jsxs("button",{onClick:async()=>{if(t.isHidden&&!d.user)return;const e="post"===n?[`post-${t._id}`]:[`post-${b}-comments-${k}`];w({key:e,request:async e=>{const s=await g.get(`/${n}/${t._id}/like`,{Authorization:`Bearer ${v.getOne("PR_TOKEN")}`});if("post"===n)return s;const a=e.state,o=a.comments||[];return{...a,comments:o.map((e=>e._id===s._id?s:e))}}})},className:`${y?S.post_liked:""} ${S.post_statistic_data} flex-row-center-normal-small`,children:[s.jsx(p,{}),t.likedBy.length]})]})]})]})})}const ne={button:"O_",button_label:"P_"};function ae({label:e,className:t,onClick:n,type:a,isDisable:o}){return s.jsx("button",{type:a||"button",style:{width:13*e.length+"px"},disabled:o,className:`${ne.button} ${t}`,onClick:n,children:s.jsx("section",{className:ne.button_label,children:e})})}const oe={preview_container:"V_",preview_body:"W_",preview_header:"X_",preview_item_count:"Y_"},ie={pagintion_list_button:"Ic",loader:"Jc"};function re(){return s.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[s.jsx("div",{className:ie.pagintion_list_button}),s.jsxs("div",{className:"flex-row-normal-normal-small",children:[s.jsx("div",{className:ie.pagintion_list_button}),s.jsx("div",{className:ie.pagintion_list_button}),s.jsx("div",{className:ie.pagintion_list_button})]}),s.jsx("div",{className:ie.pagintion_list_button})]})}const le={preview_loader:"Mc",loader:"Nc"};function ce(){return s.jsxs("div",{style:{paddingTop:"1rem"},className:"flex-column-normal-normal-medium",children:[s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader})]})}function de({type:e}){const t=h(),n=t.get("post-id"),a=parseInt(t.get("list-page")||"0"),i={views:s.jsx(c,{}),likes:s.jsx(p,{}),comments:s.jsx(_,{})},{data:r,prev:l,isPending:d}=f({deps:[`preview-${e}-${n}-${a}`],prev:[`preview-${e}-${n}-${0===a?0:a-1}`],request:async()=>g.get(`/post/preview/${e}/${n}/${a}`)}),u=l?.pagesCount||r?.pagesCount||0;return s.jsx("section",{className:oe.preview_container,children:s.jsxs("div",{className:`${oe.preview_body} main-content-container`,children:[s.jsxs("div",{className:`${oe.preview_header} flex-row-center-space-between-none`,children:[s.jsxs("div",{className:"flex-row-center-normal-medium",children:[i[e],s.jsx("h4",{className:oe.preview_type,children:N(e||"")})]}),s.jsx(m,{onClick:()=>{t.remove(["type","post-id","list-page"])}})]}),d?s.jsx(re,{}):u>1?s.jsx(R,{pagesCount:u}):null,d?s.jsx(ce,{}):s.jsx("div",{style:{paddingTop:u>1?"0.5rem":"0rem"},className:oe.preview_item_count_list,children:0===r?.items?.length?s.jsx(y,{label:"Nothing found!"}):r?.items?.map((e=>s.jsxs(o,{to:`/user/${e._id}`,className:"flex-row-center-space-between-none",children:[s.jsxs("div",{className:"flex-row-center-normal-medium",children:[s.jsx(k,{src:e.avatar,alt:e.name}),s.jsx("p",{children:e.name})]}),s.jsx("p",{className:oe.preview_item_count,children:e.count})]},200*Math.random())))})]})})}const me=window.matchMedia("(width <= 830px)").matches;const ue=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const e=h(),n=parseInt(e.get("posts-count")||String(10)),a=e.get("type"),{isFetching:o,isMutating:i,data:r,error:l,mutate:c}=f({deps:["all-posts"],request:async()=>await g.get(`/home/${n}`,{Authorization:`Bearer ${v.getOne("PR_TOKEN")}`})});return s.jsxs(t.Fragment,{children:[i?s.jsx(A,{}):null,s.jsxs("div",{style:{height:"100%",marginRight:me?"0rem":a?"17rem":"0rem"},className:"flex-row-normal-normal-medium",children:[s.jsx("div",{style:{flexGrow:1},className:"flex-column-normal-normal-small",children:o?s.jsx(C,{}):l?s.jsx(D,{underText:"Go back or reload the page!",code:l.code,message:l.message}):r&&0===r.length?s.jsx(y,{option:{flexCenterCenter:!0},label:"No post would founded!"}):r&&s.jsxs(t.Fragment,{children:[r.map((e=>s.jsx(se,{post:e,type:"preview"},e._id))),r.length%10==0?s.jsx("div",{className:"flex-row-center-center-none",children:s.jsx(ae,{onClick:async()=>{const t=n+10;e.set({"posts-count":t}),await c({key:["all-posts"],request:async()=>await g.get(`/home/${t}`)}),o||i||setTimeout((()=>window.scrollTo({behavior:"smooth",top:document.body.scrollHeight})),100)},label:"Load More"})}):null]})}),a&&s.jsx(de,{type:a})]})]})}},Symbol.toStringTag,{value:"Module"}));export{ae as B,te as C,D as E,k as I,C as L,L as P,se as a,$ as b,ee as c,ue as p,G as u};
