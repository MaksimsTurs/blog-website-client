import{c as e,r as t,j as s,p as n,a,L as o,q as i,h as r,P as c,E as l,s as d,X as m,g as u,t as _,H as p}from"../react.js";import{A as h,u as x,f as g,c as v,b as E,_ as f,D as j,l as w,d as N,U as R,P as T,E as A,e as P}from"./admin.js";function y(){const s=e(),n=t.useContext(h),a=x(),o=a.get("login-modal"),i=a.get("registration-modal");return{...n?.userState,create:async function(e){try{if(e.setSession)return n?.updateUserState({user:e.setSession,isAuthPending:!1,isLoading:!1});n?.updateUserState({isAuthPending:!1,isLoading:!0});const t=await g.post(e.apiURL,e.body);n?.updateUserState({isAuthPending:!1,isLoading:!1,error:void 0,user:t}),e?.setToken&&v.set("PR_TOKEN",t.token),e?.redirectURL&&s(e.redirectURL)}catch(J){n.updateUserState((t=>({...t,isAuthPending:!1,isLoading:!1,error:J instanceof Error?{code:503,message:"Service Unavailable!"}:JSON.parse(J)})))}},out:function(){n?.updateUserState({isAuthPending:!1,isLoading:!1}),v.set("PR_TOKEN","undefined")},clearError:function(){t.useEffect((()=>{n?.updateUserState((e=>({...e,error:void 0})))}),[o,i])}}}const $="ta",I="ua";function b({className:e,style:t}){return s.jsx("div",{style:t,className:`${I} ${e}`})}const k=t.memo((function({alt:e,classNames:a,src:o,styles:i}){const[r,c]=t.useState({isLoading:!0});return t.useEffect((()=>{(async()=>{try{await fetch(o||""),c({isLoading:!1,source:o})}catch(J){c({isLoading:!1})}})()}),[]),s.jsxs(t.Fragment,{children:[r.isLoading?s.jsx(b,{className:a?.loader,style:i?.loader}):r.source?null:s.jsx(n,{className:`${a?.img} ${$}`}),s.jsx("img",{src:o,alt:e,className:a?.img,style:{...i?.img,display:r.source&&!r.isLoading?"block":"none"}})]})})),C={post_loader_container:"zc",post_loader_text:"Ac",loader:"Bc",post_loader_tag:"Cc",post_loader_avatar:"Dc"};function L(){return s.jsxs("div",{className:`${C.post_loader_container} main-content-container flex-column-normal-normal-medium`,children:[s.jsxs("div",{className:"flex-row-normal-normal-medium",children:[s.jsx("div",{className:C.post_loader_avatar}),s.jsxs("div",{className:"flex-column-normal-normal-medium",children:[s.jsx("div",{style:{width:"4rem"},className:C.post_loader_text}),s.jsx("div",{style:{width:"7rem"},className:C.post_loader_text})]})]}),s.jsx("div",{style:{width:"11rem"},className:C.post_loader_text}),s.jsxs("div",{className:"flex-column-normal-normal-medium",children:[s.jsx("div",{style:{width:"50%"},className:C.post_loader_text}),s.jsx("div",{style:{width:"20%"},className:C.post_loader_text})]}),s.jsxs("div",{className:"flex-row-normal-space-between-none",children:[s.jsxs("div",{className:"flex-row-normal-normal-medium",children:[s.jsx("div",{className:C.post_loader_tag}),s.jsx("div",{className:C.post_loader_tag}),s.jsx("div",{className:C.post_loader_tag})]}),s.jsxs("div",{className:"flex-row-normal-normal-medium",children:[s.jsx("div",{className:C.post_loader_tag}),s.jsx("div",{className:C.post_loader_tag}),s.jsx("div",{className:C.post_loader_tag})]})]})]})}function S(e){t.useEffect((()=>{e.title&&(document.title=e.title)}),[e]),t.useEffect((()=>{delete e.title;const t=Object.entries(e);for(let[e,s]of t){const t=document.createElement("meta");t.name=e,t.content=s,document.head.appendChild(t)}}),[])}function G({containersCount:e}){return S({title:"Home",description:"Hier kannst du alle letzt geschriebene posts ansehen."}),s.jsx("div",{className:"flex-column-normal-normal-small",children:[...Array(e||3)].map(((e,t)=>s.jsx(L,{},t)))})}const O={error_container:"b",error_body:"c",error_error:"d"};function D({code:e,message:t,underText:n}){return s.jsx("div",{className:`${O.error_container} flex-row-center-center-none`,children:s.jsxs("div",{className:O.error_body,children:[s.jsxs("div",{className:`${O.error_error} flex-column-normal-normal-none`,children:[s.jsxs("p",{children:["Error - ",e,"!"]}),s.jsx("p",{children:t})]}),n?s.jsx("p",{children:n}):null]})})}const H={post_content_container:"hc",post_title:"ic",post_short_view:"jc",post_content_date:"kc",post_tags_statistic_container:"lc",post_data:"mc",post_hidden:"nc",post_statistic_data:"oc",post_liked:"pc",like:"qc"},X={post_header:"oe",post_header_author_not_defined:"pe",post_action_button:"qe",post_action_container:"re",post_create_date:"se"};function K({user:t,createdAt:n,type:m,contentID:u,postID:_,content:p,tags:h,title:R,isHidden:T}){const A=E(),P=x(),y=e(),{mutate:$,changeError:I}=f({deps:[]}),{pathname:b}=a(),C=A.roleAndEqual(["Admin","Creator"],"_id",t?._id).permited(),L=b.search("/post/")>-1,S=b.search("/")>-1,G=b.search("/search")>-1,O="preview"===m?"post":m,D=parseInt(P.get("page")||"0"),H=e=>{const t=L&&"comment"===m?[`post-${_}-comments-${P.get("page")||0}`]:S?["all-posts"]:[];if(!A.role(["Creator","Admin"]).permited())return I(t,{code:403,message:"You have no edit and remove permission!"});if("edit"===e){if(A.role(["Creator"]).permited())return w.set(u,{content:p,tags:h,title:R,isHidden:T,contentType:O,onPage:D,onPost:_}),y(`/write-post?is-edit=true&content-id=${u}`);if(A.role(["Admin"]).permited())return y(`/admin/${O}?id=${u}&${O}-edit-modal=true`)}$({key:t,request:async t=>{if("remove"===e){const e=await g.get(`/admin/remove/${N(O)}/${u}`,{Authorization:`Bearer ${v.getOne("PR_TOKEN")}`});if(L&&"comment"===m){const s=t.state||{comments:[],pagesCount:0};if(1===s.comments.length&&s.pagesCount>=1){for(let e=s.pagesCount-1;e>=0;e--)e!==D&&t.removeCache(`post-${_}-comments-${e}`);return y(`/post/${_}?page=${+D-1}`),{pagesCount:0,comments:[]}}return{...s,comments:s.comments.filter((t=>t._id!==e._id))}}if(S){return(t.state||[]).filter((t=>t._id!==e._id))}}const s=await g.post(`/admin/${O}/update`,{id:u,isHidden:"hidde"===e},{Authorization:`Bearer ${v.getOne("PR_TOKEN")}`});if(L){const e=t.state||{pagesCount:0,comments:[]};return{...e,comments:e.comments.map((e=>e._id===s._id?{...e,...s}:e))}}return(t.state||[]).map((e=>e._id===s._id?s:e))}})},K=j.getDifference(n).getSortDate({year:"[year] year [month] months ago!",month:"[month] month [day] days ago!",day:"[day] day [hour] hours ago!",hour:"[hour] hour [minute] minutes ago!",minute:"[minute] minutes [second] seconds ago!",second:"[second] seconds ago!"});return s.jsxs("div",{className:`${X.post_header} flex-row-center-space-between-none`,children:[t?s.jsxs("div",{className:"flex-row-center-normal-medium",children:[s.jsx(k,{styles:{svg:{width:"2rem",height:"2rem"},img:{width:"2rem",height:"2rem"}},src:t?.avatar,alt:t?.name||"User avatar"}),s.jsxs("div",{className:X.post_author,children:[s.jsx(o,{to:`/user/${t?._id}`,children:t?.name}),s.jsx("p",{className:X.post_create_date,children:K})]})]}):s.jsxs("div",{className:`${X.post_header_author_not_defined} flex-row-center-normal-medium`,children:[s.jsx(i,{}),s.jsx("p",{children:"Author is possibly deleted!"})]}),C&&!G?s.jsxs("button",{className:X.post_action_button,children:[s.jsx("svg",{viewBox:"0 0 128 512",children:s.jsx("path",{d:"M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"})}),s.jsxs("ul",{className:`${X.post_action_container} flex-column-normal-normal-none`,children:[s.jsxs("li",{onClick:()=>H("remove"),className:"flex-row-center-normal-medium",children:[s.jsx(r,{}),s.jsx("p",{children:"Remove"})]}),s.jsxs("li",{onClick:()=>H("edit"),className:"flex-row-center-normal-medium",children:[s.jsx(c,{}),s.jsx("p",{children:"Edit"})]}),s.jsxs("li",{onClick:()=>H(T?"show":"hidde"),className:"flex-row-center-normal-medium",children:[T?s.jsx(l,{}):s.jsx(d,{}),s.jsx("p",{children:T?"Show":"Hidden"})]})]})]}):null]})}const U={post_wrapper_container:"Uc",post_is_hidden:"Vc"};function B({children:e,className:t}){return s.jsxs("section",{className:`${U.post_wrapper_container} ${t} main-content-container`,children:[t?s.jsxs("div",{className:`${U.post_is_hidden} flex-row-center-center-medium`,children:[s.jsx(d,{}),s.jsx("p",{children:"Hidden"})]}):null,s.jsx("div",{style:{padding:"1rem"},children:e})]})}const M={post_tags:"le"};function q({tags:e}){return s.jsx("div",{className:`${M.post_tags} flex-row-normal-normal-medium`,children:e.map((e=>e.trim()?s.jsx(o,{to:`/search?tag=${e}`,children:e},e):null))})}const z={content_viewer_container:"Ec",content_viewer_post_empty:"Fc",content_view_parse_error:"Gc"},V={LINK_REGEXP:/\[(.*?);(.*?)\]/g,IMAGE_REGEXP:/\((.*?);(.*?);?(.*?)\)/g,QUOTE_BRACKETS_REGEXP:/\(?(.*?)\)?\"{2}([^""]+?)\"{2}/gm,BOLD_REGEXP:/#(.*?)#/g,HEADER_REGEXP_1:/#{2}(.*?)#{2}/,HEADER_REGEXP_2:/#{3}(.*?)#{3}/,VIDEO_REGEXP:/\(\[(.+)\]\)/g,DEFAULT_REGEXP:/\[(.*?)\]/g,SQUARE_BRACKETS_REGEXP:/^\[(.*)\]$/g,PAIR_BRACKETS_REGEXP:/\((.*?)\)/g,TAG_BRACKET_REGEXP:/<.*>(.*)<.*>/,HTTPS_PROTOCOL_REGEXP:/((blob:?.+https?)|https):\/{2}/g,HTML_TAG_WITH_HANDLERS_REGEXP:/<.*? on.* .*?>/gm,SCRIPT_TAG_REGEXP:/<script.*?>([\s\S]*?)<\/script>/gm},Q={URL:function(e){return V.HTTPS_PROTOCOL_REGEXP.lastIndex=0,V.HTTPS_PROTOCOL_REGEXP.test(e)},DOM:function(e){return V.SCRIPT_TAG_REGEXP.lastIndex=0,V.HTML_TAG_WITH_HANDLERS_REGEXP.lastIndex=0,!V.SCRIPT_TAG_REGEXP.test(e)&&!V.HTML_TAG_WITH_HANDLERS_REGEXP.test(e)}},F={bold:function(e){return V.BOLD_REGEXP.lastIndex=0,V.BOLD_REGEXP.test(e)},header1:function(e){return V.HEADER_REGEXP_1.lastIndex=0,V.HEADER_REGEXP_1.test(e)},header2:function(e){return V.HEADER_REGEXP_2.lastIndex=0,V.HEADER_REGEXP_2.test(e)},img:function(e){return V.IMAGE_REGEXP.lastIndex=0,V.IMAGE_REGEXP.test(e)},link:function(e){return V.LINK_REGEXP.lastIndex=0,V.LINK_REGEXP.test(e)},video:function(e){return V.LINK_REGEXP.lastIndex=0,V.VIDEO_REGEXP.test(e)},intendention:function(e){return"-"===e[0]},list:function(e){return"+"===e[0]},quote:function(e){return V.QUOTE_BRACKETS_REGEXP.lastIndex=0,V.QUOTE_BRACKETS_REGEXP.test(e)}};class W extends Error{constructor(e){super(e.message),this.name="Error by content parsing"}}const J={throw:function(e){throw new W(e)}};const Y={parsingTime:0,kindCount:{},getParsingBenchmarkResultAndParsedContent:function(e){const t=Date.now(),s=function(e){if(te.benchmark.reset(),!e)return"";let t=e.split("\\n"),s="";1===t.length&&(t=e.split("\n"));for(let n={index:0};n.index<t.length;n.index++)te.have.intendention(t[n.index])?s+=te.parseAs.intendention():te.have.quote(t[n.index])?s+=te.parseAs.quote(t[n.index]):te.have.header2(t[n.index])?s+=te.parseAs.header2(t[n.index]):te.have.header1(t[n.index])?s+=te.parseAs.header1(t[n.index]):te.have.img(t[n.index])?(s+=te.parseAs.img(n,t),n.index--):te.have.video(t[n.index])?s+=te.parseAs.video(t[n.index]):te.have.list(t[n.index])?(s+=te.parseAs.list(n,t),n.index--):(te.have.bold(t[n.index])&&(t[n.index]=te.parseAs.bold(t[n.index])),te.have.link(t[n.index])&&(t[n.index]=te.parseAs.link(t[n.index])),t[n.index]='<div dir="auto" class="line flex-row-normal-normal-medium">'+t[n.index]+"</div>",s+=t[n.index],te.benchmark.countKind(te.kind.LINE));return s='<div style="width: 100%;" class="flex-column-normal-normal-none">'+s+"</div>",te.secure.DOM(s)||te.error.throw({content:s,function:"parse",message:"HTML Contains handlers or script tag!"}),s}(e),n=(Date.now(),Object.entries(this.kindCount));for(let[a,o]of n);return s},countKind:function(e){this.kindCount[e]?this.kindCount[e]++:this.kindCount[e]=1},reset:function(){this.parsingTime=0,this.kindCount={}}},Z={HEADER_1:"HEADER_1",HEADER_2:"HEADER_2",LINE:"LINE",INTENDENTION:"INTENDENTION",BOLD:"BOLD",QUOTE:"QUOTE",IMG:"IMG",LINK:"LINK",LIST:"LIST",VIDEO:"VIDEO"},ee={intendention:function(){return Y.countKind(Z.INTENDENTION),'<div class="intendention"></div>'},header2:function(e){return Y.countKind(Z.HEADER_2),e.replace(V.HEADER_REGEXP_2,'<h2 class="header header_2">$1</h2>')},header1:function(e){return Y.countKind(Z.HEADER_1),e.replace(V.HEADER_REGEXP_1,'<h1 class="header header_1">$1</h1>')},bold:function(e){return Y.countKind(Z.BOLD),e.replace(V.BOLD_REGEXP,'<b class="bold container_flex">$1</b>')},list:function(e,t){Y.countKind(Z.LIST);let s="",n={},a=[];for(;e.index<t.length&&F.list(t[e.index]);){let s=t[e.index].replace("+","");F.link(s)&&(s=this.link(s)),n[e.index]={text:s},e.index++}a=Object.entries(n);for(let[o,i]of a)s+="<li>"+i.text+"</li>";return'<ul class="list">'+s+"</ul>"},img:function(e,t){Y.countKind(Z.IMG);let s="",n={},a=[];for(;e.index<t.length&&F.img(t[e.index]);){const[s,a,o]=t[e.index].replace(V.PAIR_BRACKETS_REGEXP,"$1").split(/;/);!o&&Q.URL(a)?n[e.index]={text:s,link:a}:o&&Q.URL(o)?n[e.index]={text:s,link:o,context:a}:J.throw({content:t[e.index],function:"parseAs.img",message:`"context": ${a} or "src": ${o} is not defined or not secure!`}),e.index++}a=Object.entries(n);for(let[o,i]of a)i.context?s+='\n          <div class="img_with_context flex-column-center-center-big">\n            <a target="_blank" href="'+i.link+'"><img src="'+i.link+'"alt="'+i.text+'"></a>\n            <p>'+i.context+"</p>\n          </div>\n        ":s+='<a target="_blank" href="'+i.link+'"><img class="img" src="'+i.link+'"alt="'+i.text+'"></a>';return'<div style="flex-wrap: wrap; margin: 1rem 0rem;" class="flex-row-center-center-none">'+s+"</div>"},link:function(e){Y.countKind(Z.LINK);const t=e.match(V.LINK_REGEXP);let s=0,n=e;for(;t?.[s];){const a=t[s].replace(V.SQUARE_BRACKETS_REGEXP,"$1").split(/;/);Q.URL(a[1])||J.throw({content:e,function:"parseAs.link",message:`Type of URL "${a[1]}" is "${typeof a[1]}", URL is not string or URL is not secure!`}),n=n.replace(t[s],'<a target="_blank" class="link content_flex" href="'+a[1]+'">'+a[0]+"</a>"),s++}return n},video:function(e){Y.countKind(Z.VIDEO);let t=e.replace(V.VIDEO_REGEXP,"$1");return Q.URL(t)||J.throw({content:e,function:"parseAs.video",message:`Type of video URL "${t}" is "${typeof t}", video URL is not string or URL is not secure!`}),'\n        <div class="video_container flex-row-center-center-none">\n          <video controls src="'+t+'"></video>\n        </div>\n      '},quote:function(e){Y.countKind(Z.QUOTE);const t=e.replace(V.QUOTE_BRACKETS_REGEXP,"$1");let s=e.replace(V.QUOTE_BRACKETS_REGEXP,"$2");return F.bold(s)&&(s=this.bold(s)),'\n        <div class="quote_container flex-row-center-center-none">\n          <div class="quote_body">\n            '+(t?'<p class="quote_name">'+t+":</p>":"")+'\n            <svg class="quote_svg quote_start" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/></svg>\n            <p>'+s+'</p>\n            <svg class="quote_svg quote_end" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 25" fill="none" stroke="currentColor" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/><path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/></svg>\n          </div>\n        </div>\n      '}},te={regexp:V,secure:Q,have:F,kind:Z,parseAs:ee,benchmark:Y,error:J};function se({content:e,className:n}){const[a,o]=t.useState(""),[i,r]=t.useState("");return t.useEffect((()=>{try{o(te.benchmark.getParsingBenchmarkResultAndParsedContent(e||"")),r("")}catch(J){r(J.message)}}),[]),s.jsx("div",{className:`${z.content_viewer_container} ${n}`,dangerouslySetInnerHTML:a?{__html:a}:void 0,children:i?s.jsxs("div",{className:`${z.content_view_parse_error} flex-row-center-center-medium`,children:[s.jsx(m,{}),i]}):0===a.length?s.jsxs("div",{className:`${z.content_viewer_post_empty} flex-row-center-center-big`,children:[s.jsx(c,{}),s.jsx("p",{children:"Post is empty"})]}):null})}function ne({post:t,type:n}){const{id:i}=u(),{pathname:r}=a(),c=e(),d=y(),m=x(),h=E(),{mutate:w}=f({deps:[]}),N=r.search("/post")>-1,T="/"===r,A=t.likedBy.includes(d.user?._id||""),P=h.role(["Creator"]).equal("_id",t?.author?._id).permited(),$=h.role(["Admin"]).permited(),I=t.isHidden,b="preview"===n||"post"===n?t._id:i,k="comment"===n?parseInt(m.get("page")||"0"):0,C=I&&$||P&&I?H.post_hidden:"";I&&N&&!$&&!P&&"post"===n&&c("/");const L=e=>{m.set({[R["STATISTIC-TO-CHECK"]]:e,[R["STATISTIC-PREVIEW-POST-ID"]]:t._id,[R["LIST-PAGE"]]:0})},S=j.getDifference(t.createdAt).getSortDate({year:"[year] years [month] months ago!",month:"[month] months [day] days ago!",day:"[day] days [hour] hours ago!",hour:"[hour] hours [minute] minutes ago!",minute:"[minute] minutes [second] seconds ago!",second:"[second] seconds ago!"});return s.jsx(s.Fragment,{children:T&&!P&&!$&&I?null:s.jsxs(B,{className:C,children:["comment"===n||"preview"===n?s.jsx(K,{tags:t.tags||[],title:t.title||"",content:t.content,isHidden:t.isHidden,postID:b,contentID:t._id,type:n,createdAt:t.createdAt,user:t?.author}):null,"post"===n?s.jsxs("div",{className:H.post_content_container,children:[s.jsx("h4",{className:H.post_title,children:t.title}),s.jsx("p",{className:H.post_content_date,children:S}),s.jsx(se,{content:t.content})]}):null,"preview"===n?s.jsxs("div",{className:H.post_content_container,children:[s.jsx(o,{to:`/post/${t._id}`,children:t.title}),s.jsx(se,{className:H.post_short_view,content:t.content.slice(0,450)})]}):null,"comment"===n?s.jsx("div",{className:H.post_data,children:s.jsx(se,{content:t.content})}):null,s.jsxs("div",{className:`${H.post_tags_statistic_container} flex-row-center-space-between-medium`,children:["post"!==n&&"preview"!==n||!t.tags?null:s.jsx(q,{tags:t.tags}),s.jsxs("div",{className:"flex-row-center-normal-big",children:["preview"===n?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:`${H.post_statistic_data} flex-row-center-normal-small`,onClick:T?()=>L("views"):void 0,children:[s.jsx(l,{}),t.viewedBy?.length]}),s.jsxs("p",{className:`${H.post_statistic_data} flex-row-center-normal-small`,onClick:T?()=>L("comments"):void 0,children:[s.jsx(_,{}),t.comments?.length]}),s.jsxs("p",{className:`${H.post_statistic_data} flex-row-center-normal-small`,onClick:T?()=>L("likes"):void 0,children:[s.jsx(p,{}),t.likedBy?.length]})]}):null,"comment"!==n&&"post"!==n||!d.user?null:s.jsxs("button",{onClick:async()=>{if(t.isHidden&&!d.user)return;const e="post"===n?[`post-${t._id}`]:[`post-${b}-comments-${k}`];w({key:e,request:async e=>{const s=await g.get(`/${n}/${t._id}/like`,{Authorization:`Bearer ${v.getOne("PR_TOKEN")}`});if("post"===n)return s;const a=e.state,o=a.comments||[];return{...a,comments:o.map((e=>e._id===s._id?s:e))}}})},className:`${A?H.post_liked:""} ${H.post_statistic_data} flex-row-center-normal-small`,children:[s.jsx(p,{}),t.likedBy.length]})]})]})]})})}const ae={button:"Ua",button_label:"Va"};function oe({label:e,className:t,onClick:n,type:a,isDisable:o}){return s.jsx("button",{type:a||"button",style:{width:13*e.length+"px"},disabled:o,className:`${ae.button} ${t}`,onClick:n,children:s.jsx("section",{className:ae.button_label,children:e})})}const ie={preview_container:"G_",preview_body:"H_",preview_header:"I_",preview_item:"J_",preview_item_count:"K_"},re={pagintion_list_button:"rc",loader:"sc"};function ce(){return s.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[s.jsx("div",{className:re.pagintion_list_button}),s.jsxs("div",{className:"flex-row-normal-normal-small",children:[s.jsx("div",{className:re.pagintion_list_button}),s.jsx("div",{className:re.pagintion_list_button}),s.jsx("div",{className:re.pagintion_list_button})]}),s.jsx("div",{className:re.pagintion_list_button})]})}const le={preview_loader:"tc",loader:"uc"};function de(){return s.jsxs("div",{style:{paddingTop:"1rem"},className:"flex-column-normal-normal-medium",children:[s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader}),s.jsx("div",{className:le.preview_loader})]})}const me={views:s.jsx(l,{}),likes:s.jsx(p,{}),comments:s.jsx(_,{})},ue={views:"No body have viewed!",likes:"No body have liked!",comments:"No body have commented!"};function _e({statisticToPreview:e}){const t=x(),n=t.get(R["STATISTIC-PREVIEW-POST-ID"]),a=parseInt(t.get(R["LIST-PAGE"])||"0"),{data:i,prev:r,isPending:c}=f({deps:[`preview-${e}-${n}-${a}`],prev:[`preview-${e}-${n}-${0===a?0:a-1}`],request:async()=>g.get(`/post/preview/${e}/${n}/${a}`)}),l=r?.pagesCount||i?.pagesCount||0;return s.jsx("section",{className:ie.preview_container,children:s.jsxs("div",{className:`${ie.preview_body} main-content-container`,children:[s.jsxs("div",{className:`${ie.preview_header} flex-row-center-space-between-none`,children:[s.jsxs("div",{className:"flex-row-center-normal-medium",children:[me[e],s.jsx("h4",{className:ie.preview_type,children:N(e||"")})]}),s.jsx(m,{onClick:()=>{t.remove([R["STATISTIC-TO-CHECK"],R["STATISTIC-PREVIEW-POST-ID"],R["LIST-PAGE"]])}})]}),c?s.jsx(ce,{}):l>1?s.jsx(T,{pagesCount:l}):null,c?s.jsx(de,{}):s.jsx("div",{style:{paddingTop:l>1?"0.5rem":"0rem"},className:ie.preview_item_count_list,children:0===i?.items?.length?s.jsx(A,{option:{size:"SMALL"},label:ue[e]}):i?.items?.map((e=>{return s.jsxs(o,{to:`/user/${e._id}`,className:`${ie.preview_item} flex-row-center-space-between-none`,children:[s.jsxs("div",{className:"flex-row-center-normal-medium",children:[s.jsx(k,{src:e.avatar,alt:e.name}),s.jsx("p",{children:e.name})]}),s.jsx("p",{className:ie.preview_item_count,children:(t=e.count,t>9?t:`0${t}`)})]},200*Math.random());var t}))})]})})}const pe=window.matchMedia("(width <= 830px)").matches;const he=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,n]=t.useState(10),a=x().get(R["STATISTIC-TO-CHECK"]),{isFetching:o,isMutating:i,data:r,error:c,mutate:l}=f({deps:["all-posts"],request:async()=>await g.get(`/home/${e}`,{Authorization:`Bearer ${v.getOne("PR_TOKEN")}`})});return s.jsxs(t.Fragment,{children:[i?s.jsx(P,{}):null,s.jsxs("div",{style:{height:"100%",marginRight:pe?"0rem":a?"17rem":"0rem"},className:"flex-row-normal-normal-medium",children:[s.jsx("div",{style:{flexGrow:1},className:"flex-column-normal-normal-small",children:o?s.jsx(G,{}):c?s.jsx(D,{underText:"Go back or reload the page!",code:c.code,message:c.message}):r&&0===r.length?s.jsx(A,{option:{flexCenterCenter:!0},label:"No post would founded!"}):r&&s.jsxs(t.Fragment,{children:[r.map((e=>s.jsx(ne,{post:e,type:"preview"},e._id))),r.length%10==0?s.jsx("div",{className:"flex-row-center-center-none",children:s.jsx(oe,{onClick:async()=>{const t=e+10;n((e=>e+10)),await l({key:["all-posts"],request:async()=>await g.get(`/home/${t}`)}),o||i||setTimeout((()=>window.scrollTo({behavior:"smooth",top:document.body.scrollHeight})),100)},label:"Load More"})}):null]})}),a&&s.jsx(_e,{statisticToPreview:a})]})]})}},Symbol.toStringTag,{value:"Module"}));export{oe as B,se as C,D as E,k as I,G as L,L as P,ne as a,y as b,te as c,he as p,S as u};
