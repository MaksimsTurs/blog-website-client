const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/page/home.js","assets/js/react.js","assets/js/__commonjsHelpers__.js","assets/js/page/admin.js","assets/css/page/admin.css","assets/css/page/home.css","assets/js/page/post.js","assets/css/page/post.css","assets/js/page/write-new.js","assets/css/page/write-new.css","assets/js/page/search.js","assets/css/page/search.css","assets/js/page/user.js","assets/css/page/user.css"])))=>i.map(i=>d[i]);
import{j as e,L as s,D as a,r,G as t,I as n,a as o,z as i,J as l,K as d,Q as m,m as c,R as h,V as x,W as u,Y as j,Z as p}from"./react.js";import{u as _,h as f,F as w,T as g,i as N,j as y,a as v,e as b,o as E,p as P,R as L}from"./page/admin.js";import{c as $,a as S,b as k,W as R}from"./page/write-new.js";import{b as z,I as A,P as C,u as O,L as T,E as D}from"./page/home.js";import{P as M}from"./page/post.js";import{U as I,a as W}from"./page/user.js";import"./__commonjsHelpers__.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const V={},U=function(e,s,a){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");r=Promise.all(s.map((e=>{if((e=function(e){return"/"+e}(e))in V)return;V[e]=!0;const s=e.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const t=document.createElement("link");return t.rel=s?"stylesheet":"modulepreload",s||(t.as="script",t.crossOrigin=""),t.href=e,a&&t.setAttribute("nonce",a),document.head.appendChild(t),s?new Promise(((s,a)=>{t.addEventListener("load",s),t.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}return r.then((()=>e())).catch((e=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}))},q=S({reducer:$({creator:k})}),F={header_container:"m",header_website_name:"n",header_user_action_container:"o",header_user_text:"p",header_user_link:"q"},J={loader_element_animation:"V_",loader:"W_",loader_container:"X_",loader_button:"Y_",loader_avatar:"Z_"};function Y(){return e.jsxs("div",{className:J.loader_container,children:[e.jsx("div",{className:`${J.loader_element_animation} ${J.loader_button}`}),e.jsx("div",{className:`${J.loader_element_animation} ${J.loader_button}`}),e.jsx("div",{className:`${J.loader_element_animation} ${J.loader_avatar}`})]})}const B={authorization_modal_container:"__",authorization_modal_body:"-_",authorization_modal_container_hidden:"a_"};function H(){const s=z(),a=_(),{submit:r,reset:t,formState:{errors:n}}=f([["email","isPattern:^[^\\s@]+@[^\\s@]+.[^\\s@]+$:Email is incorrect!"],["name",["isMax:12:Name is to long!","isMin:3:Name is to short!"]],["password","isMin:8:Password is to short!"]]),o=JSON.parse(a.get("login-modal")||"false");return s.clearError(),e.jsx("div",{className:o?B.authorization_modal_container:B.authorization_modal_container_hidden,children:e.jsxs(w,{errors:s.error?.message?[s.error.message]:[],className:B.authorization_modal_body,onSubmit:r((e=>{s.create({apiURL:"/login",body:e,redirectURL:"/",setToken:!0}),t()})),isPending:s.isLoading,buttonLabel:"Log in",children:[e.jsx(g,{name:"name",errors:n,placeholder:"Write you name here..."}),e.jsx(g,{name:"email",type:"email",errors:n,placeholder:"Write you email here..."}),e.jsx(g,{name:"password",type:"password",errors:n,placeholder:"Write you password here..."})]})})}function K(){const s=_(),a=z(),{submit:r,reset:t,formState:{errors:n}}=f([["email","isPattern:^[^\\s@]+@[^\\s@]+.[^\\s@]+$:Email is incorrect!"],["name",["isMax:12:Name is to long!","isMin:3:Name is to short!"]],["password",["isMin:8:Password is to short!","isEqualWith:confirmPassword:Passwords does match!"]],["confirmPassword",["isMin:8:Password is to short!"]]]),o=JSON.parse(s.get("registration-modal")||"false");return a.clearError(),e.jsx("div",{className:o?B.authorization_modal_container:B.authorization_modal_container_hidden,children:e.jsxs(w,{isPending:a.isLoading,buttonLabel:"Registrate",errors:a.error?.message?[a.error.message]:[],className:B.authorization_modal_body,onSubmit:r((e=>{const s=y(e);0===s.get("avatar").size&&s.set("avatar",function(e){const s=220,a=["#166bfd","#0e49ad","#3266bf","#0c3d91","#0040e3","#265be0","#1f45a3","#0235b3","#2268c9","#1b529e","#F48023","#bf641b","#9e5f2c","#b57948","#b86725","#fa8c32","#ff7300","#c74d06","#ed6e24","#bf6836"],r=document.createElement("canvas"),t=r.getContext("2d");return r.width=s,r.height=s,t.fillStyle=a[Math.floor(Math.random()*a.length-1)],t.fillRect(0,0,s,s),t.font="100px Arial",t.fillStyle="white",t.textBaseline="middle",t.fillText(e[0],s/3.1,110),r.toDataURL("image/webp",50).replace("data:image/webp;base64,","")}(e.name)),a.create({apiURL:"/registrate",body:s,redirectURL:"/",setToken:!0})})),children:[e.jsx(g,{errors:n,name:"name",placeholder:"You name"}),e.jsx(g,{errors:n,name:"email",placeholder:"You e-mail",type:"email"}),e.jsx(g,{errors:n,name:"password",placeholder:"You password",type:"password"}),e.jsx(g,{errors:n,name:"confirmPassword",placeholder:"Confirm you password",type:"password"}),e.jsx(N,{name:"avatar",label:"Chose you avatar!"})]})})}function G(){const r=z(),t=_(),n=e=>{t.set({[`${e}-modal`]:!JSON.parse(t.get(`${e}-modal`)||"false")})};return e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsx(K,{}),e.jsxs("header",{className:`${F.header_container} flex-row-center-space-between-none`,children:[e.jsx(s,{className:F.header_website_name,to:"/",children:"Ruzzkyi Mir"}),r.isAuthPending?e.jsx(Y,{}):r.user?e.jsx("section",{className:`${F.header_user_container} flex-row-center-center-medium`,children:e.jsx(s,{className:F.header_user_link,to:`/user/${r.user._id}`,children:e.jsx(A,{styles:{loader:{width:"2rem",height:"2rem"}},src:r.user.avatar,alt:r.user.name})})}):e.jsxs("section",{className:`${F.header_user_action_container} flex-row-center-normal-none`,children:[e.jsx("button",{className:"flex-row-center-center-none",onClick:()=>n("registration"),children:e.jsxs("section",{className:`${F.header_user_text} flex-row-center-normal-medium`,children:[e.jsx(a,{}),"Registrate"]})}),e.jsx("button",{onClick:()=>n("login"),children:"Login"})]})]})]})}const X="d";function Z(){const[s,a]=r.useState(0===window.scrollX);r.useEffect((()=>{document.addEventListener("scroll",(()=>{a(0===document.body.getBoundingClientRect().top)}))}),[]);const o=e=>{const s="top"===e?0:document.body.scrollHeight;window.scrollTo({behavior:"smooth",top:s})};return e.jsx("div",{className:`${X} flex-row-center-center-none`,children:s?e.jsx(t,{onClick:()=>o("bottom")}):e.jsx(n,{onClick:()=>o("top")})})}const Q="h",ee="j",se="k",ae="l",re={side_menu_loader_container:"I",side_menu_loader_item:"J",loader:"K"};function te(){return e.jsxs("div",{className:re.side_menu_loader_container,children:[e.jsx("div",{className:re.side_menu_loader_item}),e.jsx("div",{className:re.side_menu_loader_item}),e.jsx("div",{className:re.side_menu_loader_item}),e.jsx("div",{className:re.side_menu_loader_item})]})}function ne(){const{pathname:a}=o(),r=z(),t=v(),n=i((e=>e.creator)),h=/[\#\[\]\{\}\(\)]/g,x=[{title:"Home",path:"/",icon:e.jsx(l,{})},{title:"Search",path:"/search",icon:e.jsx(d,{})}];return t.role(["Admin"]).permited()&&x.push({title:"Admin",path:"/admin/post",icon:e.jsx(m,{})},{title:"Write post",path:"/write-post",icon:e.jsx(c,{})}),t.role(["Creator"]).permited()&&x.push({title:"Write post",path:"/write-post",icon:e.jsx(c,{})}),e.jsxs("aside",{className:`${Q} flex-column-normal-normal-medium`,children:[e.jsxs("div",{className:"flex-column-normal-normal-none",children:[e.jsx("p",{className:ee,children:"Menu"}),r.isAuthPending?e.jsx(te,{}):e.jsx("section",{className:"flex-column-normal-normal-small",children:x.map((r=>e.jsxs(s,{className:a.split("/")[1]===r.path.split("/")[1]?`${ae} flex-row-center-normal-medium`:"flex-row-center-normal-medium",to:r.path,children:[r.icon,e.jsx("p",{className:se,children:r.title})]},r.title)))})]}),n.contentDraft.length>0?e.jsxs("div",{className:"flex-column-normal-normal-none",children:[e.jsx("p",{className:ee,children:"Draft"}),e.jsx("section",{className:"flex-column-normal-normal-small",children:n.contentDraft.slice(0,5).map((a=>e.jsx(s,{className:se,to:`/write-post?draft-id=${a._id}`,children:a.content.replace(h,"").trim()},a._id)))})]}):null]})}function oe(){return e.jsxs("div",{style:{width:"100%"},className:"flex-row-normal-normal-medium",children:[e.jsxs("div",{style:{width:"100%"},className:"flex-column-normal-normal-medium",children:[e.jsx(C,{}),e.jsx(b,{}),e.jsx(C,{}),e.jsx(C,{}),e.jsx(b,{})]}),e.jsx(M,{})]})}const ie="C",le="D";function de(){return O({title:"Finden",description:"Hier kannst du posts mit gegebenen sortierung optionen finden."}),e.jsxs("div",{className:`${ie} flex-row-normal-normal-medium`,children:[e.jsxs("div",{style:{width:"100%"},className:"flex-column-normal-normal-small",children:[e.jsx(b,{}),e.jsx(C,{}),e.jsx(C,{}),e.jsx(C,{})]}),e.jsxs("div",{style:{width:"20rem",height:"fit-content"},className:"main-content-container flex-column-normal-normal-medium",children:[e.jsxs("div",{className:"flex-row-normal-normal-medium",children:[e.jsx("div",{style:{width:"5rem"},className:le}),e.jsx("div",{style:{width:"5rem"},className:le}),e.jsx("div",{style:{width:"5rem"},className:le})]}),e.jsxs("div",{className:"flex-column-normal-normal-medium",children:[e.jsx("div",{style:{width:"100%"},className:le}),e.jsx("div",{style:{width:"100%"},className:le}),e.jsx("div",{style:{width:"100%"},className:le}),e.jsx("div",{style:{width:"100%"},className:le})]}),e.jsxs("div",{className:"flex-row-normal-normal-medium",children:[e.jsx("div",{style:{width:"50%"},className:le}),e.jsx("div",{style:{width:"50%"},className:le})]})]})]})}function me(){return e.jsxs("div",{style:{width:"100%"},className:"flex-column-center-center-medium",children:[e.jsx(I,{}),e.jsx(W,{})]})}const ce="e",he="f";function xe(){return O({title:"Admin panel"}),e.jsxs("div",{style:{width:"100%"},className:"flex-row-normal-normal-none",children:[e.jsxs("div",{style:{paddingRight:"11rem",width:"100%"},className:"flex-column-normal-normal-medium",children:[e.jsx(b,{}),e.jsx(E,{}),e.jsx(b,{})]}),e.jsxs("div",{className:`${ce} flex-column-normal-normal-medium`,children:[e.jsx("div",{style:{width:"100%",height:"2rem"},className:he}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:he}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:he}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:he})]})]})}function ue({exeptetRoles:s,children:a}){const t=v().role(s).permited();return e.jsx(r.Fragment,{children:t?a:null})}const je=r.lazy((()=>U((()=>import("./page/home.js").then((e=>e.p))),__vite__mapDeps([0,1,2,3,4,5])))),pe=r.lazy((()=>U((()=>import("./page/post.js").then((e=>e.p))),__vite__mapDeps([6,1,2,3,4,0,5,7])))),_e=r.lazy((()=>U((()=>import("./page/write-new.js").then((e=>e.p))),__vite__mapDeps([8,1,2,3,4,0,5,9])))),fe=r.lazy((()=>U((()=>import("./page/search.js")),__vite__mapDeps([10,1,2,3,4,0,5,11])))),we=r.lazy((()=>U((()=>import("./page/user.js").then((e=>e.p))),__vite__mapDeps([12,1,2,3,4,0,5,13])))),ge=r.lazy((()=>U((()=>import("./page/admin.js").then((e=>e.q))),__vite__mapDeps([3,1,2,4]))));h(document.getElementById("root")).render(e.jsx(x,{children:e.jsx(P,{children:e.jsx(L,{children:e.jsxs(u,{store:q,children:[e.jsx(G,{}),e.jsxs("div",{className:"flex-row-normal-normal-medium",style:{padding:"0rem 1rem 0rem 0rem",flexGrow:"1"},children:[e.jsx(ne,{}),e.jsxs("main",{children:[e.jsxs(j,{children:[e.jsx(p,{path:"/",element:e.jsx(r.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(je,{})})}),e.jsx(p,{path:"/post/:id",element:e.jsx(r.Suspense,{fallback:e.jsx(oe,{}),children:e.jsx(pe,{})})}),e.jsx(p,{path:"/search",element:e.jsx(r.Suspense,{fallback:e.jsx(de,{}),children:e.jsx(fe,{})})}),e.jsx(p,{path:"/user/:id",element:e.jsx(r.Suspense,{fallback:e.jsx(me,{}),children:e.jsx(we,{})})}),e.jsx(p,{path:"*",element:e.jsx(D,{code:404,message:"Page not found!",underText:"Site there you search is not implemented or not exist!"})}),e.jsx(ue,{exeptetRoles:["Admin","Creator"],children:e.jsx(p,{path:"/write-post",element:e.jsx(r.Suspense,{fallback:e.jsx(R,{}),children:e.jsx(_e,{})})})}),e.jsx(ue,{exeptetRoles:["Admin"],children:e.jsx(p,{path:"/admin/:tab",element:e.jsx(r.Suspense,{fallback:e.jsx(xe,{}),children:e.jsx(ge,{})})})})]}),e.jsx(Z,{})]})]})]})})})}));
