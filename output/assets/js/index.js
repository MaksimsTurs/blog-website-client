const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/page/home.js","assets/js/react.js","assets/js/__commonjsHelpers__.js","assets/js/page/admin.js","assets/css/page/admin.css","assets/js/page/database.js","assets/css/page/database.css","assets/css/page/home.css","assets/js/page/post.js","assets/css/page/post.css","assets/js/page/write-new.js","assets/js/page/search.js","assets/css/page/search.css","assets/js/page/website-settings.js","assets/css/page/website-settings.css","assets/css/page/write-new.css","assets/js/page/user.js","assets/css/page/user.css","assets/js/page/galery.js","assets/css/page/galery.css"])))=>i.map(i=>d[i]);
import{j as e,r as s,X as a,Y as r,L as t,Z as l,_ as i,$ as n,b as o,W as m,a0 as c,a1 as d,O as h,a2 as x,a3 as j,a4 as u,i as p,a5 as N,a6 as f,a7 as w,a8 as g,a9 as v}from"./react.js";import{U as _,b as y,e as b,T as E,F as S,g as P,C as O,u as $,d as L,m as I,o as R,P as A,p as k,R as D}from"./page/admin.js";import{a as z,b as C,w as M}from"./page/website-settings.js";import{c as T,W as U}from"./page/write-new.js";import{u as V,P as W,L as F}from"./page/home.js";import{u as J,I as q,a as G,L as Y}from"./page/database.js";import{P as B}from"./page/post.js";import{U as H,a as X}from"./page/user.js";import"./__commonjsHelpers__.js";import"./page/search.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const Z={},K=function(e,s,a){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");r=Promise.all(s.map((e=>{if((e=function(e){return"/"+e}(e))in Z)return;Z[e]=!0;const s=e.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const t=document.createElement("link");return t.rel=s?"stylesheet":"modulepreload",s||(t.as="script",t.crossOrigin=""),t.href=e,a&&t.setAttribute("nonce",a),document.head.appendChild(t),s?new Promise(((s,a)=>{t.addEventListener("load",s),t.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}return r.then((()=>e())).catch((e=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}))},Q=C({reducer:z({creator:T,websiteSetting:M})}),ee="Q",se="R",ae="S",re="T",te="U",le="V",ie="W",ne={loader_container:"Y_",loader_element_animation:"Z_",loader:"_a",loader_button:"-a",loader_avatar:"aa"};function oe(){return e.jsxs("div",{className:ne.loader_container,children:[e.jsx("div",{className:`${ne.loader_element_animation} ${ne.loader_button}`}),e.jsx("div",{className:`${ne.loader_element_animation} ${ne.loader_button}`}),e.jsx("div",{className:`${ne.loader_element_animation} ${ne.loader_avatar}`})]})}const me={authorization_modal_container:"Vc",authorization_modal_body:"Wc",authorization_modal_container_hidden:"Xc"};function ce(){const a=V(),r=s.useRef(null),t=J(_["IS-LOGIN-MODAL-OPEN"],r),{submit:l,reset:i,formState:{errors:n}}=y([["email","isPattern:^[^\\s@]+@[^\\s@]+.[^\\s@]+$:Email is incorrect!"],["name",["isMax:12:Name is to long!","isMin:3:Name is to short!"]],["password","isMin:8:Password is to short!"]]);return a.clearError(),e.jsx("div",{ref:r,className:t?me.authorization_modal_container:me.authorization_modal_container_hidden,children:e.jsxs(b,{errors:a.error?.message?[a.error.message]:[],className:me.authorization_modal_body,onSubmit:l((e=>{a.create({apiURL:"/login",body:e,redirectURL:"/",setToken:!0}),i()})),isPending:a.isLoading,buttonLabel:"Log in",children:[e.jsx(E,{name:"name",errors:n,placeholder:"Write you name here..."}),e.jsx(E,{name:"email",type:"email",errors:n,placeholder:"Write you email here..."}),e.jsx(E,{name:"password",type:"password",errors:n,placeholder:"Write you password here..."})]})})}function de(){const a=s.useRef(null),r=J(_["IS-REGISTRATE-MODAL-OPEN"],a),t=V(),{submit:l,reset:i,formState:{errors:n}}=y([["email","isPattern:^[^\\s@]+@[^\\s@]+.[^\\s@]+$:Email is incorrect!"],["name",["isMax:12:Name is to long!","isMin:3:Name is to short!"]],["password",["isMin:8:Password is to short!","isEqualWith:confirmPassword:Passwords does match!"]],["confirmPassword",["isMin:8:Password is to short!"]]]);return t.clearError(),e.jsx("div",{ref:a,className:r?me.authorization_modal_container:me.authorization_modal_container_hidden,children:e.jsxs(b,{isPending:t.isLoading,buttonLabel:"Registrate",errors:t.error?.message?[t.error.message]:[],className:me.authorization_modal_body,onSubmit:l((e=>{const s=P.createFormDataFromJSON(e);0===s.get("avatar").size&&s.set("avatar",O.generateDefaultAvatar(e.name)),t.create({apiURL:"/registrate",body:s,redirectURL:"/",setToken:!0}),i()})),children:[e.jsx(E,{errors:n,name:"name",placeholder:"You name"}),e.jsx(E,{errors:n,name:"email",placeholder:"You e-mail",type:"email"}),e.jsx(E,{errors:n,name:"password",placeholder:"You password",type:"password"}),e.jsx(E,{errors:n,name:"confirmPassword",placeholder:"Confirm you password",type:"password"}),e.jsx(S,{name:"avatar",label:"Chose you avatar!"})]})})}function he(){const s=V(),i=$(),n=JSON.parse(i.get(_["IS-SIDE-MENU-OPEN"])||"false"),o=e=>{let s=!1;const a=JSON.parse(i.get(`is-${e}-modal-open`)||"false");s="login"===e?JSON.parse(i.get(_["IS-REGISTRATE-MODAL-OPEN"])||"false"):JSON.parse(i.get(_["IS-LOGIN-MODAL-OPEN"])||"false"),s||i.set({[`is-${e}-modal-open`]:!a})};return e.jsxs(e.Fragment,{children:[e.jsx(ce,{}),e.jsx(de,{}),e.jsxs("header",{className:`${te} flex-row-center-space-between-none`,children:[e.jsxs("div",{style:{width:"100%"},className:"flex-row-center-normal-none",children:[e.jsx("button",{onClick:()=>{const e=JSON.parse(i.get(_["IS-SIDE-MENU-OPEN"])||"false");i.set({[_["IS-SIDE-MENU-OPEN"]]:!e})},className:re,children:n?e.jsx(a,{}):e.jsx(r,{})}),e.jsx(t,{className:ae,to:"/",children:"Ruzzkyi Mir"})]}),s.isAuthPending?e.jsx(oe,{}):s.user?e.jsx("section",{className:`${se} flex-row-center-center-medium`,children:e.jsx(t,{className:ie,to:`/user/${s.user._id}`,children:e.jsx(q,{styles:{loader:{width:"2rem",height:"2rem"}},src:s.user.avatar,alt:s.user.name})})}):e.jsxs("section",{className:`${ee} flex-row-center-normal-none`,children:[e.jsx("button",{className:"flex-row-center-center-none",onClick:()=>o("registrate"),children:e.jsxs("section",{className:`${le} flex-row-center-normal-medium`,children:[e.jsx(l,{}),"Registrate"]})}),e.jsx("button",{onClick:()=>o("login"),children:"Login"})]})]})]})}const xe="f",je="g";function ue(){const[a,r]=s.useState(0===window.scrollX);s.useEffect((()=>{document.addEventListener("scroll",(()=>{r(0===document.body.getBoundingClientRect().top)}))}),[]);const t=e=>{const s="top"===e?0:document.body.scrollHeight;window.scrollTo({behavior:"smooth",top:s})};return e.jsx("div",{className:xe,children:e.jsx("div",{className:`${je} flex-row-center-center-none`,children:a?e.jsx(i,{onClick:()=>t("bottom")}):e.jsx(n,{onClick:()=>t("top")})})})}const pe="l",Ne="m",fe="n",we="p",ge="q",ve="r",_e="s",ye="t",be="u",Ee={side_menu_loader_container:"zc",side_menu_loader_item:"Ac",loader:"Bc"};function Se(){return e.jsxs("div",{className:Ee.side_menu_loader_container,children:[e.jsx("div",{className:Ee.side_menu_loader_item}),e.jsx("div",{className:Ee.side_menu_loader_item}),e.jsx("div",{className:Ee.side_menu_loader_item}),e.jsx("div",{className:Ee.side_menu_loader_item})]})}const Pe=[{title:"Admin",path:"/admin/post",icon:e.jsx(u,{className:_e})},{title:"Write post",path:"/write-post",icon:e.jsx(p,{className:_e})}],Oe=[{title:"Write post",path:"/write-post",icon:e.jsx(p,{className:_e})}],$e=/[\#\[\]\{\}\(\)]/g;function Le(){const{pathname:s}=o(),a=m((e=>e.creator)),r=$(),i=V(),n=L(),u=JSON.parse(r.get(_["IS-SIDE-MENU-OPEN"])||"false"),p=[{title:"Home",path:"/",icon:e.jsx(c,{className:_e})},{title:"Search",path:"/search",icon:e.jsx(d,{className:_e})},{title:"Settings",path:"/setting",icon:e.jsx(h,{className:_e})},{title:"Galery",path:"/galery",icon:e.jsx(x,{className:_e})},{title:"Database",path:"/database",icon:e.jsx(j,{className:_e})}];n.role(["Admin"]).permited()&&p.push(...Pe),n.role(["Creator"]).permited()&&p.push(...Oe);const N=e=>{r.set({[`is-${e}-modal-open`]:!JSON.parse(r.get(`is-${e}-modal-open`)||"false")}),r.remove([_["IS-SIDE-MENU-OPEN"]])};return e.jsx("div",{className:pe,children:e.jsxs("aside",{className:`${u?`${be} ${Ne}`:Ne} flex-column-normal-normal-medium`,children:[e.jsx("div",{className:fe,children:i.user?e.jsxs("div",{className:"flex-column-normal-normal-none",children:[e.jsx("p",{className:we,children:"User"}),e.jsxs(t,{to:`/user/${i.user?._id}`,className:"flex-row-center-normal-medium",children:[e.jsx(q,{classNames:{svg:ve,img:ve},src:i.user?.avatar,alt:i.user?.name||"User avatar"}),e.jsx("p",{children:i.user?.name})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{style:{width:"100%"},className:"flex-row-center-normal-medium",onClick:()=>N("login"),children:[e.jsx(l,{className:_e}),e.jsx("p",{children:"Login"})]}),e.jsxs("button",{style:{width:"100%"},className:"flex-row-center-normal-medium",onClick:()=>N("registrate"),children:[e.jsx(l,{className:_e}),e.jsx("p",{children:"Registrate"})]})]})}),e.jsxs("div",{className:"flex-column-normal-normal-none",children:[e.jsx("p",{className:we,children:"Menu"}),i.isAuthPending?e.jsx(Se,{}):e.jsx("section",{className:"flex-column-normal-normal-small",children:p.map((a=>e.jsxs(t,{className:s.split("/")[1]===a.path.split("/")[1]?`${ye} flex-row-center-normal-medium`:"flex-row-center-normal-medium",to:a.path,children:[a.icon,e.jsx("p",{className:ge,children:a.title})]},a.title)))})]}),a.contentDraft.length>0&&e.jsxs("div",{className:"flex-column-normal-normal-none",children:[e.jsx("p",{className:we,children:"Draft's"}),e.jsx("section",{className:"flex-column-normal-normal-small",children:a.contentDraft.slice(0,5).map((s=>e.jsx(t,{className:ge,to:`/write-post?draft-id=${s._id}`,children:s.content.replace($e,"").trim()||s.title||"Unknown"},s._id)))})]})]})})}const Ie="C",Re="D";function Ae(){return e.jsxs("div",{className:`${Ie} flex-row-normal-normal-medium`,children:[e.jsxs("div",{className:`${Re} flex-column-normal-normal-medium`,children:[e.jsx(W,{}),e.jsx(I,{}),e.jsx(W,{}),e.jsx(W,{}),e.jsx(I,{})]}),e.jsx(B,{})]})}const ke="H",De="I";function ze(){return e.jsxs("div",{className:`${ke} flex-row-normal-normal-medium`,children:[e.jsxs("div",{style:{width:"100%"},className:"flex-column-normal-normal-small",children:[e.jsx(I,{}),e.jsx(W,{}),e.jsx(W,{}),e.jsx(W,{})]}),e.jsxs("div",{style:{height:"fit-content"},className:"main-content-container flex-column-normal-normal-medium",children:[e.jsxs("div",{className:"flex-row-normal-normal-medium",children:[e.jsx("div",{style:{width:"5rem"},className:De}),e.jsx("div",{style:{width:"5rem"},className:De}),e.jsx("div",{style:{width:"5rem"},className:De})]}),e.jsxs("div",{className:"flex-column-normal-normal-medium",children:[e.jsx("div",{style:{width:"100%"},className:De}),e.jsx("div",{style:{width:"100%"},className:De}),e.jsx("div",{style:{width:"100%"},className:De}),e.jsx("div",{style:{width:"100%"},className:De})]}),e.jsxs("div",{className:"flex-row-normal-normal-medium",children:[e.jsx("div",{style:{width:"50%"},className:De}),e.jsx("div",{style:{width:"50%"},className:De})]})]})]})}function Ce(){return e.jsxs("div",{style:{width:"100%"},className:"flex-column-center-center-medium",children:[e.jsx(H,{}),e.jsx(X,{})]})}const Me="N",Te="O";function Ue(){return G({title:"Admin panel"}),e.jsxs("div",{style:{width:"100%"},className:"flex-row-normal-normal-none",children:[e.jsxs("div",{style:{paddingRight:"11rem",width:"100%"},className:"flex-column-normal-normal-medium",children:[e.jsx(I,{}),e.jsx(R,{}),e.jsx(I,{})]}),e.jsxs("div",{className:`${Me} flex-column-normal-normal-medium`,children:[e.jsx("div",{style:{width:"100%",height:"2rem"},className:Te}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:Te}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:Te}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:Te})]})]})}const Ve="h",We="i",Fe="j";function Je(){return G({title:"Einstellung"}),e.jsxs("div",{className:"flex-column-normal-normal-medium",children:[e.jsxs("div",{className:`${Ve}`,children:[e.jsxs("div",{className:`${We} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{height:"2rem",width:"8rem"},className:Fe}),e.jsx("div",{style:{height:"1.25rem",width:"15rem"},className:Fe})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"7rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"83%"},className:Fe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"8rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"99%"},className:Fe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"5rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"75%"},className:Fe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"10rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"100%"},className:Fe})]})]})]}),e.jsx("div",{className:`${Ve}`,children:e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"7rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"50%"},className:Fe})]})}),e.jsx("div",{className:`${Ve}`,children:e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"7rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"86%"},className:Fe})]})}),e.jsxs("div",{className:`${Ve}`,children:[e.jsxs("div",{className:`${We} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{height:"2rem",width:"8rem"},className:Fe}),e.jsx("div",{style:{height:"1.25rem",width:"15rem"},className:Fe})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"7rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"83%"},className:Fe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"8rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"99%"},className:Fe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"5rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"75%"},className:Fe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"10rem"},className:Fe}),e.jsx("div",{style:{height:"2rem",width:"100%"},className:Fe})]})]})]})]})}function qe({exeptetRoles:a,children:r,loaderComponent:t}){const l=V(),i=L().role(a).permited();return e.jsx(s.Fragment,{children:l.isAuthPending?t:i?r:e.jsx(A,{error:{code:403,message:"You have no permission to view this page!"}})})}const Ge=s.lazy((()=>K((()=>import("./page/home.js").then((e=>e.p))),__vite__mapDeps([0,1,2,3,4,5,6,7])))),Ye=s.lazy((()=>K((()=>import("./page/post.js").then((e=>e.p))),__vite__mapDeps([8,1,2,3,4,0,5,6,7,9])))),Be=s.lazy((()=>K((()=>import("./page/write-new.js").then((e=>e.p))),__vite__mapDeps([10,1,2,3,4,5,6,11,0,7,12,13,14,15])))),He=s.lazy((()=>K((()=>import("./page/search.js").then((e=>e.p))),__vite__mapDeps([11,1,2,3,4,0,5,6,7,12])))),Xe=s.lazy((()=>K((()=>import("./page/user.js").then((e=>e.p))),__vite__mapDeps([16,1,2,3,4,5,6,0,7,17])))),Ze=s.lazy((()=>K((()=>import("./page/admin.js").then((e=>e.q))),__vite__mapDeps([3,1,2,4])))),Ke=s.lazy((()=>K((()=>import("./page/website-settings.js").then((e=>e.p))),__vite__mapDeps([13,1,2,3,4,14])))),Qe=s.lazy((()=>K((()=>import("./page/galery.js")),__vite__mapDeps([18,1,2,3,4,5,6,19])))),es=s.lazy((()=>K((()=>import("./page/database.js").then((e=>e.p))),__vite__mapDeps([5,1,2,3,4,6])))),ss=()=>{const a=m((e=>e.websiteSetting));return document.getElementById("root").style.fontFamily=a.font,e.jsxs(s.Fragment,{children:[e.jsx(he,{}),e.jsxs("div",{className:"flex-row-normal-normal-medium",style:{padding:"0rem 1.5rem 0rem 1rem",flexGrow:"1",backgroundColor:"white"},children:[e.jsx(Le,{}),e.jsx("main",{children:e.jsxs(g,{children:[e.jsx(v,{path:"/",element:e.jsx(s.Suspense,{fallback:e.jsx(F,{}),children:e.jsx(Ge,{})})}),e.jsx(v,{path:"/post/:id",element:e.jsx(s.Suspense,{fallback:e.jsx(Ae,{}),children:e.jsx(Ye,{})})}),e.jsx(v,{path:"/search",element:e.jsx(s.Suspense,{fallback:e.jsx(ze,{}),children:e.jsx(He,{})})}),e.jsx(v,{path:"/user/:id",element:e.jsx(s.Suspense,{fallback:e.jsx(Ce,{}),children:e.jsx(Xe,{})})}),e.jsx(v,{path:"/setting",element:e.jsx(s.Suspense,{fallback:e.jsx(Je,{}),children:e.jsx(Ke,{})})}),e.jsx(v,{path:"/galery",element:e.jsx(s.Suspense,{fallback:e.jsx(Y,{}),children:e.jsx(Qe,{})})}),e.jsx(v,{path:"/database",element:e.jsx(s.Suspense,{fallback:e.jsx(Y,{}),children:e.jsx(es,{})})}),e.jsx(v,{path:"*",element:e.jsx(A,{error:{code:404,message:"Page not found!"},description:"Site there you search is not implemented or not exist!"})}),e.jsx(v,{path:"/write-post",element:e.jsx(s.Suspense,{fallback:e.jsx(U,{}),children:e.jsx(qe,{exeptetRoles:["Admin","Creator"],loaderComponent:e.jsx(U,{}),children:e.jsx(Be,{})})})}),e.jsx(v,{path:"/admin/:tab",element:e.jsx(s.Suspense,{fallback:e.jsx(Ue,{}),children:e.jsx(qe,{exeptetRoles:["Admin"],loaderComponent:e.jsx(Ue,{}),children:e.jsx(Ze,{})})})})]})})]}),e.jsx(ue,{})]})};N(document.getElementById("root")).render(e.jsx(f,{children:e.jsx(k,{children:e.jsx(D,{children:e.jsx(w,{store:Q,children:e.jsx(ss,{})})})})}));
