const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/page/home.js","assets/js/react.js","assets/js/__commonjsHelpers__.js","assets/js/page/about.js","assets/css/page/about.css","assets/js/page/admin.js","assets/css/page/admin.css","assets/css/page/home.css","assets/js/page/post.js","assets/css/page/post.css","assets/js/page/write-new.js","assets/css/page/write-new.css","assets/js/page/search.js","assets/css/page/search.css","assets/js/page/user.js","assets/js/page/galery.js","assets/js/page/database.js","assets/css/page/database.css","assets/css/page/galery.css","assets/css/page/user.css","assets/js/page/website-settings.js","assets/css/page/website-settings.css"])))=>i.map(i=>d[i]);
import{j as e,r as s,X as a,_ as r,L as t,$ as l,J as n,a0 as i,a1 as m,a2 as o,a3 as c,Y as d,a4 as h,a5 as x,a6 as j,s as u,h as p,c as N,a7 as g,a8 as f,a9 as w,aa as v,ab as y}from"./react.js";import"./page/about.js";import{w as _,x as E,y as b,j as S,U as P,a as $,F as L,T as O,e as I,O as R,S as k,u as A,I as D,s as M,z as T,d as C,P as U,G as z,R as V,p as J}from"./page/admin.js";import{c as F,W}from"./page/write-new.js";import{u as q,a as G,L as H}from"./page/home.js";import{P as Y}from"./page/post.js";import{U as B,a as K}from"./page/user.js";import{L as X}from"./page/database.js";import"./__commonjsHelpers__.js";import"./page/galery.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const Q={},Z=function(e,s,a){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");r=Promise.allSettled(s.map((e=>{if((e=function(e){return"/"+e}(e))in Q)return;Q[e]=!0;const s=e.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const t=document.createElement("link");return t.rel=s?"stylesheet":"modulepreload",s||(t.as="script"),t.crossOrigin="",t.href=e,a&&t.setAttribute("nonce",a),document.head.appendChild(t),s?new Promise(((s,a)=>{t.addEventListener("load",s),t.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function t(e){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}return r.then((s=>{for(const e of s||[])"rejected"===e.status&&t(e.reason);return e().catch(t)}))},ee=E({reducer:_({creator:F,websiteSetting:b})}),se="F",ae="H",re="I",te="J",le="K",ne="L",ie="M",me="M_",oe="N_",ce="P_",de="Q_";function he(){return e.jsxs("div",{className:me,children:[e.jsx("div",{className:`${oe} ${ce}`}),e.jsx("div",{className:`${oe} ${ce}`}),e.jsx("div",{className:`${oe} ${de}`})]})}const xe="V_",je="W_",ue="X_",pe={name:{isMax:{message:"Name is to long!",value:12},isMin:{message:"Name is to short!",value:3}},email:{isPattern:{message:"Email is not valid!",value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/}},password:{isMin:{message:"Password is to short!",value:8}}};function Ne(){const a=q(),r=s.useRef(null),t=S(P["IS-LOGIN-MODAL-OPEN"],r),{submit:l,reset:n,register:i,formState:{errors:m}}=$(pe);return a.clearError(),e.jsx("div",{ref:r,className:t?xe:ue,children:e.jsxs(L,{errors:a.error?.message?[a.error.message]:[],className:je,onSubmit:l((async e=>{await a.create({apiURL:"/login",body:e,redirectURL:"/",setToken:!0}),n()})),isPending:a.isLoading,buttonLabel:"Log in",children:[e.jsx(O,{register:i,name:"name",type:"text",errors:m,placeholder:"Write you name here..."}),e.jsx(O,{register:i,name:"email",type:"text",errors:m,placeholder:"Write you email here..."}),e.jsx(O,{register:i,name:"password",type:"password",errors:m,placeholder:"Write you password here..."})]})})}const ge={name:{isMax:{message:"Name is to long!",value:12},isMin:{message:"Name is to short!",value:3}},email:{isPattern:{message:"Email is not valid!",value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/}},password:{isMin:{message:"Password is to short!",value:8},isEqual:{message:"Passwords does match",compareWith:"confirmPassword"}},confirmPassword:{isMin:{message:"Confirm password is to short!",value:8},isEqual:{message:"Passwords does match",compareWith:"password"}}};function fe(){const a=q(),r=s.useRef(null),t=S(P["IS-REGISTRATE-MODAL-OPEN"],r),{submit:l,reset:n,register:i,formState:{errors:m}}=$(ge);return a.clearError(),e.jsx("div",{ref:r,className:t?xe:ue,children:e.jsxs(L,{isPending:a.isLoading,buttonLabel:"Registrate",errors:a.error?.message?[a.error.message]:[],className:je,onSubmit:l((async e=>{const s=R.createFormDataFromJSON(e);0===s.get("avatar").size&&s.set("avatar",k.generateDefaultAvatar(e.name)),await a.create({apiURL:"/registrate",body:s,redirectURL:"/",setToken:!0}),n()})),children:[e.jsx(O,{register:i,errors:m,name:"name",placeholder:"You name"}),e.jsx(O,{register:i,errors:m,name:"email",placeholder:"You e-mail",type:"email"}),e.jsx(O,{register:i,errors:m,name:"password",placeholder:"You password",type:"password"}),e.jsx(O,{register:i,errors:m,name:"confirmPassword",placeholder:"Confirm you password",type:"password"}),e.jsx(I,{register:i,name:"avatar",label:"Chose you avatar!"})]})})}function we(){const s=q(),n=A(),i=JSON.parse(n.get(P["IS-SIDE-MENU-OPEN"])||"false"),m=e=>{let s=!1;const a=JSON.parse(n.get(`is-${e}-modal-open`)||"false");s="login"===e?JSON.parse(n.get(P["IS-REGISTRATE-MODAL-OPEN"])||"false"):JSON.parse(n.get(P["IS-LOGIN-MODAL-OPEN"])||"false"),s||n.set({[`is-${e}-modal-open`]:!a})};return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{}),e.jsx(fe,{}),e.jsxs("header",{className:`${te} flex-row-center-space-between-none`,children:[e.jsxs("div",{className:`${le} flex-row-center-normal-none`,children:[e.jsx("button",{onClick:()=>{const e=JSON.parse(n.get(P["IS-SIDE-MENU-OPEN"])||"false");n.set({[P["IS-SIDE-MENU-OPEN"]]:!e})},className:re,children:i?e.jsx(a,{}):e.jsx(r,{})}),e.jsx(t,{className:ae,to:"/",children:"Ruzzkyi Mir"})]}),s.isAuthPending?e.jsx(he,{}):s.user?e.jsx("section",{className:`${se} flex-row-center-center-medium`,children:e.jsx(t,{className:ie,to:`/user/${s.user._id}`,children:e.jsx(D,{styles:{svg:{width:"2rem",height:"2rem"},loader:{width:"2rem",height:"2rem"}},src:s.user.avatar,alt:s.user.name})})}):e.jsxs("section",{className:`${se} flex-row-center-normal-none`,children:[e.jsxs("button",{className:`${ne} flex-row-center-normal-medium`,onClick:()=>m("registrate"),children:[e.jsx(l,{}),"Registrate"]}),e.jsx("button",{className:ne,onClick:()=>m("login"),children:"Login"})]})]})]})}const ve="i_",ye="j_";function _e(){const[a,r]=s.useState(0===window.scrollX);s.useEffect((()=>{document.addEventListener("scroll",(()=>{const e=document.body.scrollHeight/2,s=window.scrollY+window.innerHeight;r(!(e<=s))}))}),[]);const t=e=>{const s="top"===e?0:document.body.scrollHeight;window.scrollTo({behavior:"smooth",top:s})};return e.jsx("div",{className:ve,children:e.jsx("div",{className:`${ye} flex-row-center-center-none`,children:a?e.jsx(n,{onClick:()=>t("bottom")}):e.jsx(i,{onClick:()=>t("top")})})})}const Ee="o",be="p",Se="q",Pe="r",$e="s",Le="t",Oe="u",Ie="v",Re="w",ke="Sa",Ae="Ta";function De(){return e.jsxs("div",{className:ke,children:[e.jsx("div",{className:Ae}),e.jsx("div",{className:Ae}),e.jsx("div",{className:Ae}),e.jsx("div",{className:Ae})]})}function Me(s,a){switch(s){case"/write-post":return e.jsx(u,{className:a});case"/admin/post":return e.jsx(j,{className:a});case"/":return e.jsx(x,{className:a});case"/search":return e.jsx(h,{className:a});case"/setting":return e.jsx(d,{className:a});case"/galery":return e.jsx(c,{className:a});case"/database":return e.jsx(o,{className:a});case"/about":return e.jsx(m,{className:a})}}const Te=/[\#\[\]\{\}\(\)]/g;function Ce(){const{pathname:s}=p(),a=N((e=>e.creator)),r=A(),n=q(),i=JSON.parse(r.get(P["IS-SIDE-MENU-OPEN"])||"false"),m=e=>{r.set({[`is-${e}-modal-open`]:!JSON.parse(r.get(`is-${e}-modal-open`)||"false")}),r.remove([P["IS-SIDE-MENU-OPEN"]])};return e.jsx("div",{className:Ee,children:e.jsxs("aside",{className:`${i?`${Re} ${be}`:be} flex-column-normal-normal-medium`,children:[n.user?e.jsxs("div",{className:`${Se} flex-column-normal-normal-none`,children:[e.jsx("p",{className:$e,children:"User"}),e.jsxs(t,{to:`/user/${n.user?._id}`,className:"flex-row-center-normal-medium",children:[e.jsx(D,{classNames:{svg:Pe,img:Pe},src:n.user?.avatar,alt:n.user?.name||"User avatar"}),e.jsx("p",{children:n.user?.name})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{style:{width:"100%"},className:"flex-row-center-normal-medium",onClick:()=>m("login"),children:[e.jsx(l,{className:Oe}),e.jsx("p",{children:"Login"})]}),e.jsxs("button",{style:{width:"100%"},className:"flex-row-center-normal-medium",onClick:()=>m("registrate"),children:[e.jsx(l,{className:Oe}),e.jsx("p",{children:"Registrate"})]})]}),e.jsxs("div",{className:"flex-column-normal-normal-none",children:[e.jsx("p",{className:$e,children:"Menu"}),n.isAuthPending?e.jsx(De,{}):e.jsx("section",{className:"flex-column-normal-normal-small",children:n.permissions?.routing.map((a=>e.jsxs(t,{className:s.split("/")[1]===a.path.split("/")[1]?`${Ie} flex-row-center-normal-medium`:"flex-row-center-normal-medium",to:a.path,children:[Me(a.path,Oe),e.jsx("p",{className:Le,children:a.title})]},a.title)))})]}),a.contentDraft.length>0&&e.jsxs("div",{className:"flex-column-normal-normal-none",children:[e.jsx("p",{className:$e,children:"Entw√ºrfe"}),e.jsx("section",{className:"flex-column-normal-normal-small",children:a.contentDraft.slice(-5).map((s=>e.jsx(t,{className:Le,to:`/write-post?draft-id=${s._id}`,children:s.content.replace(Te,"").trim()||s.title||"Unknown"},s._id)))})]})]})})}const Ue="A",ze="B";function Ve(){return e.jsxs("div",{className:`${Ue} flex-row-normal-normal-medium`,children:[e.jsxs("div",{className:`${ze} flex-column-normal-normal-medium`,children:[e.jsx(G,{}),e.jsx(M,{}),e.jsx(G,{}),e.jsx(G,{}),e.jsx(M,{})]}),e.jsx(Y,{})]})}const Je="e",Fe="f";function We(){return e.jsxs("div",{className:`${Je} flex-row-normal-normal-medium`,children:[e.jsxs("div",{style:{width:"100%"},className:"flex-column-normal-normal-small",children:[e.jsx(M,{}),e.jsx(G,{}),e.jsx(G,{}),e.jsx(G,{})]}),e.jsxs("div",{style:{height:"fit-content"},className:"main-content-container flex-column-normal-normal-medium",children:[e.jsxs("div",{className:"flex-row-normal-normal-medium",children:[e.jsx("div",{style:{width:"5rem"},className:Fe}),e.jsx("div",{style:{width:"5rem"},className:Fe}),e.jsx("div",{style:{width:"5rem"},className:Fe})]}),e.jsxs("div",{className:"flex-column-normal-normal-medium",children:[e.jsx("div",{style:{width:"100%"},className:Fe}),e.jsx("div",{style:{width:"100%"},className:Fe}),e.jsx("div",{style:{width:"100%"},className:Fe}),e.jsx("div",{style:{width:"100%"},className:Fe})]}),e.jsxs("div",{className:"flex-row-normal-normal-medium",children:[e.jsx("div",{style:{width:"50%"},className:Fe}),e.jsx("div",{style:{width:"50%"},className:Fe})]})]})]})}function qe(){return e.jsxs("div",{style:{width:"100%"},className:"flex-column-center-center-medium",children:[e.jsx(B,{}),e.jsx(K,{})]})}const Ge="C",He="D";function Ye(){return e.jsxs("div",{style:{width:"100%"},className:"flex-row-normal-normal-none",children:[e.jsxs("div",{style:{paddingRight:"11rem",width:"100%"},className:"flex-column-normal-normal-medium",children:[e.jsx(M,{}),e.jsx(T,{}),e.jsx(M,{})]}),e.jsxs("div",{className:`${Ge} flex-column-normal-normal-medium`,children:[e.jsx("div",{style:{width:"100%",height:"2rem"},className:He}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:He}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:He}),e.jsx("div",{style:{width:"100%",height:"2rem"},className:He})]})]})}const Be="U",Ke="V",Xe="W";function Qe(){return e.jsxs("div",{className:"flex-column-normal-normal-medium",children:[e.jsxs("div",{className:`${Be}`,children:[e.jsxs("div",{className:`${Ke} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{height:"2rem",width:"8rem"},className:Xe}),e.jsx("div",{style:{height:"1.25rem",width:"15rem"},className:Xe})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"7rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"83%"},className:Xe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"8rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"99%"},className:Xe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"5rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"75%"},className:Xe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"10rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"100%"},className:Xe})]})]})]}),e.jsx("div",{className:`${Be}`,children:e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"7rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"50%"},className:Xe})]})}),e.jsx("div",{className:`${Be}`,children:e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"7rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"86%"},className:Xe})]})}),e.jsxs("div",{className:`${Be}`,children:[e.jsxs("div",{className:`${Ke} flex-column-normal-normal-small`,children:[e.jsx("div",{style:{height:"2rem",width:"8rem"},className:Xe}),e.jsx("div",{style:{height:"1.25rem",width:"15rem"},className:Xe})]}),e.jsxs("div",{className:"flex-column-normal-normal-small",children:[e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"7rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"83%"},className:Xe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"8rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"99%"},className:Xe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"5rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"75%"},className:Xe})]}),e.jsxs("div",{className:"flex-row-normal-space-between-medium",children:[e.jsx("div",{style:{height:"2rem",width:"10rem"},className:Xe}),e.jsx("div",{style:{height:"2rem",width:"100%"},className:Xe})]})]})]})]})}function Ze({exeptetRoles:a,children:r,loaderComponent:t}){const l=q(),n=C().role(a).permited();return e.jsx(s.Fragment,{children:l.isAuthPending?t:n?r:e.jsx(U,{error:{code:403,message:"You have no permission to view this page!"}})})}const es=s.lazy((()=>Z((()=>import("./page/home.js").then((e=>e.p))),__vite__mapDeps([0,1,2,3,4,5,6,7])))),ss=s.lazy((()=>Z((()=>import("./page/post.js").then((e=>e.p))),__vite__mapDeps([8,1,2,3,4,0,5,6,7,9])))),as=s.lazy((()=>Z((()=>import("./page/write-new.js").then((e=>e.p))),__vite__mapDeps([10,1,2,5,3,4,6,0,7,11])))),rs=s.lazy((()=>Z((()=>import("./page/search.js")),__vite__mapDeps([12,1,2,3,4,0,5,6,7,13])))),ts=s.lazy((()=>Z((()=>import("./page/user.js").then((e=>e.p))),__vite__mapDeps([14,1,2,3,4,5,6,0,7,15,16,17,18,19])))),ls=s.lazy((()=>Z((()=>import("./page/admin.js").then((e=>e.H))),__vite__mapDeps([5,1,2,3,4,6])))),ns=s.lazy((()=>Z((()=>import("./page/website-settings.js")),__vite__mapDeps([20,1,2,3,4,16,5,6,17,21])))),is=s.lazy((()=>Z((()=>import("./page/galery.js").then((e=>e.p))),__vite__mapDeps([15,1,2,5,3,4,6,16,17,18])))),ms=s.lazy((()=>Z((()=>import("./page/database.js").then((e=>e.p))),__vite__mapDeps([16,1,2,5,3,4,6,17])))),os=s.lazy((()=>Z((()=>import("./page/about.js")),__vite__mapDeps([3,1,2,4])))),cs=()=>{const a=J();return document.getElementById("root").style.fontFamily=a.setting.font,e.jsxs(s.Fragment,{children:[e.jsx(we,{}),e.jsxs("div",{className:"flex-row-normal-normal-medium",style:{padding:"0rem 1.5rem 0rem 1rem",flexGrow:"1",backgroundColor:"white"},children:[e.jsx(Ce,{}),e.jsx("main",{children:e.jsxs(v,{children:[e.jsx(y,{path:"/",element:e.jsx(s.Suspense,{fallback:e.jsx(H,{}),children:e.jsx(es,{})})}),e.jsx(y,{path:"/post/:id",element:e.jsx(s.Suspense,{fallback:e.jsx(Ve,{}),children:e.jsx(ss,{})})}),e.jsx(y,{path:"/search",element:e.jsx(s.Suspense,{fallback:e.jsx(We,{}),children:e.jsx(rs,{})})}),e.jsx(y,{path:"/user/:id",element:e.jsx(s.Suspense,{fallback:e.jsx(qe,{}),children:e.jsx(ts,{})})}),e.jsx(y,{path:"/setting",element:e.jsx(s.Suspense,{fallback:e.jsx(Qe,{}),children:e.jsx(ns,{})})}),e.jsx(y,{path:"/galery",element:e.jsx(s.Suspense,{fallback:e.jsx(X,{}),children:e.jsx(is,{})})}),e.jsx(y,{path:"/database",element:e.jsx(s.Suspense,{fallback:e.jsx(X,{}),children:e.jsx(ms,{})})}),e.jsx(y,{path:"/about",element:e.jsx(s.Suspense,{fallback:e.jsx(X,{}),children:e.jsx(os,{})})}),e.jsx(y,{path:"*",element:e.jsx(U,{error:{code:404,message:"Page not found!"},description:"Site there you search is not implemented or not exist!"})}),e.jsx(y,{path:"/write-post",element:e.jsx(s.Suspense,{fallback:e.jsx(W,{}),children:e.jsx(Ze,{exeptetRoles:["Admin","Creator"],loaderComponent:e.jsx(W,{}),children:e.jsx(as,{})})})}),e.jsx(y,{path:"/admin/:tab",element:e.jsx(s.Suspense,{fallback:e.jsx(Ye,{}),children:e.jsx(Ze,{exeptetRoles:["Admin"],loaderComponent:e.jsx(Ye,{}),children:e.jsx(ls,{})})})})]})})]}),e.jsx(_e,{})]})};g(document.getElementById("root")).render(e.jsx(f,{children:e.jsx(z,{children:e.jsx(V,{children:e.jsx(w,{store:ee,children:e.jsx(cs,{})})})})}));
